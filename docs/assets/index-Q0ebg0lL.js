var wm=Object.defineProperty;var xm=(e,t,n)=>t in e?wm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var I=(e,t,n)=>xm(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var bn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ef(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Sm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var tf={exports:{}},Ts={},nf={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hi=Symbol.for("react.element"),Pm=Symbol.for("react.portal"),_m=Symbol.for("react.fragment"),Cm=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),Im=Symbol.for("react.provider"),Tm=Symbol.for("react.context"),km=Symbol.for("react.forward_ref"),Nm=Symbol.for("react.suspense"),Om=Symbol.for("react.memo"),Am=Symbol.for("react.lazy"),iu=Symbol.iterator;function Lm(e){return e===null||typeof e!="object"?null:(e=iu&&e[iu]||e["@@iterator"],typeof e=="function"?e:null)}var rf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},of=Object.assign,sf={};function Dr(e,t,n){this.props=e,this.context=t,this.refs=sf,this.updater=n||rf}Dr.prototype.isReactComponent={};Dr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function af(){}af.prototype=Dr.prototype;function Hl(e,t,n){this.props=e,this.context=t,this.refs=sf,this.updater=n||rf}var Ul=Hl.prototype=new af;Ul.constructor=Hl;of(Ul,Dr.prototype);Ul.isPureReactComponent=!0;var ou=Array.isArray,lf=Object.prototype.hasOwnProperty,Wl={current:null},cf={key:!0,ref:!0,__self:!0,__source:!0};function uf(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)lf.call(t,r)&&!cf.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Hi,type:e,key:o,ref:s,props:i,_owner:Wl.current}}function Fm(e,t){return{$$typeof:Hi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $l(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hi}function Rm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var su=/\/+/g;function Ks(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Rm(""+e.key):t.toString(36)}function Lo(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Hi:case Pm:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+Ks(s,0):r,ou(i)?(n="",e!=null&&(n=e.replace(su,"$&/")+"/"),Lo(i,t,n,"",function(c){return c})):i!=null&&($l(i)&&(i=Fm(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(su,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",ou(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+Ks(o,a);s+=Lo(o,t,n,l,i)}else if(l=Lm(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+Ks(o,a++),s+=Lo(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function to(e,t,n){if(e==null)return e;var r=[],i=0;return Lo(e,r,"","",function(o){return t.call(n,o,i++)}),r}function bm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var be={current:null},Fo={transition:null},Dm={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:Fo,ReactCurrentOwner:Wl};function df(){throw Error("act(...) is not supported in production builds of React.")}$.Children={map:to,forEach:function(e,t,n){to(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return to(e,function(){t++}),t},toArray:function(e){return to(e,function(t){return t})||[]},only:function(e){if(!$l(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$.Component=Dr;$.Fragment=_m;$.Profiler=Em;$.PureComponent=Hl;$.StrictMode=Cm;$.Suspense=Nm;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dm;$.act=df;$.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=of({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Wl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)lf.call(t,l)&&!cf.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Hi,type:e.type,key:i,ref:o,props:r,_owner:s}};$.createContext=function(e){return e={$$typeof:Tm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Im,_context:e},e.Consumer=e};$.createElement=uf;$.createFactory=function(e){var t=uf.bind(null,e);return t.type=e,t};$.createRef=function(){return{current:null}};$.forwardRef=function(e){return{$$typeof:km,render:e}};$.isValidElement=$l;$.lazy=function(e){return{$$typeof:Am,_payload:{_status:-1,_result:e},_init:bm}};$.memo=function(e,t){return{$$typeof:Om,type:e,compare:t===void 0?null:t}};$.startTransition=function(e){var t=Fo.transition;Fo.transition={};try{e()}finally{Fo.transition=t}};$.unstable_act=df;$.useCallback=function(e,t){return be.current.useCallback(e,t)};$.useContext=function(e){return be.current.useContext(e)};$.useDebugValue=function(){};$.useDeferredValue=function(e){return be.current.useDeferredValue(e)};$.useEffect=function(e,t){return be.current.useEffect(e,t)};$.useId=function(){return be.current.useId()};$.useImperativeHandle=function(e,t,n){return be.current.useImperativeHandle(e,t,n)};$.useInsertionEffect=function(e,t){return be.current.useInsertionEffect(e,t)};$.useLayoutEffect=function(e,t){return be.current.useLayoutEffect(e,t)};$.useMemo=function(e,t){return be.current.useMemo(e,t)};$.useReducer=function(e,t,n){return be.current.useReducer(e,t,n)};$.useRef=function(e){return be.current.useRef(e)};$.useState=function(e){return be.current.useState(e)};$.useSyncExternalStore=function(e,t,n){return be.current.useSyncExternalStore(e,t,n)};$.useTransition=function(){return be.current.useTransition()};$.version="18.3.1";nf.exports=$;var y=nf.exports;const zm=ef(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=y,Bm=Symbol.for("react.element"),jm=Symbol.for("react.fragment"),Gm=Object.prototype.hasOwnProperty,Hm=Mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Um={key:!0,ref:!0,__self:!0,__source:!0};function ff(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Gm.call(t,r)&&!Um.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Bm,type:e,key:o,ref:s,props:i,_owner:Hm.current}}Ts.Fragment=jm;Ts.jsx=ff;Ts.jsxs=ff;tf.exports=Ts;var h=tf.exports,Ga={},hf={exports:{}},Je={},pf={exports:{}},mf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,z){var F=L.length;L.push(z);e:for(;0<F;){var M=F-1>>>1,D=L[M];if(0<i(D,z))L[M]=z,L[F]=D,F=M;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var z=L[0],F=L.pop();if(F!==z){L[0]=F;e:for(var M=0,D=L.length,Y=D>>>1;M<Y;){var ue=2*(M+1)-1,Se=L[ue],he=ue+1,We=L[he];if(0>i(Se,F))he<D&&0>i(We,Se)?(L[M]=We,L[he]=F,M=he):(L[M]=Se,L[ue]=F,M=ue);else if(he<D&&0>i(We,F))L[M]=We,L[he]=F,M=he;else break e}}return z}function i(L,z){var F=L.sortIndex-z.sortIndex;return F!==0?F:L.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,w=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=L)r(c),z.sortIndex=z.expirationTime,t(l,z);else break;z=n(c)}}function x(L){if(S=!1,v(L),!w)if(n(l)!==null)w=!0,W(_);else{var z=n(c);z!==null&&Q(x,z.startTime-L)}}function _(L,z){w=!1,S&&(S=!1,g(E),E=-1),p=!0;var F=f;try{for(v(z),d=n(l);d!==null&&(!(d.expirationTime>z)||L&&!R());){var M=d.callback;if(typeof M=="function"){d.callback=null,f=d.priorityLevel;var D=M(d.expirationTime<=z);z=e.unstable_now(),typeof D=="function"?d.callback=D:d===n(l)&&r(l),v(z)}else r(l);d=n(l)}if(d!==null)var Y=!0;else{var ue=n(c);ue!==null&&Q(x,ue.startTime-z),Y=!1}return Y}finally{d=null,f=F,p=!1}}var T=!1,C=null,E=-1,k=5,N=-1;function R(){return!(e.unstable_now()-N<k)}function j(){if(C!==null){var L=e.unstable_now();N=L;var z=!0;try{z=C(!0,L)}finally{z?B():(T=!1,C=null)}}else T=!1}var B;if(typeof m=="function")B=function(){m(j)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,V=H.port2;H.port1.onmessage=j,B=function(){V.postMessage(null)}}else B=function(){P(j,0)};function W(L){C=L,T||(T=!0,B())}function Q(L,z){E=P(function(){L(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,W(_))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(L){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var F=f;f=z;try{return L()}finally{f=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var F=f;f=L;try{return z()}finally{f=F}},e.unstable_scheduleCallback=function(L,z,F){var M=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?M+F:M):F=M,L){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=F+D,L={id:u++,callback:z,priorityLevel:L,startTime:F,expirationTime:D,sortIndex:-1},F>M?(L.sortIndex=F,t(c,L),n(l)===null&&L===n(c)&&(S?(g(E),E=-1):S=!0,Q(x,F-M))):(L.sortIndex=D,t(l,L),w||p||(w=!0,W(_))),L},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(L){var z=f;return function(){var F=f;f=z;try{return L.apply(this,arguments)}finally{f=F}}}})(mf);pf.exports=mf;var Wm=pf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m=y,Qe=Wm;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gf=new Set,Pi={};function Dn(e,t){Tr(e,t),Tr(e+"Capture",t)}function Tr(e,t){for(Pi[e]=t,e=0;e<t.length;e++)gf.add(t[e])}var At=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ha=Object.prototype.hasOwnProperty,Vm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,au={},lu={};function qm(e){return Ha.call(lu,e)?!0:Ha.call(au,e)?!1:Vm.test(e)?lu[e]=!0:(au[e]=!0,!1)}function Xm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ym(e,t,n,r){if(t===null||typeof t>"u"||Xm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function De(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ce[e]=new De(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ce[t]=new De(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ce[e]=new De(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ce[e]=new De(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ce[e]=new De(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ce[e]=new De(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ce[e]=new De(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ce[e]=new De(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ce[e]=new De(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vl=/[\-:]([a-z])/g;function ql(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vl,ql);Ce[t]=new De(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vl,ql);Ce[t]=new De(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vl,ql);Ce[t]=new De(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ce[e]=new De(e,1,!1,e.toLowerCase(),null,!1,!1)});Ce.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ce[e]=new De(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xl(e,t,n,r){var i=Ce.hasOwnProperty(t)?Ce[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ym(t,n,i,r)&&(n=null),r||i===null?qm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var bt=$m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,no=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),$n=Symbol.for("react.fragment"),Yl=Symbol.for("react.strict_mode"),Ua=Symbol.for("react.profiler"),yf=Symbol.for("react.provider"),vf=Symbol.for("react.context"),Zl=Symbol.for("react.forward_ref"),Wa=Symbol.for("react.suspense"),$a=Symbol.for("react.suspense_list"),Ql=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),wf=Symbol.for("react.offscreen"),cu=Symbol.iterator;function Br(e){return e===null||typeof e!="object"?null:(e=cu&&e[cu]||e["@@iterator"],typeof e=="function"?e:null)}var le=Object.assign,Js;function oi(e){if(Js===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Js=t&&t[1]||""}return`
`+Js+e}var ea=!1;function ta(e,t){if(!e||ea)return"";ea=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{ea=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?oi(e):""}function Zm(e){switch(e.tag){case 5:return oi(e.type);case 16:return oi("Lazy");case 13:return oi("Suspense");case 19:return oi("SuspenseList");case 0:case 2:case 15:return e=ta(e.type,!1),e;case 11:return e=ta(e.type.render,!1),e;case 1:return e=ta(e.type,!0),e;default:return""}}function Va(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $n:return"Fragment";case Wn:return"Portal";case Ua:return"Profiler";case Yl:return"StrictMode";case Wa:return"Suspense";case $a:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vf:return(e.displayName||"Context")+".Consumer";case yf:return(e._context.displayName||"Context")+".Provider";case Zl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ql:return t=e.displayName||null,t!==null?t:Va(e.type)||"Memo";case Vt:t=e._payload,e=e._init;try{return Va(e(t))}catch{}}return null}function Qm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(t);case 8:return t===Yl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Km(e){var t=xf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ro(e){e._valueTracker||(e._valueTracker=Km(e))}function Sf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=xf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Vo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qa(e,t){var n=t.checked;return le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function uu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Pf(e,t){t=t.checked,t!=null&&Xl(e,"checked",t,!1)}function Xa(e,t){Pf(e,t);var n=cn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ya(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ya(e,t.type,cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function du(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ya(e,t,n){(t!=="number"||Vo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var si=Array.isArray;function xr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Za(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(si(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cn(n)}}function _f(e,t){var n=cn(t.value),r=cn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function hu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Cf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var io,Ef=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(io=io||document.createElement("div"),io.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=io.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _i(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jm=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(e){Jm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ci[t]=ci[e]})});function If(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ci.hasOwnProperty(e)&&ci[e]?(""+t).trim():t+"px"}function Tf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=If(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var eg=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ka(e,t){if(t){if(eg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function Ja(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var el=null;function Kl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tl=null,Sr=null,Pr=null;function pu(e){if(e=$i(e)){if(typeof tl!="function")throw Error(A(280));var t=e.stateNode;t&&(t=Ls(t),tl(e.stateNode,e.type,t))}}function kf(e){Sr?Pr?Pr.push(e):Pr=[e]:Sr=e}function Nf(){if(Sr){var e=Sr,t=Pr;if(Pr=Sr=null,pu(e),t)for(e=0;e<t.length;e++)pu(t[e])}}function Of(e,t){return e(t)}function Af(){}var na=!1;function Lf(e,t,n){if(na)return e(t,n);na=!0;try{return Of(e,t,n)}finally{na=!1,(Sr!==null||Pr!==null)&&(Af(),Nf())}}function Ci(e,t){var n=e.stateNode;if(n===null)return null;var r=Ls(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var nl=!1;if(At)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){nl=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{nl=!1}function tg(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var ui=!1,qo=null,Xo=!1,rl=null,ng={onError:function(e){ui=!0,qo=e}};function rg(e,t,n,r,i,o,s,a,l){ui=!1,qo=null,tg.apply(ng,arguments)}function ig(e,t,n,r,i,o,s,a,l){if(rg.apply(this,arguments),ui){if(ui){var c=qo;ui=!1,qo=null}else throw Error(A(198));Xo||(Xo=!0,rl=c)}}function zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ff(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mu(e){if(zn(e)!==e)throw Error(A(188))}function og(e){var t=e.alternate;if(!t){if(t=zn(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return mu(i),e;if(o===r)return mu(i),t;o=o.sibling}throw Error(A(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function Rf(e){return e=og(e),e!==null?bf(e):null}function bf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bf(e);if(t!==null)return t;e=e.sibling}return null}var Df=Qe.unstable_scheduleCallback,gu=Qe.unstable_cancelCallback,sg=Qe.unstable_shouldYield,ag=Qe.unstable_requestPaint,de=Qe.unstable_now,lg=Qe.unstable_getCurrentPriorityLevel,Jl=Qe.unstable_ImmediatePriority,zf=Qe.unstable_UserBlockingPriority,Yo=Qe.unstable_NormalPriority,cg=Qe.unstable_LowPriority,Mf=Qe.unstable_IdlePriority,ks=null,St=null;function ug(e){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(ks,e,void 0,(e.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:hg,dg=Math.log,fg=Math.LN2;function hg(e){return e>>>=0,e===0?32:31-(dg(e)/fg|0)|0}var oo=64,so=4194304;function ai(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=ai(a):(o&=s,o!==0&&(r=ai(o)))}else s=n&~i,s!==0?r=ai(s):o!==0&&(r=ai(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ft(t),i=1<<n,r|=e[n],t&=~i;return r}function pg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-ft(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=pg(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function il(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bf(){var e=oo;return oo<<=1,!(oo&4194240)&&(oo=64),e}function ra(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ui(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ft(t),e[t]=n}function gg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ft(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function ec(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ft(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var K=0;function jf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gf,tc,Hf,Uf,Wf,ol=!1,ao=[],en=null,tn=null,nn=null,Ei=new Map,Ii=new Map,Yt=[],yg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yu(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":Ei.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ii.delete(t.pointerId)}}function Gr(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=$i(t),t!==null&&tc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function vg(e,t,n,r,i){switch(t){case"focusin":return en=Gr(en,e,t,n,r,i),!0;case"dragenter":return tn=Gr(tn,e,t,n,r,i),!0;case"mouseover":return nn=Gr(nn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ei.set(o,Gr(Ei.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ii.set(o,Gr(Ii.get(o)||null,e,t,n,r,i)),!0}return!1}function $f(e){var t=yn(e.target);if(t!==null){var n=zn(t);if(n!==null){if(t=n.tag,t===13){if(t=Ff(n),t!==null){e.blockedOn=t,Wf(e.priority,function(){Hf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ro(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=sl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);el=r,n.target.dispatchEvent(r),el=null}else return t=$i(n),t!==null&&tc(t),e.blockedOn=n,!1;t.shift()}return!0}function vu(e,t,n){Ro(e)&&n.delete(t)}function wg(){ol=!1,en!==null&&Ro(en)&&(en=null),tn!==null&&Ro(tn)&&(tn=null),nn!==null&&Ro(nn)&&(nn=null),Ei.forEach(vu),Ii.forEach(vu)}function Hr(e,t){e.blockedOn===t&&(e.blockedOn=null,ol||(ol=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,wg)))}function Ti(e){function t(i){return Hr(i,e)}if(0<ao.length){Hr(ao[0],e);for(var n=1;n<ao.length;n++){var r=ao[n];r.blockedOn===e&&(r.blockedOn=null)}}for(en!==null&&Hr(en,e),tn!==null&&Hr(tn,e),nn!==null&&Hr(nn,e),Ei.forEach(t),Ii.forEach(t),n=0;n<Yt.length;n++)r=Yt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yt.length&&(n=Yt[0],n.blockedOn===null);)$f(n),n.blockedOn===null&&Yt.shift()}var _r=bt.ReactCurrentBatchConfig,Qo=!0;function xg(e,t,n,r){var i=K,o=_r.transition;_r.transition=null;try{K=1,nc(e,t,n,r)}finally{K=i,_r.transition=o}}function Sg(e,t,n,r){var i=K,o=_r.transition;_r.transition=null;try{K=4,nc(e,t,n,r)}finally{K=i,_r.transition=o}}function nc(e,t,n,r){if(Qo){var i=sl(e,t,n,r);if(i===null)ha(e,t,r,Ko,n),yu(e,r);else if(vg(i,e,t,n,r))r.stopPropagation();else if(yu(e,r),t&4&&-1<yg.indexOf(e)){for(;i!==null;){var o=$i(i);if(o!==null&&Gf(o),o=sl(e,t,n,r),o===null&&ha(e,t,r,Ko,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ha(e,t,r,null,n)}}var Ko=null;function sl(e,t,n,r){if(Ko=null,e=Kl(r),e=yn(e),e!==null)if(t=zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ff(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ko=e,null}function Vf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lg()){case Jl:return 1;case zf:return 4;case Yo:case cg:return 16;case Mf:return 536870912;default:return 16}default:return 16}}var Kt=null,rc=null,bo=null;function qf(){if(bo)return bo;var e,t=rc,n=t.length,r,i="value"in Kt?Kt.value:Kt.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return bo=i.slice(e,1<r?1-r:void 0)}function Do(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lo(){return!0}function wu(){return!1}function et(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?lo:wu,this.isPropagationStopped=wu,this}return le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),t}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=et(zr),Wi=le({},zr,{view:0,detail:0}),Pg=et(Wi),ia,oa,Ur,Ns=le({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ur&&(Ur&&e.type==="mousemove"?(ia=e.screenX-Ur.screenX,oa=e.screenY-Ur.screenY):oa=ia=0,Ur=e),ia)},movementY:function(e){return"movementY"in e?e.movementY:oa}}),xu=et(Ns),_g=le({},Ns,{dataTransfer:0}),Cg=et(_g),Eg=le({},Wi,{relatedTarget:0}),sa=et(Eg),Ig=le({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Tg=et(Ig),kg=le({},zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ng=et(kg),Og=le({},zr,{data:0}),Su=et(Og),Ag={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fg[e])?!!t[e]:!1}function oc(){return Rg}var bg=le({},Wi,{key:function(e){if(e.key){var t=Ag[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Do(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(e){return e.type==="keypress"?Do(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Do(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dg=et(bg),zg=le({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pu=et(zg),Mg=le({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),Bg=et(Mg),jg=le({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gg=et(jg),Hg=le({},Ns,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ug=et(Hg),Wg=[9,13,27,32],sc=At&&"CompositionEvent"in window,di=null;At&&"documentMode"in document&&(di=document.documentMode);var $g=At&&"TextEvent"in window&&!di,Xf=At&&(!sc||di&&8<di&&11>=di),_u=" ",Cu=!1;function Yf(e,t){switch(e){case"keyup":return Wg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vn=!1;function Vg(e,t){switch(e){case"compositionend":return Zf(t);case"keypress":return t.which!==32?null:(Cu=!0,_u);case"textInput":return e=t.data,e===_u&&Cu?null:e;default:return null}}function qg(e,t){if(Vn)return e==="compositionend"||!sc&&Yf(e,t)?(e=qf(),bo=rc=Kt=null,Vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xf&&t.locale!=="ko"?null:t.data;default:return null}}var Xg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xg[e.type]:t==="textarea"}function Qf(e,t,n,r){kf(r),t=Jo(t,"onChange"),0<t.length&&(n=new ic("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var fi=null,ki=null;function Yg(e){lh(e,0)}function Os(e){var t=Yn(e);if(Sf(t))return e}function Zg(e,t){if(e==="change")return t}var Kf=!1;if(At){var aa;if(At){var la="oninput"in document;if(!la){var Iu=document.createElement("div");Iu.setAttribute("oninput","return;"),la=typeof Iu.oninput=="function"}aa=la}else aa=!1;Kf=aa&&(!document.documentMode||9<document.documentMode)}function Tu(){fi&&(fi.detachEvent("onpropertychange",Jf),ki=fi=null)}function Jf(e){if(e.propertyName==="value"&&Os(ki)){var t=[];Qf(t,ki,e,Kl(e)),Lf(Yg,t)}}function Qg(e,t,n){e==="focusin"?(Tu(),fi=t,ki=n,fi.attachEvent("onpropertychange",Jf)):e==="focusout"&&Tu()}function Kg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Os(ki)}function Jg(e,t){if(e==="click")return Os(t)}function ey(e,t){if(e==="input"||e==="change")return Os(t)}function ty(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pt=typeof Object.is=="function"?Object.is:ty;function Ni(e,t){if(pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ha.call(t,i)||!pt(e[i],t[i]))return!1}return!0}function ku(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nu(e,t){var n=ku(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ku(n)}}function eh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function th(){for(var e=window,t=Vo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Vo(e.document)}return t}function ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ny(e){var t=th(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&eh(n.ownerDocument.documentElement,n)){if(r!==null&&ac(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Nu(n,o);var s=Nu(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ry=At&&"documentMode"in document&&11>=document.documentMode,qn=null,al=null,hi=null,ll=!1;function Ou(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ll||qn==null||qn!==Vo(r)||(r=qn,"selectionStart"in r&&ac(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hi&&Ni(hi,r)||(hi=r,r=Jo(al,"onSelect"),0<r.length&&(t=new ic("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qn)))}function co(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xn={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionend:co("Transition","TransitionEnd")},ca={},nh={};At&&(nh=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function As(e){if(ca[e])return ca[e];if(!Xn[e])return e;var t=Xn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nh)return ca[e]=t[n];return e}var rh=As("animationend"),ih=As("animationiteration"),oh=As("animationstart"),sh=As("transitionend"),ah=new Map,Au="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(e,t){ah.set(e,t),Dn(t,[e])}for(var ua=0;ua<Au.length;ua++){var da=Au[ua],iy=da.toLowerCase(),oy=da[0].toUpperCase()+da.slice(1);dn(iy,"on"+oy)}dn(rh,"onAnimationEnd");dn(ih,"onAnimationIteration");dn(oh,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(sh,"onTransitionEnd");Tr("onMouseEnter",["mouseout","mouseover"]);Tr("onMouseLeave",["mouseout","mouseover"]);Tr("onPointerEnter",["pointerout","pointerover"]);Tr("onPointerLeave",["pointerout","pointerover"]);Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sy=new Set("cancel close invalid load scroll toggle".split(" ").concat(li));function Lu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ig(r,t,void 0,e),e.currentTarget=null}function lh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Lu(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Lu(i,a,c),o=l}}}if(Xo)throw e=rl,Xo=!1,rl=null,e}function ee(e,t){var n=t[hl];n===void 0&&(n=t[hl]=new Set);var r=e+"__bubble";n.has(r)||(ch(t,e,2,!1),n.add(r))}function fa(e,t,n){var r=0;t&&(r|=4),ch(n,e,r,t)}var uo="_reactListening"+Math.random().toString(36).slice(2);function Oi(e){if(!e[uo]){e[uo]=!0,gf.forEach(function(n){n!=="selectionchange"&&(sy.has(n)||fa(n,!1,e),fa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uo]||(t[uo]=!0,fa("selectionchange",!1,t))}}function ch(e,t,n,r){switch(Vf(t)){case 1:var i=xg;break;case 4:i=Sg;break;default:i=nc}n=i.bind(null,t,n,e),i=void 0,!nl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ha(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=yn(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}Lf(function(){var c=o,u=Kl(n),d=[];e:{var f=ah.get(e);if(f!==void 0){var p=ic,w=e;switch(e){case"keypress":if(Do(n)===0)break e;case"keydown":case"keyup":p=Dg;break;case"focusin":w="focus",p=sa;break;case"focusout":w="blur",p=sa;break;case"beforeblur":case"afterblur":p=sa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Cg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Bg;break;case rh:case ih:case oh:p=Tg;break;case sh:p=Gg;break;case"scroll":p=Pg;break;case"wheel":p=Ug;break;case"copy":case"cut":case"paste":p=Ng;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Pu}var S=(t&4)!==0,P=!S&&e==="scroll",g=S?f!==null?f+"Capture":null:f;S=[];for(var m=c,v;m!==null;){v=m;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,g!==null&&(x=Ci(m,g),x!=null&&S.push(Ai(m,x,v)))),P)break;m=m.return}0<S.length&&(f=new p(f,w,null,n,u),d.push({event:f,listeners:S}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==el&&(w=n.relatedTarget||n.fromElement)&&(yn(w)||w[Lt]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=c,w=w?yn(w):null,w!==null&&(P=zn(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=c),p!==w)){if(S=xu,x="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(S=Pu,x="onPointerLeave",g="onPointerEnter",m="pointer"),P=p==null?f:Yn(p),v=w==null?f:Yn(w),f=new S(x,m+"leave",p,n,u),f.target=P,f.relatedTarget=v,x=null,yn(u)===c&&(S=new S(g,m+"enter",w,n,u),S.target=v,S.relatedTarget=P,x=S),P=x,p&&w)t:{for(S=p,g=w,m=0,v=S;v;v=Gn(v))m++;for(v=0,x=g;x;x=Gn(x))v++;for(;0<m-v;)S=Gn(S),m--;for(;0<v-m;)g=Gn(g),v--;for(;m--;){if(S===g||g!==null&&S===g.alternate)break t;S=Gn(S),g=Gn(g)}S=null}else S=null;p!==null&&Fu(d,f,p,S,!1),w!==null&&P!==null&&Fu(d,P,w,S,!0)}}e:{if(f=c?Yn(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=Zg;else if(Eu(f))if(Kf)_=ey;else{_=Kg;var T=Qg}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Jg);if(_&&(_=_(e,c))){Qf(d,_,n,u);break e}T&&T(e,f,c),e==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Ya(f,"number",f.value)}switch(T=c?Yn(c):window,e){case"focusin":(Eu(T)||T.contentEditable==="true")&&(qn=T,al=c,hi=null);break;case"focusout":hi=al=qn=null;break;case"mousedown":ll=!0;break;case"contextmenu":case"mouseup":case"dragend":ll=!1,Ou(d,n,u);break;case"selectionchange":if(ry)break;case"keydown":case"keyup":Ou(d,n,u)}var C;if(sc)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Vn?Yf(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Xf&&n.locale!=="ko"&&(Vn||E!=="onCompositionStart"?E==="onCompositionEnd"&&Vn&&(C=qf()):(Kt=u,rc="value"in Kt?Kt.value:Kt.textContent,Vn=!0)),T=Jo(c,E),0<T.length&&(E=new Su(E,e,null,n,u),d.push({event:E,listeners:T}),C?E.data=C:(C=Zf(n),C!==null&&(E.data=C)))),(C=$g?Vg(e,n):qg(e,n))&&(c=Jo(c,"onBeforeInput"),0<c.length&&(u=new Su("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}lh(d,t)})}function Ai(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Jo(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ci(e,n),o!=null&&r.unshift(Ai(e,o,i)),o=Ci(e,t),o!=null&&r.push(Ai(e,o,i))),e=e.return}return r}function Gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fu(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ci(n,o),l!=null&&s.unshift(Ai(n,l,a))):i||(l=Ci(n,o),l!=null&&s.push(Ai(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var ay=/\r\n?/g,ly=/\u0000|\uFFFD/g;function Ru(e){return(typeof e=="string"?e:""+e).replace(ay,`
`).replace(ly,"")}function fo(e,t,n){if(t=Ru(t),Ru(e)!==t&&n)throw Error(A(425))}function es(){}var cl=null,ul=null;function dl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fl=typeof setTimeout=="function"?setTimeout:void 0,cy=typeof clearTimeout=="function"?clearTimeout:void 0,bu=typeof Promise=="function"?Promise:void 0,uy=typeof queueMicrotask=="function"?queueMicrotask:typeof bu<"u"?function(e){return bu.resolve(null).then(e).catch(dy)}:fl;function dy(e){setTimeout(function(){throw e})}function pa(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ti(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ti(t)}function rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Du(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),wt="__reactFiber$"+Mr,Li="__reactProps$"+Mr,Lt="__reactContainer$"+Mr,hl="__reactEvents$"+Mr,fy="__reactListeners$"+Mr,hy="__reactHandles$"+Mr;function yn(e){var t=e[wt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Lt]||n[wt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Du(e);e!==null;){if(n=e[wt])return n;e=Du(e)}return t}e=n,n=e.parentNode}return null}function $i(e){return e=e[wt]||e[Lt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function Ls(e){return e[Li]||null}var pl=[],Zn=-1;function fn(e){return{current:e}}function ne(e){0>Zn||(e.current=pl[Zn],pl[Zn]=null,Zn--)}function J(e,t){Zn++,pl[Zn]=e.current,e.current=t}var un={},Oe=fn(un),Ge=fn(!1),On=un;function kr(e,t){var n=e.type.contextTypes;if(!n)return un;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function He(e){return e=e.childContextTypes,e!=null}function ts(){ne(Ge),ne(Oe)}function zu(e,t,n){if(Oe.current!==un)throw Error(A(168));J(Oe,t),J(Ge,n)}function uh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(A(108,Qm(e)||"Unknown",i));return le({},n,r)}function ns(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||un,On=Oe.current,J(Oe,e),J(Ge,Ge.current),!0}function Mu(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=uh(e,t,On),r.__reactInternalMemoizedMergedChildContext=e,ne(Ge),ne(Oe),J(Oe,e)):ne(Ge),J(Ge,n)}var Tt=null,Fs=!1,ma=!1;function dh(e){Tt===null?Tt=[e]:Tt.push(e)}function py(e){Fs=!0,dh(e)}function hn(){if(!ma&&Tt!==null){ma=!0;var e=0,t=K;try{var n=Tt;for(K=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Tt=null,Fs=!1}catch(i){throw Tt!==null&&(Tt=Tt.slice(e+1)),Df(Jl,hn),i}finally{K=t,ma=!1}}return null}var Qn=[],Kn=0,rs=null,is=0,nt=[],rt=0,An=null,kt=1,Nt="";function mn(e,t){Qn[Kn++]=is,Qn[Kn++]=rs,rs=e,is=t}function fh(e,t,n){nt[rt++]=kt,nt[rt++]=Nt,nt[rt++]=An,An=e;var r=kt;e=Nt;var i=32-ft(r)-1;r&=~(1<<i),n+=1;var o=32-ft(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,kt=1<<32-ft(t)+i|n<<i|r,Nt=o+e}else kt=1<<o|n<<i|r,Nt=e}function lc(e){e.return!==null&&(mn(e,1),fh(e,1,0))}function cc(e){for(;e===rs;)rs=Qn[--Kn],Qn[Kn]=null,is=Qn[--Kn],Qn[Kn]=null;for(;e===An;)An=nt[--rt],nt[rt]=null,Nt=nt[--rt],nt[rt]=null,kt=nt[--rt],nt[rt]=null}var Ze=null,Ye=null,ie=!1,dt=null;function hh(e,t){var n=it(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ze=e,Ye=rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ze=e,Ye=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=An!==null?{id:kt,overflow:Nt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=it(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ze=e,Ye=null,!0):!1;default:return!1}}function ml(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gl(e){if(ie){var t=Ye;if(t){var n=t;if(!Bu(e,t)){if(ml(e))throw Error(A(418));t=rn(n.nextSibling);var r=Ze;t&&Bu(e,t)?hh(r,n):(e.flags=e.flags&-4097|2,ie=!1,Ze=e)}}else{if(ml(e))throw Error(A(418));e.flags=e.flags&-4097|2,ie=!1,Ze=e}}}function ju(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ze=e}function ho(e){if(e!==Ze)return!1;if(!ie)return ju(e),ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dl(e.type,e.memoizedProps)),t&&(t=Ye)){if(ml(e))throw ph(),Error(A(418));for(;t;)hh(e,t),t=rn(t.nextSibling)}if(ju(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ye=rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ye=null}}else Ye=Ze?rn(e.stateNode.nextSibling):null;return!0}function ph(){for(var e=Ye;e;)e=rn(e.nextSibling)}function Nr(){Ye=Ze=null,ie=!1}function uc(e){dt===null?dt=[e]:dt.push(e)}var my=bt.ReactCurrentBatchConfig;function Wr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function po(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gu(e){var t=e._init;return t(e._payload)}function mh(e){function t(g,m){if(e){var v=g.deletions;v===null?(g.deletions=[m],g.flags|=16):v.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=ln(g,m),g.index=0,g.sibling=null,g}function o(g,m,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<m?(g.flags|=2,m):v):(g.flags|=2,m)):(g.flags|=1048576,m)}function s(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,m,v,x){return m===null||m.tag!==6?(m=Pa(v,g.mode,x),m.return=g,m):(m=i(m,v),m.return=g,m)}function l(g,m,v,x){var _=v.type;return _===$n?u(g,m,v.props.children,x,v.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Vt&&Gu(_)===m.type)?(x=i(m,v.props),x.ref=Wr(g,m,v),x.return=g,x):(x=Uo(v.type,v.key,v.props,null,g.mode,x),x.ref=Wr(g,m,v),x.return=g,x)}function c(g,m,v,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=_a(v,g.mode,x),m.return=g,m):(m=i(m,v.children||[]),m.return=g,m)}function u(g,m,v,x,_){return m===null||m.tag!==7?(m=Tn(v,g.mode,x,_),m.return=g,m):(m=i(m,v),m.return=g,m)}function d(g,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Pa(""+m,g.mode,v),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case no:return v=Uo(m.type,m.key,m.props,null,g.mode,v),v.ref=Wr(g,null,m),v.return=g,v;case Wn:return m=_a(m,g.mode,v),m.return=g,m;case Vt:var x=m._init;return d(g,x(m._payload),v)}if(si(m)||Br(m))return m=Tn(m,g.mode,v,null),m.return=g,m;po(g,m)}return null}function f(g,m,v,x){var _=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(g,m,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case no:return v.key===_?l(g,m,v,x):null;case Wn:return v.key===_?c(g,m,v,x):null;case Vt:return _=v._init,f(g,m,_(v._payload),x)}if(si(v)||Br(v))return _!==null?null:u(g,m,v,x,null);po(g,v)}return null}function p(g,m,v,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(v)||null,a(m,g,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case no:return g=g.get(x.key===null?v:x.key)||null,l(m,g,x,_);case Wn:return g=g.get(x.key===null?v:x.key)||null,c(m,g,x,_);case Vt:var T=x._init;return p(g,m,v,T(x._payload),_)}if(si(x)||Br(x))return g=g.get(v)||null,u(m,g,x,_,null);po(m,x)}return null}function w(g,m,v,x){for(var _=null,T=null,C=m,E=m=0,k=null;C!==null&&E<v.length;E++){C.index>E?(k=C,C=null):k=C.sibling;var N=f(g,C,v[E],x);if(N===null){C===null&&(C=k);break}e&&C&&N.alternate===null&&t(g,C),m=o(N,m,E),T===null?_=N:T.sibling=N,T=N,C=k}if(E===v.length)return n(g,C),ie&&mn(g,E),_;if(C===null){for(;E<v.length;E++)C=d(g,v[E],x),C!==null&&(m=o(C,m,E),T===null?_=C:T.sibling=C,T=C);return ie&&mn(g,E),_}for(C=r(g,C);E<v.length;E++)k=p(C,g,E,v[E],x),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?E:k.key),m=o(k,m,E),T===null?_=k:T.sibling=k,T=k);return e&&C.forEach(function(R){return t(g,R)}),ie&&mn(g,E),_}function S(g,m,v,x){var _=Br(v);if(typeof _!="function")throw Error(A(150));if(v=_.call(v),v==null)throw Error(A(151));for(var T=_=null,C=m,E=m=0,k=null,N=v.next();C!==null&&!N.done;E++,N=v.next()){C.index>E?(k=C,C=null):k=C.sibling;var R=f(g,C,N.value,x);if(R===null){C===null&&(C=k);break}e&&C&&R.alternate===null&&t(g,C),m=o(R,m,E),T===null?_=R:T.sibling=R,T=R,C=k}if(N.done)return n(g,C),ie&&mn(g,E),_;if(C===null){for(;!N.done;E++,N=v.next())N=d(g,N.value,x),N!==null&&(m=o(N,m,E),T===null?_=N:T.sibling=N,T=N);return ie&&mn(g,E),_}for(C=r(g,C);!N.done;E++,N=v.next())N=p(C,g,E,N.value,x),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?E:N.key),m=o(N,m,E),T===null?_=N:T.sibling=N,T=N);return e&&C.forEach(function(j){return t(g,j)}),ie&&mn(g,E),_}function P(g,m,v,x){if(typeof v=="object"&&v!==null&&v.type===$n&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case no:e:{for(var _=v.key,T=m;T!==null;){if(T.key===_){if(_=v.type,_===$n){if(T.tag===7){n(g,T.sibling),m=i(T,v.props.children),m.return=g,g=m;break e}}else if(T.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Vt&&Gu(_)===T.type){n(g,T.sibling),m=i(T,v.props),m.ref=Wr(g,T,v),m.return=g,g=m;break e}n(g,T);break}else t(g,T);T=T.sibling}v.type===$n?(m=Tn(v.props.children,g.mode,x,v.key),m.return=g,g=m):(x=Uo(v.type,v.key,v.props,null,g.mode,x),x.ref=Wr(g,m,v),x.return=g,g=x)}return s(g);case Wn:e:{for(T=v.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(g,m.sibling),m=i(m,v.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=_a(v,g.mode,x),m.return=g,g=m}return s(g);case Vt:return T=v._init,P(g,m,T(v._payload),x)}if(si(v))return w(g,m,v,x);if(Br(v))return S(g,m,v,x);po(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(g,m.sibling),m=i(m,v),m.return=g,g=m):(n(g,m),m=Pa(v,g.mode,x),m.return=g,g=m),s(g)):n(g,m)}return P}var Or=mh(!0),gh=mh(!1),os=fn(null),ss=null,Jn=null,dc=null;function fc(){dc=Jn=ss=null}function hc(e){var t=os.current;ne(os),e._currentValue=t}function yl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cr(e,t){ss=e,dc=Jn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(je=!0),e.firstContext=null)}function st(e){var t=e._currentValue;if(dc!==e)if(e={context:e,memoizedValue:t,next:null},Jn===null){if(ss===null)throw Error(A(308));Jn=e,ss.dependencies={lanes:0,firstContext:e}}else Jn=Jn.next=e;return t}var vn=null;function pc(e){vn===null?vn=[e]:vn.push(e)}function yh(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,pc(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ft(e,r)}function Ft(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qt=!1;function mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ot(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function on(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ft(e,n)}return i=r.interleaved,i===null?(t.next=t,pc(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ft(e,n)}function zo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ec(e,n)}}function Hu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function as(e,t,n,r){var i=e.updateQueue;qt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,S=a;switch(f=t,p=n,S.tag){case 1:if(w=S.payload,typeof w=="function"){d=w.call(p,d,f);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=S.payload,f=typeof w=="function"?w.call(p,d,f):w,f==null)break e;d=le({},d,f);break e;case 2:qt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Fn|=s,e.lanes=s,e.memoizedState=d}}function Uu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(A(191,i));i.call(r)}}}var Vi={},Pt=fn(Vi),Fi=fn(Vi),Ri=fn(Vi);function wn(e){if(e===Vi)throw Error(A(174));return e}function gc(e,t){switch(J(Ri,t),J(Fi,e),J(Pt,Vi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qa(t,e)}ne(Pt),J(Pt,t)}function Ar(){ne(Pt),ne(Fi),ne(Ri)}function wh(e){wn(Ri.current);var t=wn(Pt.current),n=Qa(t,e.type);t!==n&&(J(Fi,e),J(Pt,n))}function yc(e){Fi.current===e&&(ne(Pt),ne(Fi))}var oe=fn(0);function ls(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ga=[];function vc(){for(var e=0;e<ga.length;e++)ga[e]._workInProgressVersionPrimary=null;ga.length=0}var Mo=bt.ReactCurrentDispatcher,ya=bt.ReactCurrentBatchConfig,Ln=0,se=null,me=null,ve=null,cs=!1,pi=!1,bi=0,gy=0;function Ie(){throw Error(A(321))}function wc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pt(e[n],t[n]))return!1;return!0}function xc(e,t,n,r,i,o){if(Ln=o,se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mo.current=e===null||e.memoizedState===null?xy:Sy,e=n(r,i),pi){o=0;do{if(pi=!1,bi=0,25<=o)throw Error(A(301));o+=1,ve=me=null,t.updateQueue=null,Mo.current=Py,e=n(r,i)}while(pi)}if(Mo.current=us,t=me!==null&&me.next!==null,Ln=0,ve=me=se=null,cs=!1,t)throw Error(A(300));return e}function Sc(){var e=bi!==0;return bi=0,e}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?se.memoizedState=ve=e:ve=ve.next=e,ve}function at(){if(me===null){var e=se.alternate;e=e!==null?e.memoizedState:null}else e=me.next;var t=ve===null?se.memoizedState:ve.next;if(t!==null)ve=t,me=e;else{if(e===null)throw Error(A(310));me=e,e={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},ve===null?se.memoizedState=ve=e:ve=ve.next=e}return ve}function Di(e,t){return typeof t=="function"?t(e):t}function va(e){var t=at(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=me,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((Ln&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,se.lanes|=u,Fn|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,pt(r,t.memoizedState)||(je=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,se.lanes|=o,Fn|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=at(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);pt(o,t.memoizedState)||(je=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function xh(){}function Sh(e,t){var n=se,r=at(),i=t(),o=!pt(r.memoizedState,i);if(o&&(r.memoizedState=i,je=!0),r=r.queue,Pc(Ch.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ve!==null&&ve.memoizedState.tag&1){if(n.flags|=2048,zi(9,_h.bind(null,n,r,i,t),void 0,null),xe===null)throw Error(A(349));Ln&30||Ph(n,t,i)}return i}function Ph(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _h(e,t,n,r){t.value=n,t.getSnapshot=r,Eh(t)&&Ih(e)}function Ch(e,t,n){return n(function(){Eh(t)&&Ih(e)})}function Eh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pt(e,n)}catch{return!0}}function Ih(e){var t=Ft(e,1);t!==null&&ht(t,e,1,-1)}function Wu(e){var t=vt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:e},t.queue=e,e=e.dispatch=wy.bind(null,se,e),[t.memoizedState,e]}function zi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Th(){return at().memoizedState}function Bo(e,t,n,r){var i=vt();se.flags|=e,i.memoizedState=zi(1|t,n,void 0,r===void 0?null:r)}function Rs(e,t,n,r){var i=at();r=r===void 0?null:r;var o=void 0;if(me!==null){var s=me.memoizedState;if(o=s.destroy,r!==null&&wc(r,s.deps)){i.memoizedState=zi(t,n,o,r);return}}se.flags|=e,i.memoizedState=zi(1|t,n,o,r)}function $u(e,t){return Bo(8390656,8,e,t)}function Pc(e,t){return Rs(2048,8,e,t)}function kh(e,t){return Rs(4,2,e,t)}function Nh(e,t){return Rs(4,4,e,t)}function Oh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ah(e,t,n){return n=n!=null?n.concat([e]):null,Rs(4,4,Oh.bind(null,t,e),n)}function _c(){}function Lh(e,t){var n=at();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Fh(e,t){var n=at();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Rh(e,t,n){return Ln&21?(pt(n,t)||(n=Bf(),se.lanes|=n,Fn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,je=!0),e.memoizedState=n)}function yy(e,t){var n=K;K=n!==0&&4>n?n:4,e(!0);var r=ya.transition;ya.transition={};try{e(!1),t()}finally{K=n,ya.transition=r}}function bh(){return at().memoizedState}function vy(e,t,n){var r=an(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dh(e))zh(t,n);else if(n=yh(e,t,n,r),n!==null){var i=Re();ht(n,e,r,i),Mh(n,t,r)}}function wy(e,t,n){var r=an(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dh(e))zh(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,pt(a,s)){var l=t.interleaved;l===null?(i.next=i,pc(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=yh(e,t,i,r),n!==null&&(i=Re(),ht(n,e,r,i),Mh(n,t,r))}}function Dh(e){var t=e.alternate;return e===se||t!==null&&t===se}function zh(e,t){pi=cs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Mh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ec(e,n)}}var us={readContext:st,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},xy={readContext:st,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:$u,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Bo(4194308,4,Oh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=vt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vy.bind(null,se,e),[r.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:Wu,useDebugValue:_c,useDeferredValue:function(e){return vt().memoizedState=e},useTransition:function(){var e=Wu(!1),t=e[0];return e=yy.bind(null,e[1]),vt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=se,i=vt();if(ie){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),xe===null)throw Error(A(349));Ln&30||Ph(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,$u(Ch.bind(null,r,o,e),[e]),r.flags|=2048,zi(9,_h.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vt(),t=xe.identifierPrefix;if(ie){var n=Nt,r=kt;n=(r&~(1<<32-ft(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=bi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sy={readContext:st,useCallback:Lh,useContext:st,useEffect:Pc,useImperativeHandle:Ah,useInsertionEffect:kh,useLayoutEffect:Nh,useMemo:Fh,useReducer:va,useRef:Th,useState:function(){return va(Di)},useDebugValue:_c,useDeferredValue:function(e){var t=at();return Rh(t,me.memoizedState,e)},useTransition:function(){var e=va(Di)[0],t=at().memoizedState;return[e,t]},useMutableSource:xh,useSyncExternalStore:Sh,useId:bh,unstable_isNewReconciler:!1},Py={readContext:st,useCallback:Lh,useContext:st,useEffect:Pc,useImperativeHandle:Ah,useInsertionEffect:kh,useLayoutEffect:Nh,useMemo:Fh,useReducer:wa,useRef:Th,useState:function(){return wa(Di)},useDebugValue:_c,useDeferredValue:function(e){var t=at();return me===null?t.memoizedState=e:Rh(t,me.memoizedState,e)},useTransition:function(){var e=wa(Di)[0],t=at().memoizedState;return[e,t]},useMutableSource:xh,useSyncExternalStore:Sh,useId:bh,unstable_isNewReconciler:!1};function ct(e,t){if(e&&e.defaultProps){t=le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bs={isMounted:function(e){return(e=e._reactInternals)?zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Re(),i=an(e),o=Ot(r,i);o.payload=t,n!=null&&(o.callback=n),t=on(e,o,i),t!==null&&(ht(t,e,i,r),zo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Re(),i=an(e),o=Ot(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=on(e,o,i),t!==null&&(ht(t,e,i,r),zo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Re(),r=an(e),i=Ot(n,r);i.tag=2,t!=null&&(i.callback=t),t=on(e,i,r),t!==null&&(ht(t,e,r,n),zo(t,e,r))}};function Vu(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Ni(n,r)||!Ni(i,o):!0}function Bh(e,t,n){var r=!1,i=un,o=t.contextType;return typeof o=="object"&&o!==null?o=st(o):(i=He(t)?On:Oe.current,r=t.contextTypes,o=(r=r!=null)?kr(e,i):un),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bs,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function qu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bs.enqueueReplaceState(t,t.state,null)}function wl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},mc(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=st(o):(o=He(t)?On:Oe.current,i.context=kr(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(vl(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&bs.enqueueReplaceState(i,i.state,null),as(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Lr(e,t){try{var n="",r=t;do n+=Zm(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function xa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function xl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var _y=typeof WeakMap=="function"?WeakMap:Map;function jh(e,t,n){n=Ot(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){fs||(fs=!0,Ol=r),xl(e,t)},n}function Gh(e,t,n){n=Ot(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){xl(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){xl(e,t),typeof r!="function"&&(sn===null?sn=new Set([this]):sn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Xu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new _y;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=zy.bind(null,e,t,n),t.then(e,e))}function Yu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zu(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ot(-1,1),t.tag=2,on(n,t,1))),n.lanes|=1),e)}var Cy=bt.ReactCurrentOwner,je=!1;function Le(e,t,n,r){t.child=e===null?gh(t,null,n,r):Or(t,e.child,n,r)}function Qu(e,t,n,r,i){n=n.render;var o=t.ref;return Cr(t,i),r=xc(e,t,n,r,o,i),n=Sc(),e!==null&&!je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rt(e,t,i)):(ie&&n&&lc(t),t.flags|=1,Le(e,t,r,i),t.child)}function Ku(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Ac(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Hh(e,t,o,r,i)):(e=Uo(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ni,n(s,r)&&e.ref===t.ref)return Rt(e,t,i)}return t.flags|=1,e=ln(o,r),e.ref=t.ref,e.return=t,t.child=e}function Hh(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Ni(o,r)&&e.ref===t.ref)if(je=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(je=!0);else return t.lanes=e.lanes,Rt(e,t,i)}return Sl(e,t,n,r,i)}function Uh(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(tr,Ve),Ve|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,J(tr,Ve),Ve|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,J(tr,Ve),Ve|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,J(tr,Ve),Ve|=r;return Le(e,t,i,n),t.child}function Wh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sl(e,t,n,r,i){var o=He(n)?On:Oe.current;return o=kr(t,o),Cr(t,i),n=xc(e,t,n,r,o,i),r=Sc(),e!==null&&!je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rt(e,t,i)):(ie&&r&&lc(t),t.flags|=1,Le(e,t,n,i),t.child)}function Ju(e,t,n,r,i){if(He(n)){var o=!0;ns(t)}else o=!1;if(Cr(t,i),t.stateNode===null)jo(e,t),Bh(t,n,r),wl(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=st(c):(c=He(n)?On:Oe.current,c=kr(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&qu(t,s,r,c),qt=!1;var f=t.memoizedState;s.state=f,as(t,r,s,i),l=t.memoizedState,a!==r||f!==l||Ge.current||qt?(typeof u=="function"&&(vl(t,n,u,r),l=t.memoizedState),(a=qt||Vu(t,n,a,r,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,vh(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ct(t.type,a),s.props=c,d=t.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=st(l):(l=He(n)?On:Oe.current,l=kr(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&qu(t,s,r,l),qt=!1,f=t.memoizedState,s.state=f,as(t,r,s,i);var w=t.memoizedState;a!==d||f!==w||Ge.current||qt?(typeof p=="function"&&(vl(t,n,p,r),w=t.memoizedState),(c=qt||Vu(t,n,c,r,f,w,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,w,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,w,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),s.props=r,s.state=w,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Pl(e,t,n,r,o,i)}function Pl(e,t,n,r,i,o){Wh(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&Mu(t,n,!1),Rt(e,t,o);r=t.stateNode,Cy.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Or(t,e.child,null,o),t.child=Or(t,null,a,o)):Le(e,t,a,o),t.memoizedState=r.state,i&&Mu(t,n,!0),t.child}function $h(e){var t=e.stateNode;t.pendingContext?zu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zu(e,t.context,!1),gc(e,t.containerInfo)}function ed(e,t,n,r,i){return Nr(),uc(i),t.flags|=256,Le(e,t,n,r),t.child}var _l={dehydrated:null,treeContext:null,retryLane:0};function Cl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vh(e,t,n){var r=t.pendingProps,i=oe.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),J(oe,i&1),e===null)return gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ms(s,r,0,null),e=Tn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Cl(n),t.memoizedState=_l,e):Cc(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ey(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ln(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ln(a,o):(o=Tn(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?Cl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=_l,r}return o=e.child,e=o.sibling,r=ln(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Cc(e,t){return t=Ms({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mo(e,t,n,r){return r!==null&&uc(r),Or(t,e.child,null,n),e=Cc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ey(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=xa(Error(A(422))),mo(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ms({mode:"visible",children:r.children},i,0,null),o=Tn(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Or(t,e.child,null,s),t.child.memoizedState=Cl(s),t.memoizedState=_l,o);if(!(t.mode&1))return mo(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(A(419)),r=xa(o,r,void 0),mo(e,t,s,r)}if(a=(s&e.childLanes)!==0,je||a){if(r=xe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ft(e,i),ht(r,e,i,-1))}return Oc(),r=xa(Error(A(421))),mo(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=My.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ye=rn(i.nextSibling),Ze=t,ie=!0,dt=null,e!==null&&(nt[rt++]=kt,nt[rt++]=Nt,nt[rt++]=An,kt=e.id,Nt=e.overflow,An=t),t=Cc(t,r.children),t.flags|=4096,t)}function td(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yl(e.return,t,n)}function Sa(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qh(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Le(e,t,r.children,n),r=oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&td(e,n,t);else if(e.tag===19)td(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(J(oe,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ls(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Sa(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ls(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Sa(t,!0,n,null,o);break;case"together":Sa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Iy(e,t,n){switch(t.tag){case 3:$h(t),Nr();break;case 5:wh(t);break;case 1:He(t.type)&&ns(t);break;case 4:gc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;J(os,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(J(oe,oe.current&1),t.flags|=128,null):n&t.child.childLanes?Vh(e,t,n):(J(oe,oe.current&1),e=Rt(e,t,n),e!==null?e.sibling:null);J(oe,oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return qh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(oe,oe.current),r)break;return null;case 22:case 23:return t.lanes=0,Uh(e,t,n)}return Rt(e,t,n)}var Xh,El,Yh,Zh;Xh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};El=function(){};Yh=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,wn(Pt.current);var o=null;switch(n){case"input":i=qa(e,i),r=qa(e,r),o=[];break;case"select":i=le({},i,{value:void 0}),r=le({},r,{value:void 0}),o=[];break;case"textarea":i=Za(e,i),r=Za(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=es)}Ka(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Pi.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Pi.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ee("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};Zh=function(e,t,n,r){n!==r&&(t.flags|=4)};function $r(e,t){if(!ie)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Te(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ty(e,t,n){var r=t.pendingProps;switch(cc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(t),null;case 1:return He(t.type)&&ts(),Te(t),null;case 3:return r=t.stateNode,Ar(),ne(Ge),ne(Oe),vc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ho(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,dt!==null&&(Fl(dt),dt=null))),El(e,t),Te(t),null;case 5:yc(t);var i=wn(Ri.current);if(n=t.type,e!==null&&t.stateNode!=null)Yh(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return Te(t),null}if(e=wn(Pt.current),ho(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[wt]=t,r[Li]=o,e=(t.mode&1)!==0,n){case"dialog":ee("cancel",r),ee("close",r);break;case"iframe":case"object":case"embed":ee("load",r);break;case"video":case"audio":for(i=0;i<li.length;i++)ee(li[i],r);break;case"source":ee("error",r);break;case"img":case"image":case"link":ee("error",r),ee("load",r);break;case"details":ee("toggle",r);break;case"input":uu(r,o),ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ee("invalid",r);break;case"textarea":fu(r,o),ee("invalid",r)}Ka(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&fo(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&fo(r.textContent,a,e),i=["children",""+a]):Pi.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ee("scroll",r)}switch(n){case"input":ro(r),du(r,o,!0);break;case"textarea":ro(r),hu(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=es)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[wt]=t,e[Li]=r,Xh(e,t,!1,!1),t.stateNode=e;e:{switch(s=Ja(n,r),n){case"dialog":ee("cancel",e),ee("close",e),i=r;break;case"iframe":case"object":case"embed":ee("load",e),i=r;break;case"video":case"audio":for(i=0;i<li.length;i++)ee(li[i],e);i=r;break;case"source":ee("error",e),i=r;break;case"img":case"image":case"link":ee("error",e),ee("load",e),i=r;break;case"details":ee("toggle",e),i=r;break;case"input":uu(e,r),i=qa(e,r),ee("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=le({},r,{value:void 0}),ee("invalid",e);break;case"textarea":fu(e,r),i=Za(e,r),ee("invalid",e);break;default:i=r}Ka(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Tf(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ef(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_i(e,l):typeof l=="number"&&_i(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Pi.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ee("scroll",e):l!=null&&Xl(e,o,l,s))}switch(n){case"input":ro(e),du(e,r,!1);break;case"textarea":ro(e),hu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?xr(e,!!r.multiple,o,!1):r.defaultValue!=null&&xr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=es)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Te(t),null;case 6:if(e&&t.stateNode!=null)Zh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=wn(Ri.current),wn(Pt.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[wt]=t,(o=r.nodeValue!==n)&&(e=Ze,e!==null))switch(e.tag){case 3:fo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fo(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wt]=t,t.stateNode=r}return Te(t),null;case 13:if(ne(oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ie&&Ye!==null&&t.mode&1&&!(t.flags&128))ph(),Nr(),t.flags|=98560,o=!1;else if(o=ho(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(A(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(A(317));o[wt]=t}else Nr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Te(t),o=!1}else dt!==null&&(Fl(dt),dt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||oe.current&1?ge===0&&(ge=3):Oc())),t.updateQueue!==null&&(t.flags|=4),Te(t),null);case 4:return Ar(),El(e,t),e===null&&Oi(t.stateNode.containerInfo),Te(t),null;case 10:return hc(t.type._context),Te(t),null;case 17:return He(t.type)&&ts(),Te(t),null;case 19:if(ne(oe),o=t.memoizedState,o===null)return Te(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)$r(o,!1);else{if(ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=ls(e),s!==null){for(t.flags|=128,$r(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return J(oe,oe.current&1|2),t.child}e=e.sibling}o.tail!==null&&de()>Fr&&(t.flags|=128,r=!0,$r(o,!1),t.lanes=4194304)}else{if(!r)if(e=ls(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),$r(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ie)return Te(t),null}else 2*de()-o.renderingStartTime>Fr&&n!==1073741824&&(t.flags|=128,r=!0,$r(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=de(),t.sibling=null,n=oe.current,J(oe,r?n&1|2:n&1),t):(Te(t),null);case 22:case 23:return Nc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ve&1073741824&&(Te(t),t.subtreeFlags&6&&(t.flags|=8192)):Te(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function ky(e,t){switch(cc(t),t.tag){case 1:return He(t.type)&&ts(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ar(),ne(Ge),ne(Oe),vc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yc(t),null;case 13:if(ne(oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Nr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ne(oe),null;case 4:return Ar(),null;case 10:return hc(t.type._context),null;case 22:case 23:return Nc(),null;case 24:return null;default:return null}}var go=!1,Ne=!1,Ny=typeof WeakSet=="function"?WeakSet:Set,b=null;function er(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ce(e,t,r)}else n.current=null}function Il(e,t,n){try{n()}catch(r){ce(e,t,r)}}var nd=!1;function Oy(e,t){if(cl=Qo,e=th(),ac(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(a=s),f===o&&++u===r&&(l=s),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ul={focusedElem:e,selectionRange:n},Qo=!1,b=t;b!==null;)if(t=b,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,b=e;else for(;b!==null;){t=b;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var S=w.memoizedProps,P=w.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?S:ct(t.type,S),P);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(x){ce(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,b=e;break}b=t.return}return w=nd,nd=!1,w}function mi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Il(t,n,o)}i=i.next}while(i!==r)}}function Ds(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Tl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Qh(e){var t=e.alternate;t!==null&&(e.alternate=null,Qh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wt],delete t[Li],delete t[hl],delete t[fy],delete t[hy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Kh(e){return e.tag===5||e.tag===3||e.tag===4}function rd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=es));else if(r!==4&&(e=e.child,e!==null))for(kl(e,t,n),e=e.sibling;e!==null;)kl(e,t,n),e=e.sibling}function Nl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Nl(e,t,n),e=e.sibling;e!==null;)Nl(e,t,n),e=e.sibling}var Pe=null,ut=!1;function Gt(e,t,n){for(n=n.child;n!==null;)Jh(e,t,n),n=n.sibling}function Jh(e,t,n){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(ks,n)}catch{}switch(n.tag){case 5:Ne||er(n,t);case 6:var r=Pe,i=ut;Pe=null,Gt(e,t,n),Pe=r,ut=i,Pe!==null&&(ut?(e=Pe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(ut?(e=Pe,n=n.stateNode,e.nodeType===8?pa(e.parentNode,n):e.nodeType===1&&pa(e,n),Ti(e)):pa(Pe,n.stateNode));break;case 4:r=Pe,i=ut,Pe=n.stateNode.containerInfo,ut=!0,Gt(e,t,n),Pe=r,ut=i;break;case 0:case 11:case 14:case 15:if(!Ne&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Il(n,t,s),i=i.next}while(i!==r)}Gt(e,t,n);break;case 1:if(!Ne&&(er(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ce(n,t,a)}Gt(e,t,n);break;case 21:Gt(e,t,n);break;case 22:n.mode&1?(Ne=(r=Ne)||n.memoizedState!==null,Gt(e,t,n),Ne=r):Gt(e,t,n);break;default:Gt(e,t,n)}}function id(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ny),t.forEach(function(r){var i=By.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function lt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Pe=a.stateNode,ut=!1;break e;case 3:Pe=a.stateNode.containerInfo,ut=!0;break e;case 4:Pe=a.stateNode.containerInfo,ut=!0;break e}a=a.return}if(Pe===null)throw Error(A(160));Jh(o,s,i),Pe=null,ut=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ce(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ep(t,e),t=t.sibling}function ep(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(lt(t,e),mt(e),r&4){try{mi(3,e,e.return),Ds(3,e)}catch(S){ce(e,e.return,S)}try{mi(5,e,e.return)}catch(S){ce(e,e.return,S)}}break;case 1:lt(t,e),mt(e),r&512&&n!==null&&er(n,n.return);break;case 5:if(lt(t,e),mt(e),r&512&&n!==null&&er(n,n.return),e.flags&32){var i=e.stateNode;try{_i(i,"")}catch(S){ce(e,e.return,S)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Pf(i,o),Ja(a,s);var c=Ja(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?Tf(i,d):u==="dangerouslySetInnerHTML"?Ef(i,d):u==="children"?_i(i,d):Xl(i,u,d,c)}switch(a){case"input":Xa(i,o);break;case"textarea":_f(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?xr(i,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?xr(i,!!o.multiple,o.defaultValue,!0):xr(i,!!o.multiple,o.multiple?[]:"",!1))}i[Li]=o}catch(S){ce(e,e.return,S)}}break;case 6:if(lt(t,e),mt(e),r&4){if(e.stateNode===null)throw Error(A(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(S){ce(e,e.return,S)}}break;case 3:if(lt(t,e),mt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ti(t.containerInfo)}catch(S){ce(e,e.return,S)}break;case 4:lt(t,e),mt(e);break;case 13:lt(t,e),mt(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Tc=de())),r&4&&id(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Ne=(c=Ne)||u,lt(t,e),Ne=c):lt(t,e),mt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(b=e,u=e.child;u!==null;){for(d=b=u;b!==null;){switch(f=b,p=f.child,f.tag){case 0:case 11:case 14:case 15:mi(4,f,f.return);break;case 1:er(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(S){ce(r,n,S)}}break;case 5:er(f,f.return);break;case 22:if(f.memoizedState!==null){sd(d);continue}}p!==null?(p.return=f,b=p):sd(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=If("display",s))}catch(S){ce(e,e.return,S)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(S){ce(e,e.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:lt(t,e),mt(e),r&4&&id(e);break;case 21:break;default:lt(t,e),mt(e)}}function mt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Kh(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_i(i,""),r.flags&=-33);var o=rd(e);Nl(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=rd(e);kl(e,a,s);break;default:throw Error(A(161))}}catch(l){ce(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ay(e,t,n){b=e,tp(e)}function tp(e,t,n){for(var r=(e.mode&1)!==0;b!==null;){var i=b,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||go;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ne;a=go;var c=Ne;if(go=s,(Ne=l)&&!c)for(b=i;b!==null;)s=b,l=s.child,s.tag===22&&s.memoizedState!==null?ad(i):l!==null?(l.return=s,b=l):ad(i);for(;o!==null;)b=o,tp(o),o=o.sibling;b=i,go=a,Ne=c}od(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,b=o):od(e)}}function od(e){for(;b!==null;){var t=b;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ne||Ds(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ne)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ct(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Uu(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Uu(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ti(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Ne||t.flags&512&&Tl(t)}catch(f){ce(t,t.return,f)}}if(t===e){b=null;break}if(n=t.sibling,n!==null){n.return=t.return,b=n;break}b=t.return}}function sd(e){for(;b!==null;){var t=b;if(t===e){b=null;break}var n=t.sibling;if(n!==null){n.return=t.return,b=n;break}b=t.return}}function ad(e){for(;b!==null;){var t=b;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ds(4,t)}catch(l){ce(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){ce(t,i,l)}}var o=t.return;try{Tl(t)}catch(l){ce(t,o,l)}break;case 5:var s=t.return;try{Tl(t)}catch(l){ce(t,s,l)}}}catch(l){ce(t,t.return,l)}if(t===e){b=null;break}var a=t.sibling;if(a!==null){a.return=t.return,b=a;break}b=t.return}}var Ly=Math.ceil,ds=bt.ReactCurrentDispatcher,Ec=bt.ReactCurrentOwner,ot=bt.ReactCurrentBatchConfig,X=0,xe=null,fe=null,_e=0,Ve=0,tr=fn(0),ge=0,Mi=null,Fn=0,zs=0,Ic=0,gi=null,Be=null,Tc=0,Fr=1/0,It=null,fs=!1,Ol=null,sn=null,yo=!1,Jt=null,hs=0,yi=0,Al=null,Go=-1,Ho=0;function Re(){return X&6?de():Go!==-1?Go:Go=de()}function an(e){return e.mode&1?X&2&&_e!==0?_e&-_e:my.transition!==null?(Ho===0&&(Ho=Bf()),Ho):(e=K,e!==0||(e=window.event,e=e===void 0?16:Vf(e.type)),e):1}function ht(e,t,n,r){if(50<yi)throw yi=0,Al=null,Error(A(185));Ui(e,n,r),(!(X&2)||e!==xe)&&(e===xe&&(!(X&2)&&(zs|=n),ge===4&&Zt(e,_e)),Ue(e,r),n===1&&X===0&&!(t.mode&1)&&(Fr=de()+500,Fs&&hn()))}function Ue(e,t){var n=e.callbackNode;mg(e,t);var r=Zo(e,e===xe?_e:0);if(r===0)n!==null&&gu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&gu(n),t===1)e.tag===0?py(ld.bind(null,e)):dh(ld.bind(null,e)),uy(function(){!(X&6)&&hn()}),n=null;else{switch(jf(r)){case 1:n=Jl;break;case 4:n=zf;break;case 16:n=Yo;break;case 536870912:n=Mf;break;default:n=Yo}n=cp(n,np.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function np(e,t){if(Go=-1,Ho=0,X&6)throw Error(A(327));var n=e.callbackNode;if(Er()&&e.callbackNode!==n)return null;var r=Zo(e,e===xe?_e:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ps(e,r);else{t=r;var i=X;X|=2;var o=ip();(xe!==e||_e!==t)&&(It=null,Fr=de()+500,In(e,t));do try{by();break}catch(a){rp(e,a)}while(!0);fc(),ds.current=o,X=i,fe!==null?t=0:(xe=null,_e=0,t=ge)}if(t!==0){if(t===2&&(i=il(e),i!==0&&(r=i,t=Ll(e,i))),t===1)throw n=Mi,In(e,0),Zt(e,r),Ue(e,de()),n;if(t===6)Zt(e,r);else{if(i=e.current.alternate,!(r&30)&&!Fy(i)&&(t=ps(e,r),t===2&&(o=il(e),o!==0&&(r=o,t=Ll(e,o))),t===1))throw n=Mi,In(e,0),Zt(e,r),Ue(e,de()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:gn(e,Be,It);break;case 3:if(Zt(e,r),(r&130023424)===r&&(t=Tc+500-de(),10<t)){if(Zo(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Re(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=fl(gn.bind(null,e,Be,It),t);break}gn(e,Be,It);break;case 4:if(Zt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ft(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=de()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ly(r/1960))-r,10<r){e.timeoutHandle=fl(gn.bind(null,e,Be,It),r);break}gn(e,Be,It);break;case 5:gn(e,Be,It);break;default:throw Error(A(329))}}}return Ue(e,de()),e.callbackNode===n?np.bind(null,e):null}function Ll(e,t){var n=gi;return e.current.memoizedState.isDehydrated&&(In(e,t).flags|=256),e=ps(e,t),e!==2&&(t=Be,Be=n,t!==null&&Fl(t)),e}function Fl(e){Be===null?Be=e:Be.push.apply(Be,e)}function Fy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!pt(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zt(e,t){for(t&=~Ic,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ft(t),r=1<<n;e[n]=-1,t&=~r}}function ld(e){if(X&6)throw Error(A(327));Er();var t=Zo(e,0);if(!(t&1))return Ue(e,de()),null;var n=ps(e,t);if(e.tag!==0&&n===2){var r=il(e);r!==0&&(t=r,n=Ll(e,r))}if(n===1)throw n=Mi,In(e,0),Zt(e,t),Ue(e,de()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gn(e,Be,It),Ue(e,de()),null}function kc(e,t){var n=X;X|=1;try{return e(t)}finally{X=n,X===0&&(Fr=de()+500,Fs&&hn())}}function Rn(e){Jt!==null&&Jt.tag===0&&!(X&6)&&Er();var t=X;X|=1;var n=ot.transition,r=K;try{if(ot.transition=null,K=1,e)return e()}finally{K=r,ot.transition=n,X=t,!(X&6)&&hn()}}function Nc(){Ve=tr.current,ne(tr)}function In(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cy(n)),fe!==null)for(n=fe.return;n!==null;){var r=n;switch(cc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ts();break;case 3:Ar(),ne(Ge),ne(Oe),vc();break;case 5:yc(r);break;case 4:Ar();break;case 13:ne(oe);break;case 19:ne(oe);break;case 10:hc(r.type._context);break;case 22:case 23:Nc()}n=n.return}if(xe=e,fe=e=ln(e.current,null),_e=Ve=t,ge=0,Mi=null,Ic=zs=Fn=0,Be=gi=null,vn!==null){for(t=0;t<vn.length;t++)if(n=vn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}vn=null}return e}function rp(e,t){do{var n=fe;try{if(fc(),Mo.current=us,cs){for(var r=se.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cs=!1}if(Ln=0,ve=me=se=null,pi=!1,bi=0,Ec.current=null,n===null||n.return===null){ge=1,Mi=t,fe=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=_e,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Yu(s);if(p!==null){p.flags&=-257,Zu(p,s,a,o,t),p.mode&1&&Xu(o,c,t),t=p,l=c;var w=t.updateQueue;if(w===null){var S=new Set;S.add(l),t.updateQueue=S}else w.add(l);break e}else{if(!(t&1)){Xu(o,c,t),Oc();break e}l=Error(A(426))}}else if(ie&&a.mode&1){var P=Yu(s);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Zu(P,s,a,o,t),uc(Lr(l,a));break e}}o=l=Lr(l,a),ge!==4&&(ge=2),gi===null?gi=[o]:gi.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=jh(o,l,t);Hu(o,g);break e;case 1:a=l;var m=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(sn===null||!sn.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=Gh(o,a,t);Hu(o,x);break e}}o=o.return}while(o!==null)}sp(n)}catch(_){t=_,fe===n&&n!==null&&(fe=n=n.return);continue}break}while(!0)}function ip(){var e=ds.current;return ds.current=us,e===null?us:e}function Oc(){(ge===0||ge===3||ge===2)&&(ge=4),xe===null||!(Fn&268435455)&&!(zs&268435455)||Zt(xe,_e)}function ps(e,t){var n=X;X|=2;var r=ip();(xe!==e||_e!==t)&&(It=null,In(e,t));do try{Ry();break}catch(i){rp(e,i)}while(!0);if(fc(),X=n,ds.current=r,fe!==null)throw Error(A(261));return xe=null,_e=0,ge}function Ry(){for(;fe!==null;)op(fe)}function by(){for(;fe!==null&&!sg();)op(fe)}function op(e){var t=lp(e.alternate,e,Ve);e.memoizedProps=e.pendingProps,t===null?sp(e):fe=t,Ec.current=null}function sp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ky(n,t),n!==null){n.flags&=32767,fe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ge=6,fe=null;return}}else if(n=Ty(n,t,Ve),n!==null){fe=n;return}if(t=t.sibling,t!==null){fe=t;return}fe=t=e}while(t!==null);ge===0&&(ge=5)}function gn(e,t,n){var r=K,i=ot.transition;try{ot.transition=null,K=1,Dy(e,t,n,r)}finally{ot.transition=i,K=r}return null}function Dy(e,t,n,r){do Er();while(Jt!==null);if(X&6)throw Error(A(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(gg(e,o),e===xe&&(fe=xe=null,_e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yo||(yo=!0,cp(Yo,function(){return Er(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ot.transition,ot.transition=null;var s=K;K=1;var a=X;X|=4,Ec.current=null,Oy(e,n),ep(n,e),ny(ul),Qo=!!cl,ul=cl=null,e.current=n,Ay(n),ag(),X=a,K=s,ot.transition=o}else e.current=n;if(yo&&(yo=!1,Jt=e,hs=i),o=e.pendingLanes,o===0&&(sn=null),ug(n.stateNode),Ue(e,de()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fs)throw fs=!1,e=Ol,Ol=null,e;return hs&1&&e.tag!==0&&Er(),o=e.pendingLanes,o&1?e===Al?yi++:(yi=0,Al=e):yi=0,hn(),null}function Er(){if(Jt!==null){var e=jf(hs),t=ot.transition,n=K;try{if(ot.transition=null,K=16>e?16:e,Jt===null)var r=!1;else{if(e=Jt,Jt=null,hs=0,X&6)throw Error(A(331));var i=X;for(X|=4,b=e.current;b!==null;){var o=b,s=o.child;if(b.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(b=c;b!==null;){var u=b;switch(u.tag){case 0:case 11:case 15:mi(8,u,o)}var d=u.child;if(d!==null)d.return=u,b=d;else for(;b!==null;){u=b;var f=u.sibling,p=u.return;if(Qh(u),u===c){b=null;break}if(f!==null){f.return=p,b=f;break}b=p}}}var w=o.alternate;if(w!==null){var S=w.child;if(S!==null){w.child=null;do{var P=S.sibling;S.sibling=null,S=P}while(S!==null)}}b=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,b=s;else e:for(;b!==null;){if(o=b,o.flags&2048)switch(o.tag){case 0:case 11:case 15:mi(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,b=g;break e}b=o.return}}var m=e.current;for(b=m;b!==null;){s=b;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,b=v;else e:for(s=m;b!==null;){if(a=b,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ds(9,a)}}catch(_){ce(a,a.return,_)}if(a===s){b=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,b=x;break e}b=a.return}}if(X=i,hn(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(ks,e)}catch{}r=!0}return r}finally{K=n,ot.transition=t}}return!1}function cd(e,t,n){t=Lr(n,t),t=jh(e,t,1),e=on(e,t,1),t=Re(),e!==null&&(Ui(e,1,t),Ue(e,t))}function ce(e,t,n){if(e.tag===3)cd(e,e,n);else for(;t!==null;){if(t.tag===3){cd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sn===null||!sn.has(r))){e=Lr(n,e),e=Gh(t,e,1),t=on(t,e,1),e=Re(),t!==null&&(Ui(t,1,e),Ue(t,e));break}}t=t.return}}function zy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Re(),e.pingedLanes|=e.suspendedLanes&n,xe===e&&(_e&n)===n&&(ge===4||ge===3&&(_e&130023424)===_e&&500>de()-Tc?In(e,0):Ic|=n),Ue(e,t)}function ap(e,t){t===0&&(e.mode&1?(t=so,so<<=1,!(so&130023424)&&(so=4194304)):t=1);var n=Re();e=Ft(e,t),e!==null&&(Ui(e,t,n),Ue(e,n))}function My(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ap(e,n)}function By(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),ap(e,n)}var lp;lp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ge.current)je=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return je=!1,Iy(e,t,n);je=!!(e.flags&131072)}else je=!1,ie&&t.flags&1048576&&fh(t,is,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;jo(e,t),e=t.pendingProps;var i=kr(t,Oe.current);Cr(t,n),i=xc(null,t,r,e,i,n);var o=Sc();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,He(r)?(o=!0,ns(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mc(t),i.updater=bs,t.stateNode=i,i._reactInternals=t,wl(t,r,e,n),t=Pl(null,t,r,!0,o,n)):(t.tag=0,ie&&o&&lc(t),Le(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(jo(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Gy(r),e=ct(r,e),i){case 0:t=Sl(null,t,r,e,n);break e;case 1:t=Ju(null,t,r,e,n);break e;case 11:t=Qu(null,t,r,e,n);break e;case 14:t=Ku(null,t,r,ct(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ct(r,i),Sl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ct(r,i),Ju(e,t,r,i,n);case 3:e:{if($h(t),e===null)throw Error(A(387));r=t.pendingProps,o=t.memoizedState,i=o.element,vh(e,t),as(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Lr(Error(A(423)),t),t=ed(e,t,r,n,i);break e}else if(r!==i){i=Lr(Error(A(424)),t),t=ed(e,t,r,n,i);break e}else for(Ye=rn(t.stateNode.containerInfo.firstChild),Ze=t,ie=!0,dt=null,n=gh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nr(),r===i){t=Rt(e,t,n);break e}Le(e,t,r,n)}t=t.child}return t;case 5:return wh(t),e===null&&gl(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,dl(r,i)?s=null:o!==null&&dl(r,o)&&(t.flags|=32),Wh(e,t),Le(e,t,s,n),t.child;case 6:return e===null&&gl(t),null;case 13:return Vh(e,t,n);case 4:return gc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Or(t,null,r,n):Le(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ct(r,i),Qu(e,t,r,i,n);case 7:return Le(e,t,t.pendingProps,n),t.child;case 8:return Le(e,t,t.pendingProps.children,n),t.child;case 12:return Le(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,J(os,r._currentValue),r._currentValue=s,o!==null)if(pt(o.value,s)){if(o.children===i.children&&!Ge.current){t=Rt(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Ot(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),yl(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(A(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),yl(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Le(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Cr(t,n),i=st(i),r=r(i),t.flags|=1,Le(e,t,r,n),t.child;case 14:return r=t.type,i=ct(r,t.pendingProps),i=ct(r.type,i),Ku(e,t,r,i,n);case 15:return Hh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ct(r,i),jo(e,t),t.tag=1,He(r)?(e=!0,ns(t)):e=!1,Cr(t,n),Bh(t,r,i),wl(t,r,i,n),Pl(null,t,r,!0,e,n);case 19:return qh(e,t,n);case 22:return Uh(e,t,n)}throw Error(A(156,t.tag))};function cp(e,t){return Df(e,t)}function jy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(e,t,n,r){return new jy(e,t,n,r)}function Ac(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gy(e){if(typeof e=="function")return Ac(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zl)return 11;if(e===Ql)return 14}return 2}function ln(e,t){var n=e.alternate;return n===null?(n=it(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uo(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")Ac(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case $n:return Tn(n.children,i,o,t);case Yl:s=8,i|=8;break;case Ua:return e=it(12,n,t,i|2),e.elementType=Ua,e.lanes=o,e;case Wa:return e=it(13,n,t,i),e.elementType=Wa,e.lanes=o,e;case $a:return e=it(19,n,t,i),e.elementType=$a,e.lanes=o,e;case wf:return Ms(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yf:s=10;break e;case vf:s=9;break e;case Zl:s=11;break e;case Ql:s=14;break e;case Vt:s=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=it(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Tn(e,t,n,r){return e=it(7,e,r,t),e.lanes=n,e}function Ms(e,t,n,r){return e=it(22,e,r,t),e.elementType=wf,e.lanes=n,e.stateNode={isHidden:!1},e}function Pa(e,t,n){return e=it(6,e,null,t),e.lanes=n,e}function _a(e,t,n){return t=it(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hy(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ra(0),this.expirationTimes=ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ra(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lc(e,t,n,r,i,o,s,a,l){return e=new Hy(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=it(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(o),e}function Uy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function up(e){if(!e)return un;e=e._reactInternals;e:{if(zn(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(He(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(He(n))return uh(e,n,t)}return t}function dp(e,t,n,r,i,o,s,a,l){return e=Lc(n,r,!0,e,i,o,s,a,l),e.context=up(null),n=e.current,r=Re(),i=an(n),o=Ot(r,i),o.callback=t??null,on(n,o,i),e.current.lanes=i,Ui(e,i,r),Ue(e,r),e}function Bs(e,t,n,r){var i=t.current,o=Re(),s=an(i);return n=up(n),t.context===null?t.context=n:t.pendingContext=n,t=Ot(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=on(i,t,s),e!==null&&(ht(e,i,s,o),zo(e,i,s)),s}function ms(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ud(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fc(e,t){ud(e,t),(e=e.alternate)&&ud(e,t)}function Wy(){return null}var fp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Rc(e){this._internalRoot=e}js.prototype.render=Rc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Bs(e,t,null,null)};js.prototype.unmount=Rc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rn(function(){Bs(null,e,null,null)}),t[Lt]=null}};function js(e){this._internalRoot=e}js.prototype.unstable_scheduleHydration=function(e){if(e){var t=Uf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yt.length&&t!==0&&t<Yt[n].priority;n++);Yt.splice(n,0,e),n===0&&$f(e)}};function bc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dd(){}function $y(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=ms(s);o.call(c)}}var s=dp(t,r,e,0,null,!1,!1,"",dd);return e._reactRootContainer=s,e[Lt]=s.current,Oi(e.nodeType===8?e.parentNode:e),Rn(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ms(l);a.call(c)}}var l=Lc(e,0,!1,null,null,!1,!1,"",dd);return e._reactRootContainer=l,e[Lt]=l.current,Oi(e.nodeType===8?e.parentNode:e),Rn(function(){Bs(t,l,n,r)}),l}function Hs(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=ms(s);a.call(l)}}Bs(t,s,e,i)}else s=$y(n,t,e,i,r);return ms(s)}Gf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ai(t.pendingLanes);n!==0&&(ec(t,n|1),Ue(t,de()),!(X&6)&&(Fr=de()+500,hn()))}break;case 13:Rn(function(){var r=Ft(e,1);if(r!==null){var i=Re();ht(r,e,1,i)}}),Fc(e,1)}};tc=function(e){if(e.tag===13){var t=Ft(e,134217728);if(t!==null){var n=Re();ht(t,e,134217728,n)}Fc(e,134217728)}};Hf=function(e){if(e.tag===13){var t=an(e),n=Ft(e,t);if(n!==null){var r=Re();ht(n,e,t,r)}Fc(e,t)}};Uf=function(){return K};Wf=function(e,t){var n=K;try{return K=e,t()}finally{K=n}};tl=function(e,t,n){switch(t){case"input":if(Xa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ls(r);if(!i)throw Error(A(90));Sf(r),Xa(r,i)}}}break;case"textarea":_f(e,n);break;case"select":t=n.value,t!=null&&xr(e,!!n.multiple,t,!1)}};Of=kc;Af=Rn;var Vy={usingClientEntryPoint:!1,Events:[$i,Yn,Ls,kf,Nf,kc]},Vr={findFiberByHostInstance:yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qy={bundleType:Vr.bundleType,version:Vr.version,rendererPackageName:Vr.rendererPackageName,rendererConfig:Vr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Rf(e),e===null?null:e.stateNode},findFiberByHostInstance:Vr.findFiberByHostInstance||Wy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vo.isDisabled&&vo.supportsFiber)try{ks=vo.inject(qy),St=vo}catch{}}Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vy;Je.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bc(t))throw Error(A(200));return Uy(e,t,null,n)};Je.createRoot=function(e,t){if(!bc(e))throw Error(A(299));var n=!1,r="",i=fp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Lc(e,1,!1,null,null,n,!1,r,i),e[Lt]=t.current,Oi(e.nodeType===8?e.parentNode:e),new Rc(t)};Je.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=Rf(t),e=e===null?null:e.stateNode,e};Je.flushSync=function(e){return Rn(e)};Je.hydrate=function(e,t,n){if(!Gs(t))throw Error(A(200));return Hs(null,e,t,!0,n)};Je.hydrateRoot=function(e,t,n){if(!bc(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=fp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=dp(t,null,e,1,n??null,i,!1,o,s),e[Lt]=t.current,Oi(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new js(t)};Je.render=function(e,t,n){if(!Gs(t))throw Error(A(200));return Hs(null,e,t,!1,n)};Je.unmountComponentAtNode=function(e){if(!Gs(e))throw Error(A(40));return e._reactRootContainer?(Rn(function(){Hs(null,null,e,!1,function(){e._reactRootContainer=null,e[Lt]=null})}),!0):!1};Je.unstable_batchedUpdates=kc;Je.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gs(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return Hs(e,t,n,!1,r)};Je.version="18.3.1-next-f1338f8080-20240426";function hp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hp)}catch(e){console.error(e)}}hp(),hf.exports=Je;var gs=hf.exports,fd=gs;Ga.createRoot=fd.createRoot,Ga.hydrateRoot=fd.hydrateRoot;class Dc{constructor(t,n){this.dx=t,this.dy=n}toString(){return`MovementDelta {dx: ${this.dx}, dy: ${this.dy}}`}static getZeroMovementDelta(){return new Dc(0,0)}divide(t){return this.dx=this.dx/t,this.dy=this.dy/t,this}}class Us extends Dc{toString(){return`MovementDelta {dx: ${this.dx}, dy: ${this.dy}}`}static getZeroMovementDelta(){return new Us(0,0)}}class Ws{constructor(t,n){this.dx=t,this.dy=n}toString(){return`MouseWheelDelta {dx: ${this.dx}, dy: ${this.dy}}`}static getZeroWheelDelta(){return new Ws(0,0)}}var qe;let O=(qe=class{constructor(t=0,n=0,r){this.x=t,this.y=n,this.id=r;let i;typeof r=="string"?i=r:r?i=qe.createId(r):i=qe.createIdBasedOnInstanceIndex(),this.id=i}static createId(t){return`${this.name}-${t}`}static createIdBasedOnInstanceIndex(){return`${this.name}-${qe.instanceIndex++}`}static create({x:t,y:n}){return new this(t,n)}static clone(t){return this.create(t)}static getZeroPoint(){return new qe(0,0)}add(t){const n=this.x+t.x,r=this.y+t.y;return new qe(n,r)}subtract(t){const n=this.x-t.x,r=this.y-t.y;return new qe(n,r)}cloneAndLimitToIntegerByMathFloorFunction(){const t=Math.floor(this.x),n=Math.floor(this.y);return new qe(t,n)}toString(){return`${this.constructor.name} {x: ${this.x}, y: ${this.y}}`}},I(qe,"instanceIndex",0),qe);const pp=.1,zc=.5,Mc=2,wo=1,Bc=(e,t,n)=>e<t?t:e>n?n:e,Xy=e=>{const t=parseFloat((e+pp).toFixed(3));return Bc(t,zc,Mc)},Yy=e=>{const t=parseFloat((e-pp).toFixed(3));return Bc(t,zc,Mc)},ys=(e,t,n=O.getZeroPoint())=>{const r=e.x/t,i=e.y/t,o=-n.x+r,s=-n.y+i;return new O(o,s)},mp=(e,t,n=O.getZeroPoint())=>{const r=(e.x+n.x)*t,i=(e.y+n.y)*t;return new O(r,i)},vs=(e,t)=>e/t,te=(e,t)=>e*t,hd=(e=O.getZeroPoint(),t=O.getZeroPoint(),n=1,r=1)=>{if(r===n)return e;const i=r-n;if((i>0?1:i<0?-1:0)===0)return e;const s=ys(t,n,e),a=ys(t,r,e),l=s.subtract(a);return e.subtract(l)};function jc(){var n,r;const e=new Error("dummy");return((r=(n=e==null?void 0:e.stack)==null?void 0:n.split(`
`)[2])==null?void 0:r.replace(/^\s+at\s+(.+?)\s.+/g,"$1"))||"function"}const qi=(e,t)=>{if(!t)return new O((e==null?void 0:e.clientX)||0,(e==null?void 0:e.clientY)||0);if(t instanceof SVGSVGElement){const{x:r,y:i}=t.getBoundingClientRect();return new O((e==null?void 0:e.clientX)||0-r||0,(e==null?void 0:e.clientY)||0-i||0)}return new O((e==null?void 0:e.clientX)||0-(t==null?void 0:t.offsetLeft)||0,(e==null?void 0:e.clientY)||0-(t==null?void 0:t.offsetTop)||0)},Zy=O.getZeroPoint(),Qy=()=>({position:O.getZeroPoint(),scale:1}),Ky=()=>Qy(),gp=y.createContext(null),yp=y.createContext(()=>{});function Jy(e,t){switch(t.type){case"reset-scale":return{...e,scale:wo};case"reset-scale-and-reset-position":return{...e,position:Zy,scale:wo};case"reset-scale-and-set-position":return{...e,position:t.position,scale:wo};case"reset-scale-with-center-of-scale":{const n=t.centerOfScale,r=e.scale,i=e.position,o=wo,s=hd(i,n,r,o);return{...e,position:s,scale:o}}case"set-position":return{...e,position:t.position};case"set-scale":return{...e,scale:t.scale};case"set-scale-and-set-position":return{...e,scale:t.scale,position:t.position};case"add-mouse-movement-in-screen-coordinates-to-position":{const n=e.position,r=e.scale,{dx:i,dy:o}=t.mouseMovementDelta,s=i/r,a=o/r,l=n.x+s,c=n.y+a,u=new O(l,c);return{...e,position:u}}case"add-mouse-wheel-delta-in-screen-coordinates-to-scale":{const n=t.centerOfScale,r=t.mouseWheelDelta,i=e.scale,o=e.position,s=r.dy||0,a=s>0?-1:s<0?1:0;let l=i;if(a===0)return e;a>0?l=Xy(i):a<0&&(l=Yy(i));const c=hd(o,n,i,l);return{...e,position:c,scale:l}}default:throw Error(`Unknown action in ${jc()}: ${t==null?void 0:t.type}`)}}const ev=({children:e})=>{const[t,n]=y.useReducer(Jy,null,Ky);return h.jsx(gp.Provider,{value:t,children:h.jsx(yp.Provider,{value:n,children:e})})};function vp(){const e=y.useContext(gp);if(!e)throw new Error("useCameraState must be used within a CameraStateProvider");return e}function Gc(){const e=y.useContext(yp);if(e===void 0)throw new Error("useCameraStateDispatch must be used within a CameraStateProvider");return e}const tv=({isCameraMoving:e,mousePosition:t})=>{const n=Gc(),[r,i]=y.useState();y.useEffect(()=>{if(!e){i(void 0);return}const o=t;if(i(o),!o||!r)return;const s=o.x-r.x,a=o.y-r.y;if(s===0&&a===0)return;const l=new Us(s,a);n({type:"add-mouse-movement-in-screen-coordinates-to-position",mouseMovementDelta:l})},[n,e,r,t])},nv=({elementRef:e})=>{const t=Gc();y.useEffect(()=>{const n=e==null?void 0:e.current;if(!n)return;const r=o=>{const s=qi(o,n),a=rv(o);t({type:"add-mouse-wheel-delta-in-screen-coordinates-to-scale",centerOfScale:s,mouseWheelDelta:a})},i={passive:!0};return n.addEventListener("wheel",r,i),()=>{n.removeEventListener("wheel",r,i)}},[t,e])},rv=e=>{const t=(e==null?void 0:e.deltaX)||0,n=(e==null?void 0:e.deltaY)||0;return new Ws(t,n)},iv=!1,ov=!1,sv=(window==null?void 0:window.debugSettingsShouldDisplayPointerInformation)??ov,Rl="debugSettings",Hc=()=>({experimentalUseNativeSmoothingQualityMethod:!0,debugSettingsUseSolvedPuzzlePiecesPositionsMultipliedBy2AsInitialPiecesPositions:!1,drawEdgeBevelHighlightAndShadow:!0,showCanvasPerfomanceMonitor:!1,debugSettingsShouldPrintPuzzleRenderTime:!1,debugSettingsShouldPrintPuzzleRenderTimeForFirstRender:!1,debugSettingsShouldPrintPuzzleCreationTime:!1,showDebugTextureCacheCanvas:!1,showDebugInfoForTextureCacheCanvas:!1,showDebugInfoForTextureCanvas:!1,debugSettingsShouldDrawCenterOfWorld:!1,debugSettingsShouldDrawPuzzleBoundaryPoints:!1,debugSettingsShouldDrawPuzzlePiecesBoundaries:!1,debugSettingsShouldDrawCachedTexturesBoundaries:!1,debugSettingsShouldDrawCameraPosition:!1,debugSettingsShouldDrawMousePosition:!1,debugSettingsShouldDrawActivePiecePosition:!1,debugSettingsShouldDrawCameraViewportCenterPosition:!1,debugSettingsShouldDrawDebugInfoForMarksForDirectionToPositionOutsideCameraViewport:!1,useHitCounterForPieceShapePath:!1,exposeHitCounterForPieceShapePathToWindowObject:!1,useHitCounterForPieceMaskPath:!1,exposeHitCounterForPieceMaskPathToWindowObject:!1,debugSettingsShouldDisplayPointerInformation:sv||iv}),av=()=>{try{const e=Hc(),t=window==null?void 0:window.localStorage.getItem(Rl);if(typeof t!="string")return;const n=Object.keys(e),r=JSON.parse(t),i={};return n.forEach(o=>{typeof r[o]=="boolean"&&(i[o]=!!r[o])}),{...e,...i}}catch(e){console.error("failure of loading debug settings from localStorage",e)}},lv=()=>av()||Hc(),wp=y.createContext(null),xp=y.createContext(()=>{});function cv(e,t){switch(t.type){case"set-setting":return{...e,[t.name]:t.value};case"set-loaded-settings":return{...e,...t.loadedDebugSettings};case"reset-settings":return Hc();default:throw Error(`Unknown action in ${jc()}: ${t==null?void 0:t.type}`)}}const uv=({children:e})=>{const[t,n]=y.useReducer(cv,null,lv);return y.useEffect(()=>{try{const r=JSON.stringify(t),i=window==null?void 0:window.localStorage.getItem(Rl);if(r===i)return;window==null||window.localStorage.setItem(Rl,r)}catch(r){console.error("failure of update debug settings in localStorage",r)}},[t]),h.jsx(wp.Provider,{value:t,children:h.jsx(xp.Provider,{value:n,children:e})})};function Dt(){const e=y.useContext(wp);if(!e)throw new Error("useDebugSettingsState must be used within a DebugSettingsStateProvider");return e}function Sp(){const e=y.useContext(xp);if(e===void 0)throw new Error("useDebugSettingsStateDispatch must be used within a DebugSettingsStateProvider");return e}const Pp=[{imageSrc:"./demo-images/demo-image-1920x1080.png",numberOfPiecesPerWidth:7,numberOfPiecesPerHeight:4,boundaryPoints:{tl:new O(0,0),br:new O(1890,1080)}},{imageSrc:"./demo-images/demo-image-1080x1920.png",numberOfPiecesPerWidth:4,numberOfPiecesPerHeight:7,boundaryPoints:{tl:new O(0,0),br:new O(1080,1890)}}],xo=Pp[0],_p={white:"white","mint-cream":"mint cream",teal:"teal","dim-grey":"dim grey","slate-grey":"slate grey","dark-slate-gray":"dark slate gray",black:"black"},dv=Object.keys(_p),fv={white:"white","mint-cream":"mintcream",teal:"teal","dim-grey":"dimgrey","slate-grey":"slategrey","dark-slate-gray":"darkslategray",black:"black"},Cp=e=>fv[e],Ep={white:"black","mint-cream":"black",teal:"white","dim-grey":"white","slate-grey":"white","dark-slate-gray":"white",black:"white"},$s="dark-slate-gray",Ip=()=>crypto.randomUUID(),hv=()=>Ip(),Uc=(window==null?void 0:window.generateChallengeId)??hv,pv="M0 0h.245a.13.13 0 0 0 .261 0v-.002a.13.13 0 1 1 .262 0V0H1",mv="M0 0h.238l.115.128h.295L.762 0H1",gv="M0 0h.13l.064.07h.162L.42 0h.162l.063.07h.162L.87 0H1",yv="M0 0h.22q.02 0 .03.01l.111.122q.01.01.03.01h.22q.02 0 .03-.01L.75.012q.01-.01.029-.01H1",vv="m 0 0 l 0.212 0.179 l 0.18 -0.304 l 0.172 0 l 0.081 0.125 l 0.087 -0.13 l 0.091 0.13 l 0.177 0";var zt={},Tp={};(function(e){e.elemsGroups={animation:new Set(["animate","animateColor","animateMotion","animateTransform","set"]),descriptive:new Set(["desc","metadata","title"]),shape:new Set(["circle","ellipse","line","path","polygon","polyline","rect"]),structural:new Set(["defs","g","svg","symbol","use"]),paintServer:new Set(["hatch","linearGradient","meshGradient","pattern","radialGradient","solidColor"]),nonRendering:new Set(["clipPath","filter","linearGradient","marker","mask","pattern","radialGradient","solidColor","symbol"]),container:new Set(["a","defs","foreignObject","g","marker","mask","missing-glyph","pattern","svg","switch","symbol"]),textContent:new Set(["altGlyph","altGlyphDef","altGlyphItem","glyph","glyphRef","text","textPath","tref","tspan"]),textContentChild:new Set(["altGlyph","textPath","tref","tspan"]),lightSource:new Set(["feDiffuseLighting","feDistantLight","fePointLight","feSpecularLighting","feSpotLight"]),filterPrimitive:new Set(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence"])},e.textElems=new Set([...e.elemsGroups.textContent,"pre","title"]),e.pathElems=new Set(["glyph","missing-glyph","path"]),e.attrsGroups={animationAddition:new Set(["additive","accumulate"]),animationAttributeTarget:new Set(["attributeType","attributeName"]),animationEvent:new Set(["onbegin","onend","onrepeat","onload"]),animationTiming:new Set(["begin","dur","end","fill","max","min","repeatCount","repeatDur","restart"]),animationValue:new Set(["by","calcMode","from","keySplines","keyTimes","to","values"]),conditionalProcessing:new Set(["requiredExtensions","requiredFeatures","systemLanguage"]),core:new Set(["id","tabindex","xml:base","xml:lang","xml:space"]),graphicalEvent:new Set(["onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup"]),presentation:new Set(["alignment-baseline","baseline-shift","clip-path","clip-rule","clip","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","display","dominant-baseline","enable-background","fill-opacity","fill-rule","fill","filter","flood-color","flood-opacity","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-decoration","text-overflow","text-rendering","transform-origin","transform","unicode-bidi","vector-effect","visibility","word-spacing","writing-mode"]),xlink:new Set(["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type"]),documentEvent:new Set(["onabort","onerror","onresize","onscroll","onunload","onzoom"]),documentElementEvent:new Set(["oncopy","oncut","onpaste"]),globalEvent:new Set(["oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting"]),filterPrimitive:new Set(["x","y","width","height","result"]),transferFunction:new Set(["amplitude","exponent","intercept","offset","slope","tableValues","type"])},e.attrsGroupsDefaults={core:{"xml:space":"default"},presentation:{clip:"auto","clip-path":"none","clip-rule":"nonzero",mask:"none",opacity:"1","stop-color":"#000","stop-opacity":"1","fill-opacity":"1","fill-rule":"nonzero",fill:"#000",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-opacity":"1","paint-order":"normal","vector-effect":"none",display:"inline",visibility:"visible","marker-start":"none","marker-mid":"none","marker-end":"none","color-interpolation":"sRGB","color-interpolation-filters":"linearRGB","color-rendering":"auto","shape-rendering":"auto","text-rendering":"auto","image-rendering":"auto","font-style":"normal","font-variant":"normal","font-weight":"normal","font-stretch":"normal","font-size":"medium","font-size-adjust":"none",kerning:"auto","letter-spacing":"normal","word-spacing":"normal","text-decoration":"none","text-anchor":"start","text-overflow":"clip","writing-mode":"lr-tb","glyph-orientation-vertical":"auto","glyph-orientation-horizontal":"0deg",direction:"ltr","unicode-bidi":"normal","dominant-baseline":"auto","alignment-baseline":"baseline","baseline-shift":"baseline"},transferFunction:{slope:"1",intercept:"0",amplitude:"1",exponent:"1",offset:"0"}},e.elems={a:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","style","target","transform"]),defaults:{target:"_self"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view","tspan"])},altGlyph:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","format","glyphRef","rotate","style","x","y"])},altGlyphDef:{attrsGroups:new Set(["core"]),content:new Set(["glyphRef"])},altGlyphItem:{attrsGroups:new Set(["core"]),content:new Set(["glyphRef","altGlyphItem"])},animate:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["externalResourcesRequired"]),contentGroups:new Set(["descriptive"])},animateColor:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["externalResourcesRequired"]),contentGroups:new Set(["descriptive"])},animateMotion:{attrsGroups:new Set(["animationAddition","animationEvent","animationTiming","animationValue","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","keyPoints","origin","path","rotate"]),defaults:{rotate:"0"},contentGroups:new Set(["descriptive"]),content:new Set(["mpath"])},animateTransform:{attrsGroups:new Set(["animationAddition","animationAttributeTarget","animationEvent","animationTiming","animationValue","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","type"]),contentGroups:new Set(["descriptive"])},circle:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","r","style","transform"]),defaults:{cx:"0",cy:"0"},contentGroups:new Set(["animation","descriptive"])},clipPath:{attrsGroups:new Set(["conditionalProcessing","core","presentation"]),attrs:new Set(["class","clipPathUnits","externalResourcesRequired","style","transform"]),defaults:{clipPathUnits:"userSpaceOnUse"},contentGroups:new Set(["animation","descriptive","shape"]),content:new Set(["text","use"])},"color-profile":{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["local","name","rendering-intent"]),defaults:{name:"sRGB","rendering-intent":"auto"},contentGroups:new Set(["descriptive"])},cursor:{attrsGroups:new Set(["core","conditionalProcessing","xlink"]),attrs:new Set(["externalResourcesRequired","x","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["descriptive"])},defs:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},desc:{attrsGroups:new Set(["core"]),attrs:new Set(["class","style"])},ellipse:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","rx","ry","style","transform"]),defaults:{cx:"0",cy:"0"},contentGroups:new Set(["animation","descriptive"])},feBlend:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","in2","mode"]),defaults:{mode:"normal"},content:new Set(["animate","set"])},feColorMatrix:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","type","values"]),defaults:{type:"matrix"},content:new Set(["animate","set"])},feComponentTransfer:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in"]),content:new Set(["feFuncA","feFuncB","feFuncG","feFuncR"])},feComposite:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","in2","k1","k2","k3","k4","operator","style"]),defaults:{operator:"over",k1:"0",k2:"0",k3:"0",k4:"0"},content:new Set(["animate","set"])},feConvolveMatrix:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","kernelMatrix","order","style","bias","divisor","edgeMode","targetX","targetY","kernelUnitLength","preserveAlpha"]),defaults:{order:"3",bias:"0",edgeMode:"duplicate",preserveAlpha:"false"},content:new Set(["animate","set"])},feDiffuseLighting:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","diffuseConstant","in","kernelUnitLength","style","surfaceScale"]),defaults:{surfaceScale:"1",diffuseConstant:"1"},contentGroups:new Set(["descriptive"]),content:new Set(["feDistantLight","fePointLight","feSpotLight"])},feDisplacementMap:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","in2","scale","style","xChannelSelector","yChannelSelector"]),defaults:{scale:"0",xChannelSelector:"A",yChannelSelector:"A"},content:new Set(["animate","set"])},feDistantLight:{attrsGroups:new Set(["core"]),attrs:new Set(["azimuth","elevation"]),defaults:{azimuth:"0",elevation:"0"},content:new Set(["animate","set"])},feFlood:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style"]),content:new Set(["animate","animateColor","set"])},feFuncA:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncB:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncG:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feFuncR:{attrsGroups:new Set(["core","transferFunction"]),content:new Set(["set","animate"])},feGaussianBlur:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","stdDeviation"]),defaults:{stdDeviation:"0"},content:new Set(["set","animate"])},feImage:{attrsGroups:new Set(["core","presentation","filterPrimitive","xlink"]),attrs:new Set(["class","externalResourcesRequired","href","preserveAspectRatio","style","xlink:href"]),defaults:{preserveAspectRatio:"xMidYMid meet"},content:new Set(["animate","animateTransform","set"])},feMerge:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style"]),content:new Set(["feMergeNode"])},feMergeNode:{attrsGroups:new Set(["core"]),attrs:new Set(["in"]),content:new Set(["animate","set"])},feMorphology:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","operator","radius"]),defaults:{operator:"erode",radius:"0"},content:new Set(["animate","set"])},feOffset:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in","dx","dy"]),defaults:{dx:"0",dy:"0"},content:new Set(["animate","set"])},fePointLight:{attrsGroups:new Set(["core"]),attrs:new Set(["x","y","z"]),defaults:{x:"0",y:"0",z:"0"},content:new Set(["animate","set"])},feSpecularLighting:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","in","kernelUnitLength","specularConstant","specularExponent","style","surfaceScale"]),defaults:{surfaceScale:"1",specularConstant:"1",specularExponent:"1"},contentGroups:new Set(["descriptive","lightSource"])},feSpotLight:{attrsGroups:new Set(["core"]),attrs:new Set(["limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","y","z"]),defaults:{x:"0",y:"0",z:"0",pointsAtX:"0",pointsAtY:"0",pointsAtZ:"0",specularExponent:"1"},content:new Set(["animate","set"])},feTile:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["class","style","in"]),content:new Set(["animate","set"])},feTurbulence:{attrsGroups:new Set(["core","presentation","filterPrimitive"]),attrs:new Set(["baseFrequency","class","numOctaves","seed","stitchTiles","style","type"]),defaults:{baseFrequency:"0",numOctaves:"1",seed:"0",stitchTiles:"noStitch",type:"turbulence"},content:new Set(["animate","set"])},filter:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","filterRes","filterUnits","height","href","primitiveUnits","style","width","x","xlink:href","y"]),defaults:{primitiveUnits:"userSpaceOnUse",x:"-10%",y:"-10%",width:"120%",height:"120%"},contentGroups:new Set(["descriptive","filterPrimitive"]),content:new Set(["animate","set"])},font:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","style","vert-adv-y","vert-origin-x","vert-origin-y"]),defaults:{"horiz-origin-x":"0","horiz-origin-y":"0"},contentGroups:new Set(["descriptive"]),content:new Set(["font-face","glyph","hkern","missing-glyph","vkern"])},"font-face":{attrsGroups:new Set(["core"]),attrs:new Set(["font-family","font-style","font-variant","font-weight","font-stretch","font-size","unicode-range","units-per-em","panose-1","stemv","stemh","slope","cap-height","x-height","accent-height","ascent","descent","widths","bbox","ideographic","alphabetic","mathematical","hanging","v-ideographic","v-alphabetic","v-mathematical","v-hanging","underline-position","underline-thickness","strikethrough-position","strikethrough-thickness","overline-position","overline-thickness"]),defaults:{"font-style":"all","font-variant":"normal","font-weight":"all","font-stretch":"normal","unicode-range":"U+0-10FFFF","units-per-em":"1000","panose-1":"0 0 0 0 0 0 0 0 0 0",slope:"0"},contentGroups:new Set(["descriptive"]),content:new Set(["font-face-src"])},"font-face-format":{attrsGroups:new Set(["core"]),attrs:new Set(["string"])},"font-face-name":{attrsGroups:new Set(["core"]),attrs:new Set(["name"])},"font-face-src":{attrsGroups:new Set(["core"]),content:new Set(["font-face-name","font-face-uri"])},"font-face-uri":{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["href","xlink:href"]),content:new Set(["font-face-format"])},foreignObject:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","style","transform","width","x","y"]),defaults:{x:"0",y:"0"}},g:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},glyph:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["arabic-form","class","d","glyph-name","horiz-adv-x","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y"]),defaults:{"arabic-form":"initial"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},glyphRef:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","d","horiz-adv-x","style","vert-adv-y","vert-origin-x","vert-origin-y"]),contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},hatch:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","hatchContentUnits","hatchUnits","pitch","rotate","style","transform","x","y"]),defaults:{hatchUnits:"objectBoundingBox",hatchContentUnits:"userSpaceOnUse",x:"0",y:"0",pitch:"0",rotate:"0"},contentGroups:new Set(["animation","descriptive"]),content:new Set(["hatchPath"])},hatchPath:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","style","d","offset"]),defaults:{offset:"0"},contentGroups:new Set(["animation","descriptive"])},hkern:{attrsGroups:new Set(["core"]),attrs:new Set(["u1","g1","u2","g2","k"])},image:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","preserveAspectRatio","style","transform","width","x","xlink:href","y"]),defaults:{x:"0",y:"0",preserveAspectRatio:"xMidYMid meet"},contentGroups:new Set(["animation","descriptive"])},line:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform","x1","x2","y1","y2"]),defaults:{x1:"0",y1:"0",x2:"0",y2:"0"},contentGroups:new Set(["animation","descriptive"])},linearGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","gradientTransform","gradientUnits","href","spreadMethod","style","x1","x2","xlink:href","y1","y2"]),defaults:{x1:"0",y1:"0",x2:"100%",y2:"0",spreadMethod:"pad"},contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateTransform","set","stop"])},marker:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","externalResourcesRequired","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox"]),defaults:{markerUnits:"strokeWidth",refX:"0",refY:"0",markerWidth:"3",markerHeight:"3"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},mask:{attrsGroups:new Set(["conditionalProcessing","core","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","mask-type","maskContentUnits","maskUnits","style","width","x","y"]),defaults:{maskUnits:"objectBoundingBox",maskContentUnits:"userSpaceOnUse",x:"-10%",y:"-10%",width:"120%",height:"120%"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},metadata:{attrsGroups:new Set(["core"])},"missing-glyph":{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","d","horiz-adv-x","style","vert-adv-y","vert-origin-x","vert-origin-y"]),contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},mpath:{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["externalResourcesRequired","href","xlink:href"]),contentGroups:new Set(["descriptive"])},path:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","d","externalResourcesRequired","pathLength","style","transform"]),contentGroups:new Set(["animation","descriptive"])},pattern:{attrsGroups:new Set(["conditionalProcessing","core","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","style","viewBox","width","x","xlink:href","y"]),defaults:{patternUnits:"objectBoundingBox",patternContentUnits:"userSpaceOnUse",x:"0",y:"0",width:"0",height:"0",preserveAspectRatio:"xMidYMid meet"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},polygon:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","points","style","transform"]),contentGroups:new Set(["animation","descriptive"])},polyline:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","points","style","transform"]),contentGroups:new Set(["animation","descriptive"])},radialGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","cx","cy","externalResourcesRequired","fr","fx","fy","gradientTransform","gradientUnits","href","r","spreadMethod","style","xlink:href"]),defaults:{gradientUnits:"objectBoundingBox",cx:"50%",cy:"50%",r:"50%"},contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateTransform","set","stop"])},meshGradient:{attrsGroups:new Set(["core","presentation","xlink"]),attrs:new Set(["class","style","x","y","gradientUnits","transform"]),contentGroups:new Set(["descriptive","paintServer","animation"]),content:new Set(["meshRow"])},meshRow:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["descriptive"]),content:new Set(["meshPatch"])},meshPatch:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["descriptive"]),content:new Set(["stop"])},rect:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","height","rx","ry","style","transform","width","x","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["animation","descriptive"])},script:{attrsGroups:new Set(["core","xlink"]),attrs:new Set(["externalResourcesRequired","type","href","xlink:href"])},set:{attrsGroups:new Set(["animation","animationAttributeTarget","animationTiming","conditionalProcessing","core","xlink"]),attrs:new Set(["externalResourcesRequired","to"]),contentGroups:new Set(["descriptive"])},solidColor:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style"]),contentGroups:new Set(["paintServer"])},stop:{attrsGroups:new Set(["core","presentation"]),attrs:new Set(["class","style","offset","path"]),content:new Set(["animate","animateColor","set"])},style:{attrsGroups:new Set(["core"]),attrs:new Set(["type","media","title"]),defaults:{type:"text/css"}},svg:{attrsGroups:new Set(["conditionalProcessing","core","documentEvent","graphicalEvent","presentation"]),attrs:new Set(["baseProfile","class","contentScriptType","contentStyleType","height","preserveAspectRatio","style","version","viewBox","width","x","y","zoomAndPan"]),defaults:{x:"0",y:"0",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",zoomAndPan:"magnify",version:"1.1",baseProfile:"none",contentScriptType:"application/ecmascript",contentStyleType:"text/css"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},switch:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","style","transform"]),contentGroups:new Set(["animation","descriptive","shape"]),content:new Set(["a","foreignObject","g","image","svg","switch","text","use"])},symbol:{attrsGroups:new Set(["core","graphicalEvent","presentation"]),attrs:new Set(["class","externalResourcesRequired","preserveAspectRatio","refX","refY","style","viewBox"]),defaults:{refX:"0",refY:"0"},contentGroups:new Set(["animation","descriptive","paintServer","shape","structural"]),content:new Set(["a","altGlyphDef","clipPath","color-profile","cursor","filter","font-face","font","foreignObject","image","marker","mask","pattern","script","style","switch","text","view"])},text:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","lengthAdjust","rotate","style","textLength","transform","x","y"]),defaults:{x:"0",y:"0",lengthAdjust:"spacing"},contentGroups:new Set(["animation","descriptive","textContentChild"]),content:new Set(["a"])},textPath:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","d","externalResourcesRequired","href","method","spacing","startOffset","style","xlink:href"]),defaults:{startOffset:"0",method:"align",spacing:"exact"},contentGroups:new Set(["descriptive"]),content:new Set(["a","altGlyph","animate","animateColor","set","tref","tspan"])},title:{attrsGroups:new Set(["core"]),attrs:new Set(["class","style"])},tref:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","href","style","xlink:href"]),contentGroups:new Set(["descriptive"]),content:new Set(["animate","animateColor","set"])},tspan:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation"]),attrs:new Set(["class","dx","dy","externalResourcesRequired","lengthAdjust","rotate","style","textLength","x","y"]),contentGroups:new Set(["descriptive"]),content:new Set(["a","altGlyph","animate","animateColor","set","tref","tspan"])},use:{attrsGroups:new Set(["conditionalProcessing","core","graphicalEvent","presentation","xlink"]),attrs:new Set(["class","externalResourcesRequired","height","href","style","transform","width","x","xlink:href","y"]),defaults:{x:"0",y:"0"},contentGroups:new Set(["animation","descriptive"])},view:{attrsGroups:new Set(["core"]),attrs:new Set(["externalResourcesRequired","preserveAspectRatio","viewBox","viewTarget","zoomAndPan"]),contentGroups:new Set(["descriptive"])},vkern:{attrsGroups:new Set(["core"]),attrs:new Set(["u1","g1","u2","g2","k"])}},e.editorNamespaces=new Set(["http://creativecommons.org/ns#","http://inkscape.sourceforge.net/DTD/sodipodi-0.dtd","http://ns.adobe.com/AdobeIllustrator/10.0/","http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/","http://ns.adobe.com/Extensibility/1.0/","http://ns.adobe.com/Flows/1.0/","http://ns.adobe.com/GenericCustomNamespace/1.0/","http://ns.adobe.com/Graphs/1.0/","http://ns.adobe.com/ImageReplacement/1.0/","http://ns.adobe.com/SaveForWeb/1.0/","http://ns.adobe.com/Variables/1.0/","http://ns.adobe.com/XPath/1.0/","http://purl.org/dc/elements/1.1/","http://schemas.microsoft.com/visio/2003/SVGExtensions/","http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd","http://taptrix.com/vectorillustrator/svg_extensions","http://www.bohemiancoding.com/sketch/ns","http://www.figma.com/figma/ns","http://www.inkscape.org/namespaces/inkscape","http://www.serif.com/","http://www.vector.evaxdesign.sk","http://www.w3.org/1999/02/22-rdf-syntax-ns#"]),e.referencesProps=new Set(["clip-path","color-profile","fill","filter","marker-end","marker-mid","marker-start","mask","stroke","style"]),e.inheritableAttrs=new Set(["clip-rule","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","dominant-baseline","fill-opacity","fill-rule","fill","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","font","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","letter-spacing","marker-end","marker-mid","marker-start","marker","paint-order","pointer-events","shape-rendering","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-rendering","transform","visibility","word-spacing","writing-mode"]),e.presentationNonInheritableGroupAttrs=new Set(["clip-path","display","filter","mask","opacity","text-decoration","transform","unicode-bidi"]),e.colorsNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#639",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},e.colorsShortNames={"#f0ffff":"azure","#f5f5dc":"beige","#ffe4c4":"bisque","#a52a2a":"brown","#ff7f50":"coral","#ffd700":"gold","#808080":"gray","#008000":"green","#4b0082":"indigo","#fffff0":"ivory","#f0e68c":"khaki","#faf0e6":"linen","#800000":"maroon","#000080":"navy","#808000":"olive","#ffa500":"orange","#da70d6":"orchid","#cd853f":"peru","#ffc0cb":"pink","#dda0dd":"plum","#800080":"purple","#f00":"red","#ff0000":"red","#fa8072":"salmon","#a0522d":"sienna","#c0c0c0":"silver","#fffafa":"snow","#d2b48c":"tan","#008080":"teal","#ff6347":"tomato","#ee82ee":"violet","#f5deb3":"wheat"},e.colorsProps=new Set(["color","fill","flood-color","lighting-color","stop-color","stroke"]),e.pseudoClasses={displayState:new Set(["fullscreen","modal","picture-in-picture"]),input:new Set(["autofill","blank","checked","default","disabled","enabled","in-range","indetermined","invalid","optional","out-of-range","placeholder-shown","read-only","read-write","required","user-invalid","valid"]),linguistic:new Set(["dir","lang"]),location:new Set(["any-link","link","local-link","scope","target-within","target","visited"]),resourceState:new Set(["playing","paused"]),timeDimensional:new Set(["current","past","future"]),treeStructural:new Set(["empty","first-child","first-of-type","last-child","last-of-type","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","root"]),userAction:new Set(["active","focus-visible","focus-within","focus","hover"]),functional:new Set(["is","not","where","has"])}})(Tp);const{attrsGroups:qr,referencesProps:wv}=Tp,kp=/\burl\((["'])?#(.+?)\1\)/g,xv=/^#(.+?)$/,Sv=/(\w+)\.[a-zA-Z]/;zt.encodeSVGDatauri=(e,t)=>{var n="data:image/svg+xml";return!t||t==="base64"?(n+=";base64,",e=n+Buffer.from(e).toString("base64")):t==="enc"?e=n+","+encodeURIComponent(e):t==="unenc"&&(e=n+","+e),e};zt.decodeSVGDatauri=e=>{var t=/data:image\/svg\+xml(;charset=[^;,]*)?(;base64)?,(.*)/,n=t.exec(e);if(!n)return e;var r=n[3];return n[2]?e=Buffer.from(r,"base64").toString("utf8"):r.charAt(0)==="%"?e=decodeURIComponent(r):r.charAt(0)==="<"&&(e=r),e};zt.cleanupOutData=(e,t,n)=>{let r="",i,o;return e.forEach((s,a)=>{if(i=" ",a==0&&(i=""),t.noSpaceAfterFlags&&(n=="A"||n=="a")){var l=a%7;(l==4||l==5)&&(i="")}const c=t.leadingZero?Np(s):s.toString();t.negativeExtraSpace&&i!=""&&(s<0||c.charAt(0)==="."&&o%1!==0)&&(i=""),o=s,r+=i+c}),r};const Np=e=>{const t=e.toString();return 0<e&&e<1&&t.startsWith("0")?t.slice(1):-1<e&&e<0&&t[1]==="0"?t[0]+t.slice(2):t};zt.removeLeadingZero=Np;const Pv=e=>e.name==="script"&&e.children.length!==0||e.name==="a"&&Object.entries(e.attributes).some(([r,i])=>(r==="href"||r.endsWith(":href"))&&i!=null&&i.trimStart().startsWith("javascript:"))?!0:[...qr.animationEvent,...qr.documentEvent,...qr.documentElementEvent,...qr.globalEvent,...qr.graphicalEvent].some(n=>e.attributes[n]!=null);zt.hasScripts=Pv;const _v=e=>new RegExp(kp).test(e);zt.includesUrlReference=_v;const Cv=(e,t)=>{const n=[];if(wv.has(e)){const r=t.matchAll(kp);for(const i of r)n.push(i[2])}if(e==="href"||e.endsWith(":href")){const r=xv.exec(t);r!=null&&n.push(r[1])}if(e==="begin"){const r=Sv.exec(t);r!=null&&n.push(r[1])}return n.map(r=>decodeURI(r))};zt.findReferences=Cv;const Ev=(e,t)=>{const n=10**t;return Math.round(e*n)/n};zt.toFixed=Ev;const{removeLeadingZero:Iv,toFixed:Tv}=zt,Op={M:2,m:2,Z:0,z:0,L:2,l:2,H:1,h:1,V:1,v:1,C:6,c:6,S:4,s:4,Q:4,q:4,T:2,t:2,A:7,a:7},kv=e=>e in Op,Nv=e=>{const t=e.codePointAt(0);return t===32||t===9||t===13||t===10},Ov=e=>{const t=e.codePointAt(0);return t==null?!1:48<=t&&t<=57},Ca=(e,t)=>{let n=t,r="",i="none";for(;n<e.length;n+=1){const s=e[n];if(s==="+"||s==="-"){if(i==="none"){i="sign",r+=s;continue}if(i==="e"){i="exponent_sign",r+=s;continue}}if(Ov(s)){if(i==="none"||i==="sign"||i==="whole"){i="whole",r+=s;continue}if(i==="decimal_point"||i==="decimal"){i="decimal",r+=s;continue}if(i==="e"||i==="exponent_sign"||i==="exponent"){i="exponent",r+=s;continue}}if(s==="."&&(i==="none"||i==="sign"||i==="whole")){i="decimal_point",r+=s;continue}if((s==="E"||s=="e")&&(i==="whole"||i==="decimal_point"||i==="decimal")){i="e",r+=s;continue}break}const o=Number.parseFloat(r);return Number.isNaN(o)?[t,null]:[n-1,o]},Av=e=>{const t=[];let n=null,r=[],i=0,o=!1,s=!1;for(let a=0;a<e.length;a+=1){const l=e.charAt(a);if(Nv(l))continue;if(o&&l===","){if(s)break;s=!0;continue}if(kv(l)){if(s)return t;if(n==null){if(l!=="M"&&l!=="m")return t}else if(r.length!==0)return t;n=l,r=[],i=Op[n],o=!1,i===0&&t.push({command:n,args:r});continue}if(n==null)return t;let c=a,u=null;if(n==="A"||n==="a"){const d=r.length;(d===0||d===1)&&l!=="+"&&l!=="-"&&([c,u]=Ca(e,a)),(d===2||d===5||d===6)&&([c,u]=Ca(e,a)),(d===3||d===4)&&(l==="0"&&(u=0),l==="1"&&(u=1))}else[c,u]=Ca(e,a);if(u==null)return t;r.push(u),o=!0,s=!1,a=c,r.length===i&&(t.push({command:n,args:r}),n==="M"&&(n="L"),n==="m"&&(n="l"),r=[])}return t};var Lv=Av;const Fv=(e,t)=>(t!=null&&(e=Tv(e,t)),{roundedStr:Iv(e),rounded:e}),So=(e,t,n,r)=>{let i="",o;for(let s=0;s<t.length;s++){const{roundedStr:a,rounded:l}=Fv(t[s],n);r&&(e==="A"||e==="a")&&(s%7===4||s%7===5)||s===0||l<0||!Number.isInteger(o)&&l!=0&&l<1&&l>-1?i+=a:i+=` ${a}`,o=l}return i},Rv=({pathData:e,precision:t,disableSpaceAfterFlags:n})=>{if(e.length===1){const{command:o,args:s}=e[0];return o+So(o,s,t,n)}let r="",i={...e[0]};e[1].command==="L"?i.command="M":e[1].command==="l"&&(i.command="m");for(let o=1;o<e.length;o++){const{command:s,args:a}=e[o];i.command===s&&i.command!=="M"&&i.command!=="m"||i.command==="M"&&s==="L"||i.command==="m"&&s==="l"?(i.args=[...i.args,...a],o===e.length-1&&(r+=i.command+So(i.command,i.args,t,n))):(r+=i.command+So(i.command,i.args,t,n),o===e.length-1?r+=s+So(s,a,t,n):i={command:s,args:a})}return r};var bv=Rv;const Z=(e=0,t=0,n=0,r=0,i=0)=>{const o=i*Math.PI/180,s=Math.cos(o),a=Math.sin(o),l=s*(n-e)-a*(r-t)+e,c=s*(r-t)+a*(n-e)+t;return{x:l,y:c}};class nr{constructor(t,n,r,i=!1,o=!1,s,a){I(this,"tag","a");this.rx=t,this.ry=n,this.xAxisRotation=r,this.largeArcFlag=i,this.sweepFlag=o,this.dx=s,this.dy=a}mirror(t){let{rx:n,ry:r,xAxisRotation:i,largeArcFlag:o,sweepFlag:s,dx:a,dy:l}=this;return t===ye?(l*=-1,i=Math.sign(i)*(ws-Math.abs(i))):t===Ae&&(a*=-1,i=Math.sign(i)*(ws-Math.abs(i))),new nr(n,r,i,o,!s,a,l)}rotate(t){let{rx:n,ry:r,xAxisRotation:i,largeArcFlag:o,sweepFlag:s,dx:a,dy:l}=this;const{x:c,y:u}=Z(0,0,a,l,t);return i+=t,(i>=Ir||i<=-360)&&(i%=Ir),new nr(n,r,i,o,s,c,u)}scale(t,n){const{rx:r,ry:i,xAxisRotation:o,largeArcFlag:s,sweepFlag:a,dx:l,dy:c}=this,u=r*t,d=i*n,f=l*t,p=c*n;return new nr(u,d,o,s,a,f,p)}moveOnDelta(t,n){const{rx:r,ry:i,xAxisRotation:o,largeArcFlag:s,sweepFlag:a,dx:l,dy:c}=this,u=l+t,d=c+n;return new nr(r,i,o,s,a,u,d)}toPathDataItem(){const{tag:t,rx:n,ry:r,xAxisRotation:i,largeArcFlag:o,sweepFlag:s,dx:a,dy:l}=this;return{command:t,args:[n,r,i,o?1:0,s?1:0,a,l]}}toString(t=3){let{tag:n,rx:r,ry:i,xAxisRotation:o,largeArcFlag:s,sweepFlag:a,dx:l,dy:c}=this;return[r,i,l,c]=[r,i,l,c].map(u=>Number.parseFloat(u.toFixed(t))),`${n} ${r} ${i} ${o} ${s?"1":"0"} ${a?"1":"0"} ${l} ${c}`}}class rr{constructor(t,n,r,i=!1,o=!1,s,a){I(this,"tag","A");this.rx=t,this.ry=n,this.xAxisRotation=r,this.largeArcFlag=i,this.sweepFlag=o,this.x=s,this.y=a}mirror(t){let{rx:n,ry:r,xAxisRotation:i,largeArcFlag:o,sweepFlag:s,x:a,y:l}=this;return t===ye?(l*=-1,i=Math.sign(i)*(ws-Math.abs(i)),s=!s):t===Ae&&(a*=-1,i=Math.sign(i)*(ws-Math.abs(i)),s=!s),new rr(n,r,i,o,s,a,l)}rotate(t){let{rx:n,ry:r,xAxisRotation:i,largeArcFlag:o,sweepFlag:s,x:a,y:l}=this;const{x:c,y:u}=Z(0,0,a,l,t);return i+=t,(i>=Ir||i<=-360)&&(i%=Ir),new rr(n,r,i,o,s,c,u)}scale(t,n){const{rx:r,ry:i,xAxisRotation:o,largeArcFlag:s,sweepFlag:a,x:l,y:c}=this,u=r*t,d=i*n,f=l*t,p=c*n;return new rr(u,d,o,s,a,f,p)}moveOnDelta(t,n){const{rx:r,ry:i,xAxisRotation:o,largeArcFlag:s,sweepFlag:a,x:l,y:c}=this,u=l+t,d=c+n;return new rr(r,i,o,s,a,u,d)}toPathDataItem(){const{tag:t,rx:n,ry:r,xAxisRotation:i,largeArcFlag:o,sweepFlag:s,x:a,y:l}=this;return{command:t,args:[n,r,i,o?1:0,s?1:0,a,l]}}toString(t=3){let{tag:n,rx:r,ry:i,xAxisRotation:o,largeArcFlag:s,sweepFlag:a,x:l,y:c}=this;return[r,i,l,c]=[r,i,l,c].map(u=>Number.parseFloat(u.toFixed(t))),`${n} ${r} ${i} ${o} ${s?"1":"0"} ${a?"1":"0"} ${l} ${c}`}}const Dv=({command:e,args:t})=>{if(e==="a"){const[n,r,i,o,s,a,l]=t;return new nr(n,r,i,o===1,s===1,a,l)}else if(e==="A"){const[n,r,i,o,s,a,l]=t;return new rr(n,r,i,o===1,s===1,a,l)}throw new Error("Unknown path 2d command")};class ir{constructor(){I(this,"tag","z")}mirror(t){return new ir}rotate(t){return new ir}scale(t,n){return new ir}moveOnDelta(t,n){return new ir}toPathDataItem(){const{tag:t}=this;return{command:t,args:[]}}toString(){const{tag:t}=this;return`${t}`}}class or{constructor(){I(this,"tag","Z")}mirror(t){return new or}rotate(t){return new or}scale(t,n){return new or}moveOnDelta(t,n){return new or}toPathDataItem(){const{tag:t}=this;return{command:t,args:[]}}toString(){const{tag:t}=this;return`${t}`}}const zv=({command:e})=>{if(e==="z")return new ir;if(e==="Z")return new or;throw new Error("Unknown path 2d command")};class sr{constructor(t,n,r,i,o,s){I(this,"tag","c");this.dx1=t,this.dy1=n,this.dx2=r,this.dy2=i,this.dx=o,this.dy=s}mirror(t){let{dx1:n,dy1:r,dx2:i,dy2:o,dx:s,dy:a}=this;return t===ye?(r*=-1,o*=-1,a*=-1):t===Ae&&(n*=-1,i*=-1,s*=-1),new sr(n,r,i,o,s,a)}rotate(t){const{dx1:n,dy1:r,dx2:i,dy2:o,dx:s,dy:a}=this,{x:l,y:c}=Z(0,0,n,r,t),{x:u,y:d}=Z(0,0,i,o,t),{x:f,y:p}=Z(0,0,s,a,t);return new sr(l,c,u,d,f,p)}scale(t,n){const{dx1:r,dy1:i,dx2:o,dy2:s,dx:a,dy:l}=this,c=r*t,u=i*n,d=o*t,f=s*n,p=a*t,w=l*n;return new sr(c,u,d,f,p,w)}moveOnDelta(t,n){const{dx1:r,dy1:i,dx2:o,dy2:s,dx:a,dy:l}=this,c=r+t,u=i+n,d=o+t,f=s+n,p=a+t,w=l+n;return new sr(c,u,d,f,p,w)}toPathDataItem(){const{tag:t,dx1:n,dy1:r,dx2:i,dy2:o,dx:s,dy:a}=this;return{command:t,args:[n,r,i,o,s,a]}}toString(t=3){let{tag:n,dx1:r,dy1:i,dx2:o,dy2:s,dx:a,dy:l}=this;return[r,i,o,s,a,l]=[r,i,o,s,a,l].map(c=>Number.parseFloat(c.toFixed(t))),`${n} ${r} ${i}, ${o} ${s}, ${a} ${l}`}}class ar{constructor(t,n,r,i,o,s){I(this,"tag","C");this.x1=t,this.y1=n,this.x2=r,this.y2=i,this.x=o,this.y=s}mirror(t){let{x1:n,y1:r,x2:i,y2:o,x:s,y:a}=this;return t===ye?(r*=-1,o*=-1,a*=-1):t===Ae&&(n*=-1,i*=-1,s*=-1),new ar(n,r,i,o,s,a)}rotate(t){const{x1:n,y1:r,x2:i,y2:o,x:s,y:a}=this,{x:l,y:c}=Z(0,0,n,r,t),{x:u,y:d}=Z(0,0,i,o,t),{x:f,y:p}=Z(0,0,s,a,t);return new ar(l,c,u,d,f,p)}scale(t,n){const{x1:r,y1:i,x2:o,y2:s,x:a,y:l}=this,c=r*t,u=i*n,d=o*t,f=s*n,p=a*t,w=l*n;return new ar(c,u,d,f,p,w)}moveOnDelta(t,n){const{x1:r,y1:i,x2:o,y2:s,x:a,y:l}=this,c=r+t,u=i+n,d=o+t,f=s+n,p=a+t,w=l+n;return new ar(c,u,d,f,p,w)}toPathDataItem(){const{tag:t,x1:n,y1:r,x2:i,y2:o,x:s,y:a}=this;return{command:t,args:[n,r,i,o,s,a]}}toString(t=3){let{tag:n,x1:r,y1:i,x2:o,y2:s,x:a,y:l}=this;return[r,i,o,s,a,l]=[r,i,o,s,a,l].map(c=>Number.parseFloat(c.toFixed(t))),`${n} ${r} ${i}, ${o} ${s}, ${a} ${l}`}}const Mv=({command:e,args:t})=>{if(e==="c"){const[n,r,i,o,s,a]=t;return new sr(n,r,i,o,s,a)}else if(e==="C"){const[n,r,i,o,s,a]=t;return new ar(n,r,i,o,s,a)}throw new Error("Unknown path 2d command")};class xn{constructor(t){I(this,"tag","v");this.dy=t}mirror(t){let{dy:n}=this;return t===ye&&(n*=-1),new xn(n)}rotate(t){const{dy:n}=this;if(t===0||t===180){const{y:i}=Z(0,0,0,n,t);return new xn(i)}else if(t===90||t===270){const{x:i}=Z(0,0,0,n,t);return new Pn(i)}const r="Unsupported rotation angle";throw console.error("failure to rotate the vertical line with relative coordinates",r),new Error(r)}scale(t,n){const{dy:r}=this,i=r*n;return new xn(i)}moveOnDelta(t,n){const{dy:r}=this,i=r+n;return new xn(i)}toPathDataItem(){const{tag:t,dy:n}=this;return{command:t,args:[n]}}toString(t=3){let{tag:n,dy:r}=this;return[r]=[r].map(i=>Number.parseFloat(i.toFixed(t))),`${n} ${r}`}}class Sn{constructor(t){I(this,"tag","V");this.y=t}mirror(t){let{y:n}=this;return t===ye&&(n*=-1),new Sn(n)}rotate(t){const{y:n}=this;if(t===0||t===180){const{y:i}=Z(0,0,0,n,t);return new Sn(i)}else if(t===90||t===270){const{x:i}=Z(0,0,0,n,t);return new _n(i)}const r="Unsupported rotation angle";throw console.error("failure to rotate the vertical line with absolute coordinates",r),new Error(r)}scale(t,n){const{y:r}=this,i=r*n;return new Sn(i)}moveOnDelta(t,n){const{y:r}=this,i=r+n;return new Sn(i)}toPathDataItem(){const{tag:t,y:n}=this;return{command:t,args:[n]}}toString(t=3){let{tag:n,y:r}=this;return[r]=[r].map(i=>Number.parseFloat(i.toFixed(t))),`${n} ${r}`}}const Bv=({command:e,args:t})=>{if(e==="v"){const[n]=t;return new xn(n)}else if(e==="V"){const[n]=t;return new Sn(n)}throw new Error("Unknown path 2d command")};class Pn{constructor(t){I(this,"tag","h");this.dx=t}mirror(t){let{dx:n}=this;return t===ye||t===Ae&&(n*=-1),new Pn(n)}rotate(t){const{dx:n}=this;if(t===0||t===180){const{x:i}=Z(0,0,n,0,t);return new Pn(i)}else if(t===90||t===270){const{y:i}=Z(0,0,n,0,t);return new xn(i)}const r="Unsupported rotation angle";throw console.error("failure to rotate the horizontal line with relative coordinates",r),new Error(r)}scale(t,n){const{dx:r}=this,i=r*t;return new Pn(i)}moveOnDelta(t,n){const{dx:r}=this,i=r+t;return new Pn(i)}toPathDataItem(){const{tag:t,dx:n}=this;return{command:t,args:[n]}}toString(t=3){let{tag:n,dx:r}=this;return[r]=[r].map(i=>Number.parseFloat(i.toFixed(t))),`${n} ${r}`}}class _n{constructor(t){I(this,"tag","H");this.x=t}mirror(t){let{x:n}=this;return t===ye||t===Ae&&(n*=-1),new _n(n)}rotate(t){const{x:n}=this;if(t===0||t===180){const{x:i}=Z(0,0,n,0,t);return new _n(i)}else if(t===90||t===270){const{y:i}=Z(0,0,n,0,t);return new Sn(i)}const r="Unsupported rotation angle";throw console.error("failure to rotate the horizontal line with absolute coordinates",r),new Error(r)}scale(t,n){const{x:r}=this,i=r*t;return new _n(i)}moveOnDelta(t,n){const{x:r}=this,i=r+t;return new _n(i)}toPathDataItem(){const{tag:t,x:n}=this;return{command:t,args:[n]}}toString(t=3){let{tag:n,x:r}=this;return[r]=[r].map(i=>Number.parseFloat(i.toFixed(t))),`${n} ${r}`}}const jv=({command:e,args:t})=>{if(e==="h"){const[n]=t;return new Pn(n)}else if(e==="H"){const[n]=t;return new _n(n)}throw new Error("Unknown path 2d command")};class lr{constructor(t,n){I(this,"tag","l");this.dx=t,this.dy=n}mirror(t){let{dx:n,dy:r}=this;return t===ye?r*=-1:t===Ae&&(n*=-1),new lr(n,r)}rotate(t){const{dx:n,dy:r}=this,{x:i,y:o}=Z(0,0,n,r,t);return new lr(i,o)}scale(t,n){const{dx:r,dy:i}=this,o=r*t,s=i*n;return new lr(o,s)}moveOnDelta(t,n){const{dx:r,dy:i}=this,o=r+t,s=i+n;return new lr(o,s)}toPathDataItem(){const{tag:t,dx:n,dy:r}=this;return{command:t,args:[n,r]}}toString(t=3){let{tag:n,dx:r,dy:i}=this;return[r,i]=[r,i].map(o=>Number.parseFloat(o.toFixed(t))),`${n} ${r} ${i}`}}class cr{constructor(t,n){I(this,"tag","L");this.x=t,this.y=n}mirror(t){let{x:n,y:r}=this;return t===ye?r*=-1:t===Ae&&(n*=-1),new cr(n,r)}rotate(t){const{x:n,y:r}=this,{x:i,y:o}=Z(0,0,n,r,t);return new cr(i,o)}scale(t,n){const{x:r,y:i}=this,o=r*t,s=i*n;return new cr(o,s)}moveOnDelta(t,n){const{x:r,y:i}=this,o=r+t,s=i+n;return new cr(o,s)}toPathDataItem(){const{tag:t,x:n,y:r}=this;return{command:t,args:[n,r]}}toString(t=3){let{tag:n,x:r,y:i}=this;return[r,i]=[r,i].map(o=>Number.parseFloat(o.toFixed(t))),`${n} ${r} ${i}`}}const Gv=({command:e,args:t})=>{if(e==="l"){const[n,r]=t;return new lr(n,r)}else if(e==="L"){const[n,r]=t;return new cr(n,r)}throw new Error("Unknown path 2d command")};class ur{constructor(t,n){I(this,"tag","m");this.dx=t,this.dy=n}mirror(t){let{dx:n,dy:r}=this;return t===ye?r*=-1:t===Ae&&(n*=-1),new ur(n,r)}rotate(t){const{dx:n,dy:r}=this,{x:i,y:o}=Z(0,0,n,r,t);return new ur(i,o)}scale(t,n){const{dx:r,dy:i}=this,o=r*t,s=i*n;return new ur(o,s)}moveOnDelta(t,n){const{dx:r,dy:i}=this,o=r+t,s=i+n;return new ur(o,s)}toPathDataItem(){const{tag:t,dx:n,dy:r}=this;return{command:t,args:[n,r]}}toString(t=3){let{tag:n,dx:r,dy:i}=this;return[r,i]=[r,i].map(o=>Number.parseFloat(o.toFixed(t))),`${n} ${r} ${i}`}}class dr{constructor(t,n){I(this,"tag","M");this.x=t,this.y=n}mirror(t){let{x:n,y:r}=this;return t===ye?r*=-1:t===Ae&&(n*=-1),new dr(n,r)}rotate(t){const{x:n,y:r}=this,{x:i,y:o}=Z(0,0,n,r,t);return new dr(i,o)}scale(t,n){const{x:r,y:i}=this,o=r*t,s=i*n;return new dr(o,s)}moveOnDelta(t,n){const{x:r,y:i}=this,o=r+t,s=i+n;return new dr(o,s)}toPathDataItem(){const{tag:t,x:n,y:r}=this;return{command:t,args:[n,r]}}toString(t=3){let{tag:n,x:r,y:i}=this;return[r,i]=[r,i].map(o=>Number.parseFloat(o.toFixed(t))),`${n} ${r} ${i}`}}const Hv=({command:e,args:t})=>{if(e==="m"){const[n,r]=t;return new ur(n,r)}else if(e==="M"){const[n,r]=t;return new dr(n,r)}throw new Error("Unknown path 2d command")};class fr{constructor(t,n,r,i){I(this,"tag","q");this.dx1=t,this.dy1=n,this.dx=r,this.dy=i}mirror(t){let{dx1:n,dy1:r,dx:i,dy:o}=this;return t===ye?(r*=-1,o*=-1):t===Ae&&(n*=-1,i*=-1),new fr(n,r,i,o)}rotate(t){const{dx1:n,dy1:r,dx:i,dy:o}=this,{x:s,y:a}=Z(0,0,n,r,t),{x:l,y:c}=Z(0,0,i,o,t);return new fr(s,a,l,c)}scale(t,n){const{dx1:r,dy1:i,dx:o,dy:s}=this,a=r*t,l=i*n,c=o*t,u=s*n;return new fr(a,l,c,u)}moveOnDelta(t,n){const{dx1:r,dy1:i,dx:o,dy:s}=this,a=r+t,l=i+n,c=o+t,u=s+n;return new fr(a,l,c,u)}toPathDataItem(){const{tag:t,dx1:n,dy1:r,dx:i,dy:o}=this;return{command:t,args:[n,r,i,o]}}toString(t=3){let{tag:n,dx1:r,dy1:i,dx:o,dy:s}=this;return[r,i,o,s]=[r,i,o,s].map(a=>Number.parseFloat(a.toFixed(t))),`${n} ${r} ${i}, ${o} ${s}`}}class hr{constructor(t,n,r,i){I(this,"tag","Q");this.x1=t,this.y1=n,this.x=r,this.y=i}mirror(t){let{x1:n,y1:r,x:i,y:o}=this;return t===ye?(r*=-1,o*=-1):t===Ae&&(n*=-1,i*=-1),new hr(n,r,i,o)}rotate(t){const{x1:n,y1:r,x:i,y:o}=this,{x:s,y:a}=Z(0,0,n,r,t),{x:l,y:c}=Z(0,0,i,o,t);return new hr(s,a,l,c)}scale(t,n){const{x1:r,y1:i,x:o,y:s}=this,a=r*t,l=i*n,c=o*t,u=s*n;return new hr(a,l,c,u)}moveOnDelta(t,n){const{x1:r,y1:i,x:o,y:s}=this,a=r+t,l=i+n,c=o+t,u=s+n;return new hr(a,l,c,u)}toPathDataItem(){const{tag:t,x1:n,y1:r,x:i,y:o}=this;return{command:t,args:[n,r,i,o]}}toString(t=3){let{tag:n,x1:r,y1:i,x:o,y:s}=this;return[r,i,o,s]=[r,i,o,s].map(a=>Number.parseFloat(a.toFixed(t))),`${n} ${r} ${i}, ${o} ${s}`}}const Uv=({command:e,args:t})=>{if(e==="q"){const[n,r,i,o]=t;return new fr(n,r,i,o)}else if(e==="Q"){const[n,r,i,o]=t;return new hr(n,r,i,o)}throw new Error("Unknown path 2d command")};class pr{constructor(t,n,r,i){I(this,"tag","s");this.dx2=t,this.dy2=n,this.dx=r,this.dy=i}mirror(t){let{dx2:n,dy2:r,dx:i,dy:o}=this;return t===ye?(r*=-1,o*=-1):t===Ae&&(n*=-1,i*=-1),new pr(n,r,i,o)}rotate(t){const{dx2:n,dy2:r,dx:i,dy:o}=this,{x:s,y:a}=Z(0,0,n,r,t),{x:l,y:c}=Z(0,0,i,o,t);return new pr(s,a,l,c)}scale(t,n){const{dx2:r,dy2:i,dx:o,dy:s}=this,a=r*t,l=i*n,c=o*t,u=s*n;return new pr(a,l,c,u)}moveOnDelta(t,n){const{dx2:r,dy2:i,dx:o,dy:s}=this,a=r+t,l=i+n,c=o+t,u=s+n;return new pr(a,l,c,u)}toPathDataItem(){const{tag:t,dx2:n,dy2:r,dx:i,dy:o}=this;return{command:t,args:[n,r,i,o]}}toString(t=3){let{tag:n,dx2:r,dy2:i,dx:o,dy:s}=this;return[r,i,o,s]=[r,i,o,s].map(a=>Number.parseFloat(a.toFixed(t))),`${n} ${r} ${i}, ${o} ${s}`}}class mr{constructor(t,n,r,i){I(this,"tag","S");this.x2=t,this.y2=n,this.x=r,this.y=i}mirror(t){let{x2:n,y2:r,x:i,y:o}=this;return t===ye?(r*=-1,o*=-1):t===Ae&&(n*=-1,i*=-1),new mr(n,r,i,o)}rotate(t){const{x2:n,y2:r,x:i,y:o}=this,{x:s,y:a}=Z(0,0,n,r,t),{x:l,y:c}=Z(0,0,i,o,t);return new mr(s,a,l,c)}scale(t,n){const{x2:r,y2:i,x:o,y:s}=this,a=r*t,l=i*n,c=o*t,u=s*n;return new mr(a,l,c,u)}moveOnDelta(t,n){const{x2:r,y2:i,x:o,y:s}=this,a=r+t,l=i+n,c=o+t,u=s+n;return new mr(a,l,c,u)}toPathDataItem(){const{tag:t,x2:n,y2:r,x:i,y:o}=this;return{command:t,args:[n,r,i,o]}}toString(t=3){let{tag:n,x2:r,y2:i,x:o,y:s}=this;return[r,i,o,s]=[r,i,o,s].map(a=>Number.parseFloat(a.toFixed(t))),`${n} ${r} ${i}, ${o} ${s}`}}const Wv=({command:e,args:t})=>{if(e==="s"){const[n,r,i,o]=t;return new pr(n,r,i,o)}else if(e==="S"){const[n,r,i,o]=t;return new mr(n,r,i,o)}throw new Error("Unknown path 2d command")};class gr{constructor(t,n){I(this,"tag","t");this.dx=t,this.dy=n}mirror(t){let{dx:n,dy:r}=this;return t===ye?r*=-1:t===Ae&&(n*=-1),new gr(n,r)}rotate(t){const{dx:n,dy:r}=this,{x:i,y:o}=Z(0,0,n,r,t);return new gr(i,o)}scale(t,n){const{dx:r,dy:i}=this,o=r*t,s=i*n;return new gr(o,s)}moveOnDelta(t,n){const{dx:r,dy:i}=this,o=r+t,s=i+n;return new gr(o,s)}toPathDataItem(){const{tag:t,dx:n,dy:r}=this;return{command:t,args:[n,r]}}toString(t=3){let{tag:n,dx:r,dy:i}=this;return[r,i]=[r,i].map(o=>Number.parseFloat(o.toFixed(t))),`${n} ${r} ${i}`}}class yr{constructor(t,n){I(this,"tag","T");this.x=t,this.y=n}mirror(t){let{x:n,y:r}=this;return t===ye?r*=-1:t===Ae&&(n*=-1),new yr(n,r)}rotate(t){const{x:n,y:r}=this,{x:i,y:o}=Z(0,0,n,r,t);return new yr(i,o)}scale(t,n){const{x:r,y:i}=this,o=r*t,s=i*n;return new yr(o,s)}moveOnDelta(t,n){const{x:r,y:i}=this,o=r+t,s=i+n;return new yr(o,s)}toPathDataItem(){const{tag:t,x:n,y:r}=this;return{command:t,args:[n,r]}}toString(t=3){let{tag:n,x:r,y:i}=this;return[r,i]=[r,i].map(o=>Number.parseFloat(o.toFixed(t))),`${n} ${r} ${i}`}}const $v=({command:e,args:t})=>{if(e==="t"){const[n,r]=t;return new gr(n,r)}else if(e==="T"){const[n,r]=t;return new yr(n,r)}throw new Error("Unknown path 2d command")},ws=180,Ir=360;function Vv(e){if(e!==0&&e!==90&&e!==180&&e!==270)throw TypeError("value is not a rotation angle. Value should be equal to 0, 90, 180 or 270")}function Ap(e){return e===0||e===90||e===180||e===270}function Lp(e){const t=Lv(e),n=Xv(t),r=[];return n.forEach(({command:i,args:o})=>{if(i==="a"||i==="A"){const s=Dv({command:i,args:o});r.push(s);return}else if(i==="z"||i==="Z"){const s=zv({command:i});r.push(s);return}else if(i==="c"||i==="C"){const s=Mv({command:i,args:o});r.push(s);return}else if(i==="h"||i==="H"){const s=jv({command:i,args:o});r.push(s);return}else if(i==="l"||i==="L"){const s=Gv({command:i,args:o});r.push(s);return}else if(i==="m"||i==="M"){const s=Hv({command:i,args:o});r.push(s);return}else if(i==="q"||i==="Q"){const s=Uv({command:i,args:o});r.push(s);return}else if(i==="s"||i==="S"){const s=Wv({command:i,args:o});r.push(s);return}else if(i==="t"||i==="T"){const s=$v({command:i,args:o});r.push(s);return}else if(i==="v"||i==="V"){const s=Bv({command:i,args:o});r.push(s);return}console.error(`Unknown path 2d command ${i}`)}),r}function qv(e){const t=e.map(n=>n.toPathDataItem());return bv({pathData:t,precision:3})}function Xv(e){let t=[0,0];return e.map((r,i)=>{const{command:o,args:s}=r;switch(o){case"z":return r;case"Z":return r;case"m":if(i===0){const[a,l]=s,c={command:"m",args:[a,l]};return t=[a,l],c}else{const[a,l]=s,c={command:"m",args:[a,l]};return t=[t[0]+a,t[1]+l],c}case"M":if(i===0){const[a,l]=s,c={command:"m",args:[a,l]};return t=[a,l],c}else{const[a,l]=s,c={command:"m",args:[a-t[0],l-t[1]]};return t=[a,l],c}case"l":{const[a,l]=s,c={command:"l",args:[a,l]};return t=[t[0]+a,t[1]+l],c}case"L":{const[a,l]=s,c={command:"l",args:[a-t[0],l-t[1]]};return t=[a,l],c}case"h":{const[a]=s,l={command:"h",args:[a]};return t=[t[0]+a,t[1]],l}case"H":{const[a]=s,l={command:"h",args:[a-t[0]]};return t=[a,t[1]],l}case"v":{const[a]=s,l={command:"v",args:[a]};return t=[t[0],t[1]+a],l}case"V":{const[a]=s,l={command:"v",args:[a-t[1]]};return t=[t[0],a],l}case"c":{const[a,l]=s.slice(-2),c={command:"c",args:[s[0],s[1],s[2],s[3],a,l]};return t=[t[0]+a,t[1]+l],c}case"C":{const[a,l]=s.slice(-2),c={command:"c",args:[s[0]-t[0],s[1]-t[1],s[2]-t[0],s[3]-t[1],a-t[0],l-t[1]]};return t=[a,l],c}case"s":{const[a,l]=s.slice(-2),c={command:"s",args:[s[0],s[1],a,l]};return t=[t[0]+a,t[1]+l],c}case"S":{const[a,l]=s.slice(-2),c={command:"s",args:[s[0]-t[0],s[1]-t[1],a-t[0],l-t[1]]};return t=[a,l],c}case"q":{const[a,l]=s.slice(-2),c={command:"q",args:[s[0],s[1],a,l]};return t=[t[0]+a,t[1]+l],c}case"Q":{const[a,l]=s.slice(-2),c={command:"q",args:[s[0]-t[0],s[1]-t[1],a-t[0],l-t[1]]};return t=[a,l],c}case"t":{const[a,l]=s,c={command:"t",args:[a,l]};return t=[t[0]+a,t[1]+l],c}case"T":{const[a,l]=s,c={command:"t",args:[a-t[0],l-t[1]]};return t=[a,l],c}case"a":{const[a,l]=s.slice(-2),c={command:"a",args:[s[0],s[1],s[2],s[3],s[4],a,l]};return t=[t[0]+a,t[1]+l],c}case"A":{const[a,l]=s.slice(-2),c={command:"a",args:[s[0],s[1],s[2],s[3],s[4],a-t[0],l-t[1]]};return t=[a,l],c}default:throw new Error("unknown svg path d command")}})}const bl="m0 0l1 0",Yv=()=>Lp(bl),Zv="m0 0 .36-.002v-.063A.074.074 0 0 1 .4-.201a.073.073 0 0 1 .039.136v.063h.164v-.16a.095.095 0 1 1 .12 0v.16H1",Qv="m 0 0 h 0.258 v 0.084 a 0.098 0.098 90 1 0 0.104 0 v -0.084 h 0.218 v 0.213 a 0.127 0.127 90 1 0 0.159 0 v -0.213 h 0.261",Kv="m0 0 .379.001c.057 0 .012-.036-.041-.1s0-.093.038-.09h.248c.039-.003.092.027.038.09-.053.064-.098.1-.04.1L1 0",Jv="M0 0h.375c.025 0 .03.018.01.04a.175.175 0 1 0 .253 0C.617.018.622 0 .647 0H1",e0="M0 0s.507-.116.394.049C.34.126.343.208.395.262a.146.146 0 0 0 .22-.01C.66.192.655.124.603.036.522-.099 1 0 1 0",t0="m0 0s.372-.061.397-.067.043.014.017.04a.13.13 90 00-.046.1.13.13 90 00.132.13.13.13 90 00.086-.23c-.026-.025-.008-.045.017-.039s.397.066.397.066",n0="M0 0s.51-.235.396-.07C.344.005.345.097.398.15a.146.146 0 0 0 .22-.01C.663.083.656.005.605-.082.525-.218 1-.001 1-.001",r0="M0 0c.155-.015.427-.038.356.102S.366.25.5.248C.634.25.715.243.644.103S.846-.015 1 0",ye="X",Ae="Y",U={DIKE:"DIKE",DITCH_DOUBLE:"DITCH_DOUBLE",DITCH_WITH_ROUNDED_ANGLES:"DITCH_WITH_ROUNDED_ANGLES",DITCH:"DITCH",STRAIGHT_LINE:"STRAIGHT_LINE",TWO_PINS_BIGGER:"TWO_PINS_BIGGER",TWO_PINS:"TWO_PINS",UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_ERODED_HILL:"UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_ERODED_HILL",UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_HILL:"UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_HILL",UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_VULCAN:"UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_VULCAN",UNDERGROUND_RIVER_CIRCLE_BOTTOM:"UNDERGROUND_RIVER_CIRCLE_BOTTOM",UNDERGROUND_RIVER_WITH_ERODED_SHORES:"UNDERGROUND_RIVER_WITH_ERODED_SHORES",UNDERGROUND_RIVER:"UNDERGROUND_RIVER",SAW:"SAW"},i0=[U.DIKE,U.DITCH_DOUBLE,U.DITCH_WITH_ROUNDED_ANGLES,U.DITCH,U.STRAIGHT_LINE,U.TWO_PINS_BIGGER,U.TWO_PINS,U.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_ERODED_HILL,U.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_HILL,U.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_VULCAN,U.UNDERGROUND_RIVER_CIRCLE_BOTTOM,U.UNDERGROUND_RIVER_WITH_ERODED_SHORES,U.UNDERGROUND_RIVER,U.SAW],o0=[U.DITCH_DOUBLE,U.DITCH_WITH_ROUNDED_ANGLES,U.STRAIGHT_LINE,U.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_ERODED_HILL,U.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_HILL,U.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_VULCAN,U.UNDERGROUND_RIVER_CIRCLE_BOTTOM,U.UNDERGROUND_RIVER_WITH_ERODED_SHORES,U.UNDERGROUND_RIVER],s0=e=>{const t=a0(e);return Lp(t)},Vs=U.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_ERODED_HILL,a0=e=>{switch((!e||!i0.includes(e))&&console.error("Warning. Unsupported shape name. Unknown piece side shape name"),e){case U.DIKE:return pv;case U.DITCH_DOUBLE:return gv;case U.DITCH_WITH_ROUNDED_ANGLES:return yv;case U.DITCH:return mv;case U.STRAIGHT_LINE:return bl;case U.TWO_PINS_BIGGER:return Qv;case U.TWO_PINS:return Zv;case U.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_ERODED_HILL:return e0;case U.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_HILL:return t0;case U.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_VULCAN:return n0;case U.UNDERGROUND_RIVER_CIRCLE_BOTTOM:return Jv;case U.UNDERGROUND_RIVER_WITH_ERODED_SHORES:return r0;case U.UNDERGROUND_RIVER:return Kv;case U.SAW:return vv;default:console.error(`Unknown piece side shape Path2d ${e}. Fallback to use straight line for piece side shape`)}return bl},Dl="puzzleInformation",l0=100,Fp=()=>({completenessProgress:0,puzzleCompleted:!1,puzzleWasTouched:!1,puzzleWasTouchedAt:0,activePieceId:void 0}),Rp=()=>({tl:new O(0,0),br:new O(1,1)}),c0=()=>Vs,zl=()=>({name:"puzzle name",numberOfPiecesPerWidth:xo.numberOfPiecesPerWidth,numberOfPiecesPerHeight:xo.numberOfPiecesPerHeight,pieceWidth:50,connectionActivationAreaSideSizeFractionFromPieceSideSize:.2,imageSrc:xo.imageSrc,imageOriginalSize:Wc(),boundaryPoints:xo.boundaryPoints,piecesPositions:[],timeSpent:0,isTimerPaused:!1,...Fp(),pieceSideShapeName:c0(),isSidebarOpen:!0,canvasBackgroundColor:$s}),u0=()=>({...zl(),challengeId:Uc()}),Wc=()=>({width:0,height:0}),d0=()=>({name:"puzzle name",numberOfPiecesPerWidth:1,numberOfPiecesPerHeight:1,pieceWidth:1,connectionActivationAreaSideSizeFractionFromPieceSideSize:.5,imageSrc:"no-image-src",imageOriginalSize:Wc(),boundaryPoints:Rp(),piecesPositions:[],timeSpent:0,challengeId:"no-challenge-id",pieceSideShapeName:Vs,isSidebarOpen:!0,canvasBackgroundColor:$s}),f0=()=>{var e;try{const t=d0(),n=window==null?void 0:window.localStorage.getItem(Dl);if(typeof n!="string")return;const i=JSON.parse(n,function(a,l){if(typeof t[a]<"u")return typeof l!=typeof t[a]?void 0:l;if(a==="tl"||a==="br")return typeof l!=typeof t.boundaryPoints[a]?void 0:l;if(a==="id")return typeof l!="string"?void 0:l;if(a==="position")return typeof l!="object"?void 0:l;if(a==="x"||a==="y")return Number.isFinite(l)?l:void 0;if(a==="width"||a==="height")return Number.isFinite(l)?l:void 0;if(typeof a=="string"&&Number.isFinite(Number.parseInt(a)))return l;if(a==="")return l});if((!i.boundaryPoints||!i.boundaryPoints.tl||!i.boundaryPoints.br||!Number.isFinite(i.boundaryPoints.tl.x)||!Number.isFinite(i.boundaryPoints.tl.y)||!Number.isFinite(i.boundaryPoints.br.x)||!Number.isFinite(i.boundaryPoints.br.y))&&(i.boundaryPoints=Rp()),(e=i.piecesPositions)!=null&&e.length&&(i.piecesPositions=i.piecesPositions.filter(({id:a,position:{x:l,y:c}})=>typeof a=="string"&&Number.isFinite(l)&&Number.isFinite(c)),i.piecesPositions.length||(i.piecesPositions=[])),(!i.imageOriginalSize||!i.imageOriginalSize.width||!i.imageOriginalSize.height||!Number.isFinite(i.imageOriginalSize.width)||!Number.isFinite(i.imageOriginalSize.height))&&(i.imageOriginalSize=Wc()),Object.keys(t).filter(a=>typeof i[a]>"u").length)return;const s=i;return s.challengeId?{...zl(),...s}:{...zl(),...s,challengeId:Uc()}}catch(t){console.error("Error. Impossible to load puzzle data from localStorage",t)}},h0=()=>f0()||u0(),bp=y.createContext(null),Dp=y.createContext(()=>{});function p0(e,t){switch(t.type){case"set-puzzle-name":return{...e,name:t.name};case"init-new-challenge-id":{const n=t.params,r=Uc();return{...e,challengeId:r,piecesPositions:[],timeSpent:0,...Fp(),...n}}case"set-challenge-completeness-progress":return{...e,completenessProgress:t.completenessProgress,puzzleCompleted:t.completenessProgress===l0};case"set-puzzle-was-touched":return{...e,puzzleWasTouched:!0,puzzleWasTouchedAt:Date.now(),isTimerPaused:!1};case"set-active-piece-id":return{...e,activePieceId:t.pieceId};case"set-is-sidebar-open":return{...e,isSidebarOpen:t.isSidebarOpen};case"toggle-sidebar-visibility-state":return{...e,isSidebarOpen:!e.isSidebarOpen};case"set-puzzle-piece-was-released":return{...e,piecesPositions:e.piecesPositions.filter(({id:n})=>t.piecePositionData.id!==n).concat([{id:t.piecePositionData.id,position:{x:t.piecePositionData.position.x,y:t.piecePositionData.position.y}}])};case"set-puzzle-group-of-pieces-were-released":{const n=t.groupOfPiecesPositionData.map(o=>({id:o.id,position:{x:o.position.x,y:o.position.y}})),i=e.piecesPositions.filter(({id:o})=>!n.find(s=>s.id===o));return{...e,piecesPositions:i.concat(n)}}case"set-solving-puzzle-time-spent":return{...e,timeSpent:t.timeSpent};case"set-solving-puzzle-time-spent-by-add-time-delta":return{...e,timeSpent:e.timeSpent+t.timeDelta};case"set-solving-puzzle-timer-state":return{...e,isTimerPaused:t.isTimerPaused};case"set-canvas-background-color":return{...e,canvasBackgroundColor:t.color};default:throw Error(`Unknown action in ${jc()}: ${t==null?void 0:t.type}`)}}const m0=e=>{const t=e;return t.boundaryPoints={tl:{x:e.boundaryPoints.tl.x,y:e.boundaryPoints.tl.y},br:{x:e.boundaryPoints.br.x,y:e.boundaryPoints.br.y}},t},g0=({children:e})=>{const[t,n]=y.useReducer(p0,null,h0),r=y.useMemo(()=>{const{name:i,numberOfPiecesPerWidth:o,numberOfPiecesPerHeight:s,pieceWidth:a,connectionActivationAreaSideSizeFractionFromPieceSideSize:l,challengeId:c,imageSrc:u,imageOriginalSize:d,boundaryPoints:f,piecesPositions:p,timeSpent:w,pieceSideShapeName:S,isSidebarOpen:P,canvasBackgroundColor:g}=t;if(o&&s&&a&&l&&u&&c&&S)return{name:i,challengeId:c,numberOfPiecesPerWidth:o,numberOfPiecesPerHeight:s,pieceWidth:a,connectionActivationAreaSideSizeFractionFromPieceSideSize:l,imageSrc:u,imageOriginalSize:d,boundaryPoints:f,piecesPositions:p,timeSpent:w,pieceSideShapeName:S,isSidebarOpen:P,canvasBackgroundColor:g}},[t]);return y.useEffect(()=>{try{if(!r)return;const i=m0(r),o=JSON.stringify(i),s=window==null?void 0:window.localStorage.getItem(Dl);if(o===s)return;window==null||window.localStorage.setItem(Dl,o)}catch(i){console.error("failure of updating puzzle information in localStorage",i)}},[r]),h.jsx(bp.Provider,{value:t,children:h.jsx(Dp.Provider,{value:n,children:e})})};function Ke(){const e=y.useContext(bp);if(!e)throw new Error("usePuzzleInformation must be used within a PuzzleInformationProvider");return e}function Xi(){const e=y.useContext(Dp);if(e===void 0)throw new Error("usePuzzleInformationDispatch must be used within a PuzzleInformationProvider");return e}const y0=y.memo(function({children:t}){return h.jsx(uv,{children:h.jsx(g0,{children:h.jsx(ev,{children:t})})})}),vr=(e=!1)=>{const[t,n]=y.useState(e),r=y.useCallback(()=>n(!0),[n]),i=y.useCallback(()=>n(!1),[n]);return{isVisible:t,show:r,hide:i}},v0="_CanvasContainer_g3wcp_1",w0="_Canvas_g3wcp_1",x0="_FloatingInfoLabel_g3wcp_14",Ea={CanvasContainer:v0,Canvas:w0,FloatingInfoLabel:x0},Rr=0,S0=({elementRef:e})=>{const[t,n]=y.useState(!1),r=y.useCallback(s=>{(s==null?void 0:s.button)===Rr&&n(!0)},[n]),i=y.useCallback(s=>{(s==null?void 0:s.button)===Rr&&n(!1)},[n]),o=y.useCallback(()=>{n(!1)},[n]);return y.useEffect(()=>{const s=e==null?void 0:e.current;if(!s)return;const a={passive:!0};return s.addEventListener("mousedown",r,a),s.addEventListener("mouseup",i,a),s.addEventListener("mouseleave",o,a),()=>{s.removeEventListener("mousedown",r,a),s.removeEventListener("mouseup",i,a),s.removeEventListener("mouseleave",o,a)}},[e,r,i,o]),t},P0=({elementRef:e})=>{const[t,n]=y.useState();return y.useEffect(()=>{const r=e==null?void 0:e.current;if(!r)return;const i=o=>{const s=e==null?void 0:e.current;if(!s)return;const a=qi(o,s);n(a)};return r.addEventListener("mousemove",i),()=>{r.removeEventListener("mousemove",i)}},[e,n]),t},_0=e=>e.filter(t=>t).join(" "),ae=_0,C0="_MousePositionLabel_14y0d_1",E0="_MousePositionLabelHeader_14y0d_8",I0="_TextForLightBackground_14y0d_12",Po={MousePositionLabel:C0,MousePositionLabelHeader:E0,TextForLightBackground:I0},T0=y.forwardRef(function(t,n){const r=y.useMemo(()=>typeof n=="function"?null:n,[n]),i=S0({elementRef:r}),o=P0({elementRef:r}),{canvasBackgroundColor:s}=Ke(),a=Ep[s]==="black";return h.jsxs("div",{className:ae([Po.MousePositionLabel,a&&Po.TextForLightBackground]),children:[h.jsxs("label",{className:Po.MousePositionLabelHeader,id:"pointer-left-button-state-label",children:["primary mouse button:"," "]}),h.jsx("span",{role:"note","aria-labelledby":"pointer-left-button-state-label",children:i?"pressed":"free"}),h.jsxs("label",{className:Po.MousePositionLabelHeader,id:"pointer-position-label",children:["mouse position:"," "]}),h.jsxs("span",{role:"note","aria-labelledby":"pointer-position-label",children:["x: ",(o==null?void 0:o.x)||0,"px y: ",(o==null?void 0:o.y)||0,"px"]})]})}),k0="_Container_1a5lb_1",N0="_Header_1a5lb_6",O0="_Message_1a5lb_12",A0="_Spacer_1a5lb_17",_o={Container:k0,Header:N0,Message:O0,Spacer:A0},L0="_Notification_1nb1j_1",F0={Notification:L0},R0="_ActionButton_1na3u_1",b0="_FluidOnMobile_1na3u_16",D0="_ActionButtonText_1na3u_21",z0="_DoubleSized_1na3u_26",M0="_ModalActionButton_1na3u_31",B0="_SidebarActionButton_1na3u_36",j0="_NoBackground_1na3u_49",G0="_NoBorder_1na3u_53",H0="_PrimaryButton_1na3u_66",U0="_ActiveButton_1na3u_80",gt={ActionButton:R0,FluidOnMobile:b0,ActionButtonText:D0,DoubleSized:z0,ModalActionButton:M0,SidebarActionButton:B0,NoBackground:j0,NoBorder:G0,PrimaryButton:H0,ActiveButton:U0};function W0(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xs.apply(null,arguments)}function Ml(e,t){return Ml=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ml(e,t)}function $0(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ml(e,t)}function Ia(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var pd=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,V0=/\\([\u000b\u0020-\u00ff])/g,q0=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,X0=Y0;function Y0(e){if(!e)throw new TypeError("argument string is required");var t=typeof e=="object"?Z0(e):e;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var n=t.indexOf(";"),r=n!==-1?t.slice(0,n).trim():t.trim();if(!q0.test(r))throw new TypeError("invalid media type");var i=new Q0(r.toLowerCase());if(n!==-1){var o,s,a;for(pd.lastIndex=n;s=pd.exec(t);){if(s.index!==n)throw new TypeError("invalid parameter format");n+=s[0].length,o=s[1].toLowerCase(),a=s[2],a.charCodeAt(0)===34&&(a=a.slice(1,-1),a.indexOf("\\")!==-1&&(a=a.replace(V0,"$1"))),i.parameters[o]=a}if(n!==t.length)throw new TypeError("invalid parameter format")}return i}function Z0(e){var t;if(typeof e.getHeader=="function"?t=e.getHeader("content-type"):typeof e.headers=="object"&&(t=e.headers&&e.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function Q0(e){this.parameters=Object.create(null),this.type=e}var Un=new Map,zp=function(t){return t.cloneNode(!0)},md=function(){return window.location.protocol==="file:"},Mp=function(t,n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){try{if(!/\.svg/i.test(t)&&i.readyState===2){var o=i.getResponseHeader("Content-Type");if(!o)throw new Error("Content type not found");var s=X0(o).type;if(!(s==="image/svg+xml"||s==="text/plain"))throw new Error("Invalid content type: ".concat(s))}if(i.readyState===4){if(i.status===404||i.responseXML===null)throw new Error(md()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+t);if(i.status===200||md()&&i.status===0)r(null,i);else throw new Error("There was a problem injecting the SVG: "+i.status+" "+i.statusText)}}catch(a){if(i.abort(),a instanceof Error)r(a,i);else throw a}},i.open("GET",t),i.withCredentials=n,i.overrideMimeType&&i.overrideMimeType("text/xml"),i.send()},Qt={},gd=function(t,n){Qt[t]=Qt[t]||[],Qt[t].push(n)},K0=function(t){for(var n=function(s,a){setTimeout(function(){if(Array.isArray(Qt[t])){var l=Un.get(t),c=Qt[t][s];l instanceof SVGSVGElement&&c(null,zp(l)),l instanceof Error&&c(l),s===Qt[t].length-1&&delete Qt[t]}},0)},r=0,i=Qt[t].length;r<i;r++)n(r)},J0=function(t,n,r){if(Un.has(t)){var i=Un.get(t);if(i===void 0){gd(t,r);return}if(i instanceof SVGSVGElement){r(null,zp(i));return}}Un.set(t,void 0),gd(t,r),Mp(t,n,function(o,s){var a;o?Un.set(t,o):((a=s.responseXML)===null||a===void 0?void 0:a.documentElement)instanceof SVGSVGElement&&Un.set(t,s.responseXML.documentElement),K0(t)})},ew=function(t,n,r){Mp(t,n,function(i,o){var s;i?r(i):((s=o.responseXML)===null||s===void 0?void 0:s.documentElement)instanceof SVGSVGElement&&r(null,o.responseXML.documentElement)})},tw=0,nw=function(){return++tw},yt=[],yd={},rw="http://www.w3.org/2000/svg",Ta="http://www.w3.org/1999/xlink",vd=function(t,n,r,i,o,s,a){var l=t.getAttribute("data-src")||t.getAttribute("src");if(!l){a(new Error("Invalid data-src or src attribute"));return}if(yt.indexOf(t)!==-1){yt.splice(yt.indexOf(t),1),t=null;return}yt.push(t),t.setAttribute("src","");var c=i?J0:ew;c(l,o,function(u,d){if(!d){yt.splice(yt.indexOf(t),1),t=null,a(u);return}var f=t.getAttribute("id");f&&d.setAttribute("id",f);var p=t.getAttribute("title");p&&d.setAttribute("title",p);var w=t.getAttribute("width");w&&d.setAttribute("width",w);var S=t.getAttribute("height");S&&d.setAttribute("height",S);var P=Array.from(new Set(Ia(Ia(Ia([],(d.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(t.getAttribute("class")||"").split(" "),!0))).join(" ").trim();d.setAttribute("class",P);var g=t.getAttribute("style");g&&d.setAttribute("style",g),d.setAttribute("data-src",l);var m=[].filter.call(t.attributes,function(L){return/^data-\w[\w-]*$/.test(L.name)});if(Array.prototype.forEach.call(m,function(L){L.name&&L.value&&d.setAttribute(L.name,L.value)}),r){var v={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},x,_,T,C,E;Object.keys(v).forEach(function(L){x=L,T=v[L],_=d.querySelectorAll(x+"[id]");for(var z=function(Y,ue){C=_[Y].id,E=C+"-"+nw();var Se;Array.prototype.forEach.call(T,function(pn){Se=d.querySelectorAll("["+pn+'*="'+C+'"]');for(var jt=0,re=Se.length;jt<re;jt++){var Ee=Se[jt].getAttribute(pn);Ee&&!Ee.match(new RegExp('url\\("?#'+C+'"?\\)'))||Se[jt].setAttribute(pn,"url(#"+E+")")}});for(var he=d.querySelectorAll("[*|href]"),We=[],Mt=0,Bn=he.length;Mt<Bn;Mt++){var jn=he[Mt].getAttributeNS(Ta,"href");jn&&jn.toString()==="#"+_[Y].id&&We.push(he[Mt])}for(var Bt=0,_t=We.length;Bt<_t;Bt++)We[Bt].setAttributeNS(Ta,"href","#"+E);_[Y].id=E},F=0,M=_.length;F<M;F++)z(F)})}d.removeAttribute("xmlns:a");for(var k=d.querySelectorAll("script"),N=[],R,j,B=0,H=k.length;B<H;B++)j=k[B].getAttribute("type"),(!j||j==="application/ecmascript"||j==="application/javascript"||j==="text/javascript")&&(R=k[B].innerText||k[B].textContent,R&&N.push(R),d.removeChild(k[B]));if(N.length>0&&(n==="always"||n==="once"&&!yd[l])){for(var V=0,W=N.length;V<W;V++)new Function(N[V])(window);yd[l]=!0}var Q=d.querySelectorAll("style");if(Array.prototype.forEach.call(Q,function(L){L.textContent+=""}),d.setAttribute("xmlns",rw),d.setAttribute("xmlns:xlink",Ta),s(d),!t.parentNode){yt.splice(yt.indexOf(t),1),t=null,a(new Error("Parent node is null"));return}t.parentNode.replaceChild(d,t),yt.splice(yt.indexOf(t),1),t=null,a(null,d)})},iw=function(t,n){var r=n===void 0?{}:n,i=r.afterAll,o=i===void 0?function(){}:i,s=r.afterEach,a=s===void 0?function(){}:s,l=r.beforeEach,c=l===void 0?function(){}:l,u=r.cacheRequests,d=u===void 0?!0:u,f=r.evalScripts,p=f===void 0?"never":f,w=r.httpRequestWithCredentials,S=w===void 0?!1:w,P=r.renumerateIRIElements,g=P===void 0?!0:P;if(t&&"length"in t)for(var m=0,v=0,x=t.length;v<x;v++)vd(t[v],p,g,d,S,c,function(_,T){a(_,T),t&&"length"in t&&t.length===++m&&o(m)});else t?vd(t,p,g,d,S,c,function(_,T){a(_,T),o(1),t=null}):o(0)},Bp={exports:{}},ow="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",sw=ow,aw=sw;function jp(){}function Gp(){}Gp.resetWarningCache=jp;var lw=function(){function e(r,i,o,s,a,l){if(l!==aw){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Gp,resetWarningCache:jp};return n.PropTypes=n,n};Bp.exports=lw();var pe=Bp.exports,cw=function(t){var n=(t==null?void 0:t.ownerDocument)||document;return n.defaultView||window},uw=function(t,n){for(var r in t)if(!(r in n))return!0;for(var i in n)if(t[i]!==n[i])return!0;return!1},dw=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],Co="http://www.w3.org/2000/svg",wd="http://www.w3.org/1999/xlink",qs=function(e){function t(){for(var r,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o))||this,r.initialState={hasError:!1,isLoading:!0},r.state=r.initialState,r._isMounted=!1,r.reactWrapper=void 0,r.nonReactWrapper=void 0,r.refCallback=function(a){r.reactWrapper=a},r}$0(t,e);var n=t.prototype;return n.renderSVG=function(){var i=this;if(this.reactWrapper instanceof cw(this.reactWrapper).Node){var o=this.props,s=o.desc,a=o.evalScripts,l=o.httpRequestWithCredentials,c=o.renumerateIRIElements,u=o.src,d=o.title,f=o.useRequestCache,p=this.props.onError,w=this.props.beforeInjection,S=this.props.afterInjection,P=this.props.wrapper,g,m;P==="svg"?(g=document.createElementNS(Co,P),g.setAttribute("xmlns",Co),g.setAttribute("xmlns:xlink",wd),m=document.createElementNS(Co,P)):(g=document.createElement(P),m=document.createElement(P)),g.appendChild(m),m.dataset.src=u,this.nonReactWrapper=this.reactWrapper.appendChild(g);var v=function(C){if(i.removeSVG(),!i._isMounted){p(C);return}i.setState(function(){return{hasError:!0,isLoading:!1}},function(){p(C)})},x=function(C,E){if(C){v(C);return}i._isMounted&&i.setState(function(){return{isLoading:!1}},function(){try{S(E)}catch(k){v(k)}})},_=function(C){if(C.setAttribute("role","img"),s){var E=C.querySelector(":scope > desc");E&&C.removeChild(E);var k=document.createElement("desc");k.innerHTML=s,C.prepend(k)}if(d){var N=C.querySelector(":scope > title");N&&C.removeChild(N);var R=document.createElement("title");R.innerHTML=d,C.prepend(R)}try{w(C)}catch(j){v(j)}};iw(m,{afterEach:x,beforeEach:_,cacheRequests:f,evalScripts:a,httpRequestWithCredentials:l,renumerateIRIElements:c})}},n.removeSVG=function(){var i;(i=this.nonReactWrapper)!=null&&i.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},n.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},n.componentDidUpdate=function(i){var o=this;uw(xs({},i),this.props)&&this.setState(function(){return o.initialState},function(){o.removeSVG(),o.renderSVG()})},n.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},n.render=function(){var i=this.props;i.afterInjection,i.beforeInjection,i.desc,i.evalScripts;var o=i.fallback;i.httpRequestWithCredentials;var s=i.loading;i.renumerateIRIElements,i.src,i.title,i.useRequestCache;var a=i.wrapper,l=W0(i,dw),c=a;return y.createElement(c,xs({},l,{ref:this.refCallback},a==="svg"?{xmlns:Co,xmlnsXlink:wd}:{}),this.state.isLoading&&s&&y.createElement(s,null),this.state.hasError&&o&&y.createElement(o,null))},t}(y.Component);qs.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};qs.propTypes={afterInjection:pe.func,beforeInjection:pe.func,desc:pe.string,evalScripts:pe.oneOf(["always","once","never"]),fallback:pe.oneOfType([pe.func,pe.object,pe.string]),httpRequestWithCredentials:pe.bool,loading:pe.oneOfType([pe.func,pe.object,pe.string]),onError:pe.func,renumerateIRIElements:pe.bool,src:pe.string.isRequired,title:pe.string,useRequestCache:pe.bool,wrapper:pe.oneOf(["div","span","svg"])};const fw="_Icon_obh33_1",hw="_DoubleSize_obh33_6",xd={Icon:fw,DoubleSize:hw},pw=y.memo(function({iconName:t="xmark",size:n,...r}){const i=`./assets/fa-icons/${t}.svg`,o=ae([xd.Icon,n==="double"&&xd.DoubleSize]);return h.jsx(qs,{className:o,src:i,...r})}),we=y.memo(function({id:t,iconName:n,onlyIcon:r=!1,title:i,text:o,name:s,hidden:a=!1,type:l="button",doubleSized:c=!1,disabled:u,noBackground:d,noBorder:f,iconSize:p,isActive:w=!1,isPrimary:S=!1,isFluidOnMobile:P=!1,isModalButton:g=!1,isSidebarButton:m=!1,style:v,onClick:x,children:_,...T}){const C=y.useCallback(()=>{typeof x=="function"&&x()},[x]),E={id:t,className:ae([gt.ActionButton,c&&gt.DoubleSized,d&&gt.NoBackground,f&&gt.NoBorder,w&&gt.ActiveButton,S&&gt.PrimaryButton,P&&gt.FluidOnMobile,g&&gt.ModalActionButton,m&&gt.SidebarActionButton]),hidden:a,disabled:u,type:l||"button",style:v};return h.jsxs("button",{onClick:C,title:i||o,"aria-label":i||o,name:s,...E,...T,children:[n&&h.jsx(pw,{iconName:n,size:p}),!r&&o&&h.jsx("span",{className:gt.ActionButtonText,children:o}),_]})}),mw="_CloseIcon_1muhl_1",gw="_CloseIconOutsideOfModalBody_1muhl_8",Sd={CloseIcon:mw,CloseIconOutsideOfModalBody:gw},Bl=({isCloseButtonOutsideOfModalBody:e=!1,onClick:t})=>h.jsx("div",{className:ae([Sd.CloseIcon,e&&Sd.CloseIconOutsideOfModalBody]),children:h.jsx(we,{iconName:"xmark",noBackground:!0,noBorder:!0,onClick:t,iconSize:"double","aria-label":"close"})}),yw=({onHide:e,children:t,ariaRole:n="note",ariaLabel:r})=>{const i={};return r&&(i.role=n,i["aria-label"]=r),h.jsxs("div",{className:F0.Notification,...i,children:[t,typeof e=="function"&&h.jsx(Bl,{onClick:e})]})},vw=({onHide:e})=>h.jsx(yw,{onHide:e,ariaRole:"note",ariaLabel:"puzzle was solved",children:h.jsxs("div",{className:_o.Container,role:"alert","aria-label":"puzzle was solved",children:[h.jsx("div",{className:_o.Header,children:"Congratulation!"}),h.jsx("div",{className:_o.Spacer,children:" "}),h.jsx("div",{className:_o.Message,children:"Puzzle was solved"})]})}),ww="_ZoomLabel_35bt0_1",xw="_TextForLightBackground_35bt0_6",Pd={ZoomLabel:ww,TextForLightBackground:xw},Sw=()=>{const{scale:e}=vp(),{canvasBackgroundColor:t}=Ke(),n=e.toFixed(2),r=Ep[t]==="black";return h.jsxs("div",{className:ae([Pd.ZoomLabel,r&&Pd.TextForLightBackground]),children:[h.jsx("label",{id:"zoom-label",children:"zoom: "}),h.jsxs("span",{role:"note","aria-labelledby":"zoom-label",children:[n,"x"]})]})},Pw=y.forwardRef(function(t,n){const{isVisible:r,show:i,hide:o}=vr(!1),{puzzleCompleted:s}=Ke(),{debugSettingsShouldDisplayPointerInformation:a}=Dt();return y.useEffect(()=>{s?i():o()},[o,i,s]),h.jsxs("div",{className:Ea.CanvasContainer,children:[h.jsx("canvas",{ref:n,id:"canvas",className:Ea.Canvas,role:"application","aria-label":"puzzle view"}),r&&h.jsx(vw,{onHide:o}),h.jsxs("div",{className:Ea.FloatingInfoLabel,children:[a&&h.jsx(T0,{ref:n}),h.jsx(Sw,{})]})]})}),_w="_CanvasControlButtons_bu7vx_1",Cw="_List_bu7vx_7",_d={CanvasControlButtons:_w,List:Cw},Ew=y.memo(function({isVisibleSidePanel:t=!1,isFullscreenModeActive:n=!1,onToggleSidePanel:r,onToggleFullscreenMode:i,onZoomIn:o,onZoomOut:s,onResetZoom:a,onShowAllPieces:l}){const c=t?"xmark":"bars",u=t?"hide side panel":"show side panel",d=y.useCallback(()=>i&&i(),[i]),f=n?"compress":"expand",p=n?"exit full screen":"enter full screen";return h.jsx("div",{className:_d.CanvasControlButtons,role:"toolbar","aria-label":"puzzle controls",children:h.jsxs("ul",{className:_d.List,children:[h.jsx("li",{children:h.jsx(we,{doubleSized:!0,iconName:"globe",iconSize:"double",onlyIcon:!0,text:"show all pieces",onClick:l})}),h.jsx("li",{children:h.jsx(we,{doubleSized:!0,title:"reset zoom",name:"reset-zoom",text:"1:1",onClick:a})}),h.jsx("li",{children:h.jsx(we,{doubleSized:!0,iconName:"minus",iconSize:"double",onlyIcon:!0,text:"zoom out",onClick:s})}),h.jsx("li",{children:h.jsx(we,{doubleSized:!0,iconName:"plus",iconSize:"double",onlyIcon:!0,text:"zoom in",onClick:o})}),h.jsx("li",{children:h.jsx(we,{doubleSized:!0,iconName:f,iconSize:"double",onlyIcon:!0,text:p,onClick:d})}),h.jsx("li",{children:h.jsx(we,{doubleSized:!0,iconName:c,iconSize:"double",onlyIcon:!0,text:u,onClick:r})})]})})});function Bi(e,t,n=Math.random){return e=Math.ceil(e),t=Math.floor(t),Math.floor(n()*(t-e+1))+e}function Iw(e,t){return new e(t)}class Yi{constructor({id:t}){I(this,"id");this.id=t}}const Tw=(e=0,t=0)=>`${e}:${t}`;class G extends Yi{constructor(t,n,r){const i=r||Tw(t,n);super({id:i}),this.x=t,this.y=n}static create({x:t,y:n,id:r}){return new this(t,n,r)}static clone(t){return G.create({x:t.x,y:t.y})}static getPointAtZero(){return new G(0,0)}static isPointInAreaWithCenterPointAndAreaSideSize(t,n,r=0){const i=n.x,o=n.y,s=r/2,a=t.x,l=t.y,c=new G(i-s,o-s),u=new G(i+s,o+s);return!(a<c.x||a>u.x||l<c.y||l>u.y)}static isPointInAreaByCornerPoints(t,n,r){const i=t.x,o=t.y,s=n,a=r;return!(i<s.x||i>a.x||o<s.y||o>a.y)}static addDelta(t,n){return new G(t.x+n.dx,t.y+n.dy)}}const kw=e=>{const t=new G(e.x,e.y),n=new G(e.x+e.width-1,e.y+e.height-1),r=Bi(t.x,n.x),i=Bi(t.y,n.y);return new G(r,i)};let Cd=0;const Nw=()=>(Cd++,`area_${Cd}`);let vi=class Hp extends Yi{constructor(t=0,n=0,r=1,i=1,o){const s=o||Nw();super({id:s}),this.x=t,this.y=n,this.width=r,this.height=i}static create({x:t=0,y:n=0,width:r=1,height:i=1,id:o}){return new Hp(t,n,r,i,o)}static getBoundaryCornerPoints(t,n){if(typeof t!="object"||!(t instanceof G))throw new Error("Error. Parameter areaCenterPoint should be an instance of Point");if(typeof n!="number"||!Number.isFinite(n))throw new Error("Error. Parameter areaCenterPoint should be a finite number");const r=t.x,i=t.y,o=n/2,s=new G(r-o,i-o),a=new G(r+o,i+o);return{p0:s,p2:a}}};var $c={exports:{}};$c.exports;(function(e){(function(t,n,r){function i(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function o(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function s(l,c){var u=new i(l),d=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&o(d,u),f.state=function(){return o(u,{})}),f}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=s:this.alea=s})(bn,e)})($c);var Ow=$c.exports,Vc={exports:{}};Vc.exports;(function(e){(function(t,n,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function s(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,w=(f+p)/(1<<21);while(w===0);return w},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=s:this.xor128=s})(bn,e)})(Vc);var Aw=Vc.exports,qc={exports:{}};qc.exports;(function(e){(function(t,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function s(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,w=(f+p)/(1<<21);while(w===0);return w},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=s:this.xorwow=s})(bn,e)})(qc);var Lw=qc.exports,Xc={exports:{}};Xc.exports;(function(e){(function(t,n,r){function i(a){var l=this;l.next=function(){var u=l.x,d=l.i,f,p;return f=u[d],f^=f>>>7,p=f^f<<24,f=u[d+1&7],p^=f^f>>>10,f=u[d+3&7],p^=f^f>>>3,f=u[d+4&7],p^=f^f<<7,f=u[d+7&7],f=f^f<<13,p^=f^f<<9,u[d]=p,l.i=d+1&7,p};function c(u,d){var f,p=[];if(d===(d|0))p[0]=d;else for(d=""+d,f=0;f<d.length;++f)p[f&7]=p[f&7]<<15^d.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?p[7]=-1:p[f],u.x=p,u.i=0,f=256;f>0;--f)u.next()}c(l,a)}function o(a,l){return l.x=a.x.slice(),l.i=a.i,l}function s(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,w=(f+p)/(1<<21);while(w===0);return w},d.int32=c.next,d.quick=d,u&&(u.x&&o(u,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=s:this.xorshift7=s})(bn,e)})(Xc);var Fw=Xc.exports,Yc={exports:{}};Yc.exports;(function(e){(function(t,n,r){function i(a){var l=this;l.next=function(){var u=l.w,d=l.X,f=l.i,p,w;return l.w=u=u+1640531527|0,w=d[f+34&127],p=d[f=f+1&127],w^=w<<13,p^=p<<17,w^=w>>>15,p^=p>>>12,w=d[f]=w^p,l.i=f,w+(u^u>>>16)|0};function c(u,d){var f,p,w,S,P,g=[],m=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,m=Math.max(m,d.length)),w=0,S=-32;S<m;++S)d&&(p^=d.charCodeAt((S+32)%d.length)),S===0&&(P=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,S>=0&&(P=P+1640531527|0,f=g[S&127]^=p+P,w=f==0?w+1:0);for(w>=128&&(g[(d&&d.length||0)&127]=-1),w=127,S=4*128;S>0;--S)p=g[w+34&127],f=g[w=w+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,g[w]=p^f;u.w=P,u.X=g,u.i=w}c(l,a)}function o(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function s(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,w=(f+p)/(1<<21);while(w===0);return w},d.int32=c.next,d.quick=d,u&&(u.X&&o(u,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=s:this.xor4096=s})(bn,e)})(Yc);var Rw=Yc.exports,Zc={exports:{}};Zc.exports;(function(e){(function(t,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.b,f=l.c,p=l.d,w=l.a;return d=d<<25^d>>>7^f,f=f-p|0,p=p<<24^p>>>8^w,w=w-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-p|0,l.d=p<<16^f>>>16^w,l.a=w-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function o(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function s(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,w=(f+p)/(1<<21);while(w===0);return w},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=s:this.tychei=s})(bn,e)})(Zc);var bw=Zc.exports,Up={exports:{}};const Dw={},zw=Object.freeze(Object.defineProperty({__proto__:null,default:Dw},Symbol.toStringTag,{value:"Module"})),Mw=Sm(zw);(function(e){(function(t,n,r){var i=256,o=6,s=52,a="random",l=r.pow(i,o),c=r.pow(2,s),u=c*2,d=i-1,f;function p(x,_,T){var C=[];_=_==!0?{entropy:!0}:_||{};var E=g(P(_.entropy?[x,v(n)]:x??m(),3),C),k=new w(C),N=function(){for(var R=k.g(o),j=l,B=0;R<c;)R=(R+B)*i,j*=i,B=k.g(1);for(;R>=u;)R/=2,j/=2,B>>>=1;return(R+B)/j};return N.int32=function(){return k.g(4)|0},N.quick=function(){return k.g(4)/4294967296},N.double=N,g(v(k.S),n),(_.pass||T||function(R,j,B,H){return H&&(H.S&&S(H,k),R.state=function(){return S(k,{})}),B?(r[a]=R,j):R})(N,E,"global"in _?_.global:this==r,_.state)}function w(x){var _,T=x.length,C=this,E=0,k=C.i=C.j=0,N=C.S=[];for(T||(x=[T++]);E<i;)N[E]=E++;for(E=0;E<i;E++)N[E]=N[k=d&k+x[E%T]+(_=N[E])],N[k]=_;(C.g=function(R){for(var j,B=0,H=C.i,V=C.j,W=C.S;R--;)j=W[H=d&H+1],B=B*i+W[d&(W[H]=W[V=d&V+j])+(W[V]=j)];return C.i=H,C.j=V,B})(i)}function S(x,_){return _.i=x.i,_.j=x.j,_.S=x.S.slice(),_}function P(x,_){var T=[],C=typeof x,E;if(_&&C=="object")for(E in x)try{T.push(P(x[E],_-1))}catch{}return T.length?T:C=="string"?x:x+"\0"}function g(x,_){for(var T=x+"",C,E=0;E<T.length;)_[d&E]=d&(C^=_[d&E]*19)+T.charCodeAt(E++);return v(_)}function m(){try{var x;return f&&(x=f.randomBytes)?x=x(i):(x=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(x)),v(x)}catch{var _=t.navigator,T=_&&_.plugins;return[+new Date,t,T,t.screen,v(n)]}}function v(x){return String.fromCharCode.apply(0,x)}if(g(r.random(),n),e.exports){e.exports=p;try{f=Mw}catch{}}else r["seed"+a]=p})(typeof self<"u"?self:bn,[],Math)})(Up);var Bw=Up.exports,jw=Ow,Gw=Aw,Hw=Lw,Uw=Fw,Ww=Rw,$w=bw,Mn=Bw;Mn.alea=jw;Mn.xor128=Gw;Mn.xorwow=Hw;Mn.xorshift7=Uw;Mn.xor4096=Ww;Mn.tychei=$w;var Vw=Mn;const qw=ef(Vw);let Ed,ka;const Xw=e=>qw(e),Yw=e=>((e!==Ed||!ka)&&(ka=Xw(e),Ed=e),ka),Id="top",Td="right",kd="bottom",Nd="left",Zw={[Id]:kd,[Td]:Nd,[kd]:Id,[Nd]:Td},Qw=e=>{const t=Zw[e];if(!t)throw new Error(`Error. Opposite pieceSideName does not defined for ${e}`);return t},ji="plug",Gi="socket",Qc="none",Kw={[ji]:Gi,[Gi]:ji},Jw=e=>{const n=Xs.length-1;return Bi(0,n,e)%n?ji:Gi},ex=e=>{if(e!==ji&&e!==Gi)throw new Error("Error. Parameter connection type has to be a plug or a socket");return Kw[e]};class tx extends Yi{constructor(){super(...arguments);I(this,"_parentPieceId");I(this,"_nestedPile");I(this,"getItemById");I(this,"getItemByIdFromRootPile")}get nestedPile(){return this._nestedPile}setNestedPile(n){this._nestedPile=n}clearNestedPile(){var n;typeof((n=this._nestedPile)==null?void 0:n.clear)=="function"&&this._nestedPile.clear()}hasNestedPile(){var n;return!!this._nestedPile&&!!((n=this._nestedPile)!=null&&n.length)}get parentPieceId(){return this._parentPieceId}setParentPieceId(n){this._parentPieceId=n}unsetParentPieceId(){this._parentPieceId=void 0}hasParentPieceId(){return!!this._parentPieceId}toString(){return`${this.id}`}}class Cn{constructor(t,n){this.dx=t,this.dy=n}static create({dx:t,dy:n}){return new this(t,n)}static reverse({dx:t,dy:n}){return this.create({dx:-t,dy:-n})}static zeroDelta(){return new Cn(0,0)}}const Zi="top",Qi="right",Ki="bottom",Ji="left",Xs=[Zi,Qi,Ki,Ji],Wp=[Ji,Ki,Qi,Zi],nx=Xs.length,rx=(e,t,n=!1)=>{if(e<0||e>t)throw new Error("Error. Incorrect side index");return n?Wp[e]:Xs[e]},$p=(e,t,n,r,i=!1)=>{let o;return i&&typeof e<"u"&&typeof t<"u"&&!isNaN(e)&&!isNaN(t)?o=`${e}:${t}`:typeof n<"u"&&typeof r<"u"&&!isNaN(n)&&!isNaN(r)?o=`${n}:${r}`:o=Ip(),`piece_${o}`},ix=({id:e,x:t,y:n,width:r,height:i,connectionActivationAreaSideSizeScaleFromPieceSideSize:o})=>{let s=e;s||(s=$p(t,n));const a=new G(t,n);return new Kc({id:s,position:a,width:r,height:i,connectionActivationAreaSideSizeScaleFromPieceSideSize:o})};class Kc extends tx{constructor({position:n,width:r,height:i,connectionActivationAreaSideSizeScaleFromPieceSideSize:o,...s}){super(s);I(this,"_position",new G(0,0));I(this,"_width",0);I(this,"_height",0);I(this,"_notConnectedNeighborsIds",new Map);I(this,"_connectedNeighborsIds",new Map);I(this,"_connectionActivationAreaSideSizeScaleFromPieceSideSize",.1);I(this,"_sidesConnectionTypes",new Map);I(this,"getItemById",n=>{});I(this,"getItemByIdFromRootPile",n=>{});this._position=n,this._width=r,this._height=i,this._connectionActivationAreaSideSizeScaleFromPieceSideSize=o}get sidesConnectionTypes(){return this._sidesConnectionTypes}get sidesConnectionTypesAsString(){let n="";return this._sidesConnectionTypes.forEach((r,i)=>{n+=`${i}:${r}`,n+=";"}),n}_getPieceByIdFromRootPile(n){if(typeof this.getItemByIdFromRootPile!="function")throw new Error("Error. Piece should has defined method getPieceByIdFromRootPile");return this.getItemByIdFromRootPile(n)}_getParentPiece(){if(!this.parentPieceId)return;if(typeof this.getItemByIdFromRootPile!="function")throw new Error("Error. Piece has not defined method getPieceById, but has attribute parentPieceId. Should has both defined");const n=this.getItemByIdFromRootPile(this.parentPieceId);if(!n)throw new Error("Error. Piece that was get by parentPieceId should in the root pile");return n}prepareConnectionTypes(n){Xs.forEach(r=>{if(!this.notConnectedNeighborsIds.has(r)){this._sidesConnectionTypes.set(r,Qc);return}const i=this._getOppositeSideConnectionType(r);let o;i?o=ex(i):o=Jw(n),this._sidesConnectionTypes.set(r,o)})}_getOppositeSideConnectionType(n){const r=this.notConnectedNeighborsIds.get(n);if(!r)return;if(typeof this.getItemByIdFromRootPile!="function")throw new Error("Error. Impossible to get piece by id from the root pile");const i=this.getItemByIdFromRootPile(r);if(!i)return;const o=Qw(n);return i.sidesConnectionTypes.get(o)}get position(){return this._position}setPosition(n){this._position=n}getWorldPosition(){if(!this.parentPieceId)return G.clone(this._position);const n=this._getParentPiece();if(!n)throw new Error("Error. Piece that was get by parentPieceId should in the root pile");const r=n.getWorldPosition().x+this._position.x,i=n.getWorldPosition().y+this._position.y;return new G(r,i)}get width(){return this._width}get height(){return this._height}get size(){return{width:this._width,height:this._height}}setSize(n,r){this._width=n,this._height=r}get notConnectedNeighborsIds(){return this._notConnectedNeighborsIds}get connectedNeighborsIds(){return this._connectedNeighborsIds}get connectionActivationAreaSideSizeScaleFromPieceSideSize(){return this._connectionActivationAreaSideSizeScaleFromPieceSideSize}getBoundaryCornerPoints(){const n=new G(this.getWorldPosition().x,this.getWorldPosition().y),r=new G(n.x+this._width-1,n.y+this._height-1);return{p0:n,p2:r}}getCenterPointPosition(){const{x:n,y:r}=this.getWorldPosition(),{width:i,height:o}=this.size,s=n+i/2,a=r+o/2;return G.create({x:s,y:a})}moveOnPositionDelta(n){const r=G.addDelta(this.position,n);this.setPosition(r)}moveOnPositionDeltaOrMoveParentPieceIfItExists(n){if(!this.parentPieceId){this.moveOnPositionDelta(n);return}const r=this._getParentPiece();if(!r)throw new Error("Error. Piece that was get by parentPieceId should in the root pile");r.moveOnPositionDeltaOrMoveParentPieceIfItExists(n)}getPositionDeltaToMoveOnConnectionPositionOfNeighborPiece(n,r){if(!n._getNotConnectedNeighborSideNameByPieceId(this.id)){if(n._getConnectedNeighborSideNameByPieceId(this.id))return Cn.zeroDelta();throw new Error("Error. Impossible to get a neighbor name of the side for the neightbor Piece")}const o=n._getNotConnectedNeighborPositionBySideNameInConnectedState(r);if(!o)throw new Error("Error. Impossible to get a position of this piece in the connected state. Is this piece already connected?");const s=o.x-this.getWorldPosition().x,a=o.y-this.getWorldPosition().y;return new Cn(s,a)}_getNeighborSideNameByPieceId(n,r){let i;return r.forEach((o,s)=>{n===o&&(i=s)}),i}_getConnectedNeighborSideNameByPieceId(n){return this._getNeighborSideNameByPieceId(n,this._connectedNeighborsIds)}_getNotConnectedNeighborSideNameByPieceId(n){return this._getNeighborSideNameByPieceId(n,this._notConnectedNeighborsIds)}_getNotConnectedNeighborPositionBySideNameInConnectedState(n){return this._getNeighborConnectionActivationAreaCenterPositionBySide(n)}getAvailableToConnectNeighbors(){const n=this._connectionActivationAreaSideSizeScaleFromPieceSideSize*this.width,r=[];return this._notConnectedNeighborsIds.forEach((i,o)=>{const s=this._getPieceByIdFromRootPile(i);if(!s)throw new Error(`Error. Neighbor piece with id: ${i} should be in a pile`);const a=this._getNeighborConnectionActivationAreaCenterPositionBySide(o);!a||!G.isPointInAreaWithCenterPointAndAreaSideSize(s.getWorldPosition(),a,n)||r.push({piece:this,side:o,neighborPiece:s})}),r}_getNeighborConnectionActivationAreaCenterPositionBySide(n){if(!this._notConnectedNeighborsIds.has(n))return;const r=this.getWorldPosition();if(n===Zi)return new G(r.x,r.y-this.height);if(n===Qi)return new G(r.x+this.width,r.y);if(n===Ki)return new G(r.x,r.y+this.height);if(n===Ji)return new G(r.x-this.width,r.y)}addNotConnectedNeighborBySide(n,r){this._notConnectedNeighborsIds.set(n,r.id)}markNeighborAsConnected(n){this.notConnectedNeighborsIds.forEach((r,i)=>{n.items.get(r)&&this._markNeighborAsConnected(i,r)})}_markNeighborAsConnected(n,r){const i=this._notConnectedNeighborsIds.get(n);if(!i)throw new Error("Error. Neighbor piece is not in not connected neighbor ids array");if(i!==r)throw new Error("Error. Tried to mark a not neighbor piece as a connected neighbor piece");this._notConnectedNeighborsIds.delete(n),this._connectedNeighborsIds.set(n,i)}markPieceOnSideAsConnected(n,r){const i=this._notConnectedNeighborsIds.get(n),o=r.id;if(i!==o)throw new Error("Error. Impossible to connect a piece that is not a neighbor by connection");if(!i)throw new Error("Error. Impossible to connect a piece from the side that is not existing by connection or already connected");this._markNeighborAsConnected(n,i)}_recomputePositionOfPieceWithNestedPiecesAndPositionOfNestedPieces(){const n=this._getTopLeftPointOfBoundaryRectangleForNestedPiecesInWorldCoordinates(),r=G.clone(this.getWorldPosition()),i=Cn.create({dx:n.x-r.x,dy:n.y-r.y});this.setPosition(n),this._setRelativePositionForPiecesInNestedPile(i)}_getTopLeftPointOfBoundaryRectangleForNestedPiecesInWorldCoordinates(){var o;if(!((o=this.nestedPile)!=null&&o.length))throw new Error("Error. Impossible to recompute position of the piece that has no a nested pile of pieces or nested pile has no pieces");const n=this.nestedPile,r=n.itemOnTop;if(!r)throw new Error("Error. Nested pile should contains at least one piece");const i=G.clone(r.getWorldPosition());return n.forEach(s=>{const a=s.getWorldPosition();a.x<i.x&&(i.x=a.x),a.y<i.y&&(i.y=a.y)}),G.clone(i)}_recomputeSize(){var l;if(!((l=this.nestedPile)!=null&&l.length))throw new Error("Error. Impossible to recompute position of the piece that has no a nested pile of pieces or nested pile has no pieces");const n=this.nestedPile,r=n.itemOnTop;if(!r)throw new Error("Error. Nested pile should contains a piece");const i=G.clone(r.position),o=G.clone(r.position);n.forEach(c=>{const u=c.position;u.x<i.x&&(i.x=u.x),u.y<i.y&&(i.y=u.y),u.x>o.x&&(o.x=u.x),u.y>o.y&&(o.y=u.y)});const s=o.x-i.x+r.width,a=o.y-i.y+ +r.height;this.setSize(s,a)}recomputePositionAndSize(){this._recomputePositionOfPieceWithNestedPiecesAndPositionOfNestedPieces(),this._recomputeSize()}_setRelativePositionForPiecesInNestedPile(n){var o;if(!((o=this.nestedPile)!=null&&o.length))throw new Error("Error. Impossible to recompute positions of nested pieces for the piece that has no a nested pile of pieces or nested pile has no pieces");const r=Cn.reverse(n);this.nestedPile.forEach(s=>{const a=s.position,l=G.addDelta(a,r);s.setPosition(l)})}toStringWithPosition(){const n=`{x: ${this.position.x}, y: ${this.position.y}}`;return`${this.id} ${n}`}isGroup(){return!(!this.nestedPile||this.nestedPile.length===0)}}I(Kc,"create",ix);const Od=(e,t)=>`neighbor_${e}:${t}`;class ox extends Map{}const sx=2,Na=0;class Ad extends Yi{constructor({...n}){super(n);I(this,"_itemIdsInOrder",new Array);I(this,"_items",new Map)}get itemIdOnTop(){return this._itemIdsInOrder[this.length-1]}get itemIdAtBottom(){return this._itemIdsInOrder[0]}get itemOnTop(){const n=this.itemIdOnTop;if(n!==void 0)return this.getItemById(n)}get itemAtBottom(){const n=this.itemIdAtBottom;if(n!==void 0)return this.getItemById(n)}get length(){return this._itemIdsInOrder.length}get items(){return this._items}getItemById(n){return this._items.get(n)}get itemIdsInOrder(){return new Array().concat(this._itemIdsInOrder)}_clearItemIdsInOrder(){this._itemIdsInOrder=[]}_clearItems(){this._items.clear()}clear(){this._clearItemIdsInOrder(),this._clearItems()}getIndexOfItemIdInItemIdsOrderArrayById(n){const r=this._itemIdsInOrder.findIndex(i=>i===n);if(r!==-1)return r}getIndexOfItemIdInPieceIdsOrderArray(n){if(!n)throw new Error("Error. Parameter item is not defined");if(!(n!=null&&n.id))throw new Error("Error. Parameter item should has id attribute to be able be added to the pile");return this.getIndexOfItemIdInItemIdsOrderArrayById(n.id)}getNextItemId(n){const r=this.getIndexOfItemIdInItemIdsOrderArrayById(n);if(r===void 0)return;const i=r+1;if(!(i>=this._itemIdsInOrder.length))return this._itemIdsInOrder[i]}getPreviousItemId(n){const r=this.getIndexOfItemIdInItemIdsOrderArrayById(n);if(r===void 0)return;const i=r-1;if(!(i<0))return this._itemIdsInOrder[i]}getNextItem(n){if(!(n!=null&&n.id))return;const r=this.getNextItemId(n.id);if(r!==void 0)return this.getItemById(r)}getPreviousItem(n){if(!(n!=null&&n.id))return;const r=this.getPreviousItemId(n.id);if(r!==void 0)return this.getItemById(r)}moveToTop(n){if(!n)throw new Error("Error. Parameter item is not defined");if(!(n!=null&&n.id))throw new Error("Error. Parameter item should has id attribute to be able be added to the pile");if(!this.getItemById(n.id))throw new Error("Error. Parameter item should be in the pile");if(!this._items.has(n.id))throw new Error("Error. No item with this id is in the pile");if(!this._itemIdsInOrder.find(o=>o===n.id))throw new Error("Error. No itemId is in the pile");const r=n.id,i=this.getIndexOfItemIdInItemIdsOrderArrayById(r);if(i===void 0)throw new Error("Error. Parameter item should has id that is in itemIdsInOrder attribute of the pile");this._itemIdsInOrder.splice(i,1),this._itemIdsInOrder.push(r)}addPieceOnTheTop(n,r=!1){if(!n)throw new Error("Error. Parameter item is not defined");if(!(n!=null&&n.id))throw new Error("Error. Parameter item should has id attribute to be able be added to the pile");if(this._items.has(n.id))throw new Error("Error. Item with this id is already in the pile");if(this._itemIdsInOrder.find(o=>o===n.id))throw new Error("Error. ItemId is already in the pile");const i=n.id;this._items.set(i,n),this._itemIdsInOrder.push(i),this._setFunctionGetPieceByIdFromPile(n,r)}addGroupInTheMiddleByGroupSize(n,r=!1){if(!n)throw new Error("Error. Parameter item is not defined");if(!(n!=null&&n.id))throw new Error("Error. Parameter item should has id attribute to be able be added to the pile");if(!n.nestedPile)throw new Error("Error. Parameter item should be a group");if(this._itemIdsInOrder.find(a=>a===n.id))throw new Error("Error. ItemId is already in the pile");const i=n.nestedPile.length,o=this.getIndexOfTheUppermostGroupByGroupSize(i),s=n.id;this._items.set(s,n),this._itemIdsInOrder.splice(o+1,0,s),this._setFunctionGetPieceByIdFromPile(n,r)}getIndexOfTheUppermostGroupByGroupSize(n=0){if(n<sx||!this.length)return Na;const r=n-1,i=this.findIndexFromBottomToTop(s=>s.nestedPile?!(s.nestedPile.length>r):!0);if(i===void 0)return this.length;const o=i-1;return o<0?Na-1:o}_setFunctionGetPieceByIdFromPile(n,r=!1){n.getItemById=i=>this.getItemById(i),r&&(n.getItemByIdFromRootPile=i=>this.getItemById(i))}_unsetFunctionGetPieceByIdFromPile(n){n.getItemById=r=>{},n.getItemByIdFromRootPile=r=>{}}removeItem(n){if(!n)throw new Error("Error. Parameter item is not defined");if(!(n!=null&&n.id))throw new Error("Error. Parameter item should has id attribute to be able be removed from the pile");if(!this._items.has(n.id))throw new Error("Error. No item with this id is in the pile");const r=n.id;this._items.delete(r);const i=this.getIndexOfItemIdInPieceIdsOrderArray(n);i!==void 0&&this._itemIdsInOrder.splice(i,1),n.clearNestedPile(),n.unsetParentPieceId(),this._unsetFunctionGetPieceByIdFromPile(n)}cutItemFromItemIdsInOrder(n){if(!n)throw new Error("Error. Parameter item is not defined");const r=this.getIndexOfItemIdInPieceIdsOrderArray(n);if(r===void 0)throw new Error("Error. Item should be in the pile");return this._itemIdsInOrder.splice(r,1),n.id}_findSubFunction(n,r){if(typeof r!="function")throw new Error("Error. Parameter predicate should be a function");const i=this._itemIdsInOrder[n],o=this.getItemById(i);if(!o)throw new Error(`Error. Item with id: ${i} should be in the pile, but it's only in itemIdsInOrder array`);if(r(o,n))return o}findFromTopToBottom(n){for(let r=this._itemIdsInOrder.length-1;r>=0;r--){const i=this._findSubFunction(r,n);if(i)return i}}findIndexFromTopToBottom(n){for(let r=this._itemIdsInOrder.length-1;r>=0;r--)if(this._findSubFunction(r,n))return r}findFromBottomToTop(n){return this.find(n)}findIndexFromBottomToTop(n){return this.findIndex(n)}find(n){for(let r=0;r<this._itemIdsInOrder.length;r++){const i=this._findSubFunction(r,n);if(i)return i}}findIndex(n){for(let r=0;r<this._itemIdsInOrder.length;r++)if(this._findSubFunction(r,n))return r}_forEachSubFunction(n,r){if(typeof r!="function")throw new Error("Error. Parameter predicate should be a function");const i=this._itemIdsInOrder[n],o=this.getItemById(i);if(!o)throw new Error(`Error. Item with id: ${i} should be in the pile, but it's only in itemIdsInOrder array`);r(o)}forEachFromTopToBottom(n){for(let r=this._itemIdsInOrder.length-1;r>=0;r--)this._forEachSubFunction(r,n)}forEach(n){for(let r=0;r<this._itemIdsInOrder.length;r++)this._forEachSubFunction(r,n)}toString(){return`${this.id}`}}const ax=e=>{const t=e.x*2,n=e.y*2;return new G(t,n)};let Ld=0;const lx=()=>(Ld++,`nested-pile_${Ld}`),cx=(e,t)=>`group_(${e.id}__${t.id})`;class ux extends Yi{constructor({id:n,numberOfPiecesPerWidth:r,numberOfPiecesPerHeight:i,pieceSideSize:o,connectionActivationAreaSideSizeFractionFromPieceSideSize:s,pieceClass:a,getCustomInitialPiecePosition:l,onDirty:c,onPieceRelease:u,onGroupOfPiecesRelease:d,onChangeProgress:f,...p}){super({id:n});I(this,"_piecesPile",new Ad({id:"puzzle-root-piece-pile"}));I(this,"_numberOfPiecesPerWidth");I(this,"_numberOfPiecesPerHeight");I(this,"_pieceSideSize");I(this,"_pieceConnectionActivationAreaSideSizeScaleFromPieceSideSize");I(this,"_pieceClass");I(this,"_additionalPieceOptions");I(this,"_isManualMovingPieces",!1);I(this,"_wasTouched",!1);I(this,"_onDirty");I(this,"_onPieceRelease");I(this,"_onOnGroupOfPiecesRelease");I(this,"_onChangeProgress");I(this,"_pieceNeighborsMap",new ox);I(this,"_activePiece");I(this,"_totalAvailableConnections",0);I(this,"_completenessProgress",0);I(this,"_width");I(this,"_height");I(this,"_getRandomInitialPiecePositionWithinAreaFunction",n=>{let r=n;r||(r=vi.create({x:0,y:0,width:this.pieceSideSize*this._numberOfPiecesPerWidth,height:this.pieceSideSize*this._numberOfPiecesPerHeight}));const i=r.x,o=r.x+r.width-this._pieceSideSize-1,s=r.y,a=r.y+r.height-this._pieceSideSize-1;return()=>{const l=Bi(i,o,this.prng),c=Bi(s,a,this.prng);return new G(l,c)}});this._numberOfPiecesPerWidth=r,this._numberOfPiecesPerHeight=i,this._pieceSideSize=o,this._pieceConnectionActivationAreaSideSizeScaleFromPieceSideSize=s,this._pieceClass=a,this._additionalPieceOptions=p,this.generatePiecePile({getCustomInitialPiecePosition:l}),typeof c=="function"&&(this._onDirty=c),typeof u=="function"&&(this._onPieceRelease=u),typeof d=="function"&&(this._onOnGroupOfPiecesRelease=d),typeof f=="function"&&(this._onChangeProgress=f)}get activePiece(){return this._activePiece}get completenessProgress(){return this._completenessProgress}get prng(){return Yw(this.id)}get wasTouched(){return this._wasTouched}_markPuzzleWasTouched(){this._isManualMovingPieces||this._wasTouched||(this._wasTouched=!0,typeof this._onDirty=="function"&&this._onDirty())}get pieces(){return this._piecesPile}get numberOfPiecesPerWidth(){return this._numberOfPiecesPerWidth}get numberOfPiecesPerHeight(){return this._numberOfPiecesPerHeight}get pieceSideSize(){return this._pieceSideSize}get pieceTouchAreaSideSizeScaleFromPieceSideSize(){return this._pieceConnectionActivationAreaSideSizeScaleFromPieceSideSize}get width(){return this._width||(this._width=this._pieceSideSize*this._numberOfPiecesPerHeight),this._width}get height(){return this._height||(this._height=this._pieceSideSize*this._numberOfPiecesPerHeight),this._height}generatePiecePile({getCustomInitialPiecePosition:n}){const r=this._numberOfPiecesPerWidth,i=this._numberOfPiecesPerHeight,o=this._pieceSideSize;let s;typeof n=="function"?s=n:s=this._getRandomInitialPiecePositionWithinAreaFunction();for(let l=0;l<i;l++)for(let c=0;c<r;c++){const u=c*o,d=l*o;let f=u,p=d;const w=s(new G(f,p));f=w.x,p=w.y;const S=o,P=o,g=$p(f,p,c,l,typeof n=="function"),m=this._createPieceInstance({id:g,x:f,y:p,width:S,height:P,horizontalIndex:c,verticalIndex:l});this._piecesPile.addPieceOnTheTop(m,!0);const v=Od(c,l);this._pieceNeighborsMap.set(v,{i:c,j:l,piece:m})}let a=0;this._pieceNeighborsMap.forEach(({i:l,j:c,piece:u})=>{Wp.forEach(d=>{const f=this._getNeighborOnSide(l,c,d);f&&(u.addNotConnectedNeighborBySide(d,f),a=a+1)})}),this._piecesPile.forEach(l=>{l.prepareConnectionTypes(this.prng)}),this._totalAvailableConnections=a}getAdditionalPieceOptions(n,r){return{...this._additionalPieceOptions}}_createPieceInstance({id:n,x:r,y:i,width:o,height:s,horizontalIndex:a,verticalIndex:l}){const c=this._pieceClass,u=new G(r,i),d=this._pieceConnectionActivationAreaSideSizeScaleFromPieceSideSize,p={...this.getAdditionalPieceOptions(a,l),id:n,position:u,width:o,height:s,connectionActivationAreaSideSizeScaleFromPieceSideSize:d};return Iw(c,p)}_getNeighborOnSide(n,r,i){return this._getNeighborOnSideOfPiece(n,r,i,this._pieceNeighborsMap,this._piecesPile)}_getNeighborOnSideOfPiece(n,r,i,o,s){var d,f;let a,l;if(i===Zi?(a=n,l=r-1):i===Qi?(a=n+1,l=r):i===Ki?(a=n,l=r+1):i===Ji&&(a=n-1,l=r),typeof a!="number"||typeof l!="number"||!Number.isFinite(a)||!Number.isFinite(l))return;const c=Od(a,l),u=(f=(d=o.get(c))==null?void 0:d.piece)==null?void 0:f.id;if(u)return s.getItemById(u)}spreadPieces(n=0,r){if(this.wasTouched)throw new Error("Error. Impossible to spread pieces because the puzzle was touched");const i=this.numberOfPiecesPerWidth*this.pieceSideSize,o=this.numberOfPiecesPerHeight*this.pieceSideSize,s=i+n,a=o+n,l=new vi(0,0,s,a,"puzzle-pieces-spread-area");this._setPositionForPiecesInArea(l,r)}_setPositionForPiecesInArea(n,r){const i=new vi(n.x,n.y,n.width-this.pieceSideSize,n.height-this.pieceSideSize);let o=()=>kw(i);typeof r=="function"&&(o=r),this._piecesPile.forEach(s=>{const a=o(s);s.setPosition(a)})}isPointInsidePieceBoundaries(n,r){const{p0:i,p2:o}=r.getBoundaryCornerPoints();return G.isPointInAreaByCornerPoints(n,i,o)}getBoundaryCornerPointsOfPiecesSpreadArea(){const n=this._piecesPile.itemOnTop;if(!n)throw new Error("Error. Puzzle should has at least one piece");const{p0:r,p2:i}=n.getBoundaryCornerPoints(),o=r,s=i;return this._piecesPile.forEach(a=>{const{p0:l,p2:c}=a.getBoundaryCornerPoints();l.x<o.x&&(o.x=l.x),l.y<o.y&&(o.y=l.y),c.x>s.x&&(s.x=c.x),c.y>s.y&&(s.y=c.y)}),{p0:o,p2:s}}findPieceOrGroupOfPiecesByPointingInsidePieceBoundaries(n){const r=this._piecesPile.findFromTopToBottom(i=>{var o;return(o=i.nestedPile)!=null&&o.length?!!i.nestedPile.findFromTopToBottom(a=>this.isPointInsidePieceBoundaries(n,a)):this.isPointInsidePieceBoundaries(n,i)});if(r)return r.parentPieceId?this._piecesPile.getItemById(r.parentPieceId):r}findPieceByPointingInsidePieceBoundaries(n){let r;return this._piecesPile.findFromTopToBottom(i=>{var o;if((o=i.nestedPile)!=null&&o.length){const s=i.nestedPile.findFromTopToBottom(a=>this.isPointInsidePieceBoundaries(n,a));return s?(r=s,!0):!1}return this.isPointInsidePieceBoundaries(n,i)?(r=i,!0):!1}),r}_connectSuitablePieces(n){n.forEach(({piece:r,side:i,neighborPiece:o})=>{this._attractNotConnectedNeighborPieceByMovingItToActivePiece(r,i,o),this._groupItems(r,o)})}_getAvailableToConnectPiecesForPiece(n){var i;let r=[];if(!n.parentPieceId)r=n.getAvailableToConnectNeighbors();else{const o=this.pieces.getItemById(n.parentPieceId);if(!o)throw new Error("Error. Piece that was get by parentPieceId should in the root pile");if(!((i=o.nestedPile)!=null&&i.length))throw new Error("Error. Piece that was get by parentPieceId should has nestedPile");o.nestedPile.forEach(s=>{const a=s.getAvailableToConnectNeighbors();r=r.concat(a)}),r=Array.from(new Set(r))}return r}_attractNotConnectedNeighborPieceByMovingItToActivePiece(n,r,i){const o=i.getPositionDeltaToMoveOnConnectionPositionOfNeighborPiece(n,r);o.dx===0&&o.dy===0||i.moveOnPositionDeltaOrMoveParentPieceIfItExists(o)}_calculateCompletenessProgress(){let n=0;this.pieces.forEach(r=>{var i;(i=r.nestedPile)!=null&&i.length&&r.nestedPile.forEach(o=>{n=n+o.connectedNeighborsIds.size})}),this._completenessProgress=Math.round(n/this._totalAvailableConnections*100),this._onChangeProgress&&this._onChangeProgress(this._completenessProgress)}selectActivePiece(n){if(!n)throw new Error("Error. Parameter piece is not defined");if(!(n!=null&&n.id))throw new Error("Error. Piece should has id attribute to be able be added to the pile");if(this.unselectActivePiece(),this._markPuzzleWasTouched(),this._activePiece=n,!n.parentPieceId){this._piecesPile.moveToTop(this._activePiece);return}const r=this.pieces.getItemById(n.parentPieceId);if(!r)throw new Error("Error. Parent piece not found in the root pile, but parameter piece has parentPieceId");this._piecesPile.moveToTop(r)}unselectActivePiece(){if(!this._activePiece)return;const n=this._activePiece;this._unselectPiece(),this._tryToConnect(n),this._calculateCompletenessProgress(),this._afterPieceRelease(n)}_afterPieceRelease(n){if(this._onPieceRelease)if(n.parentPieceId){if(this._onOnGroupOfPiecesRelease){const r=this._piecesPile.getItemById(n.parentPieceId);if(!r)throw new Error("Error. Active piece should has id of parent group in puzzle pile of pieces");const i=r.nestedPile,o=[];i.forEach(s=>{const a=s.getWorldPosition();o.push({id:s.id,position:{x:a.x,y:a.y}})}),this._onOnGroupOfPiecesRelease(o)}}else this._onPieceRelease({id:n.id,position:{x:n.position.x,y:n.position.y}})}_tryToConnect(n){const r=this._getAvailableToConnectPiecesForPiece(n);if(!r.length){if(!n.parentPieceId)return;const i=this._piecesPile.getItemById(n.parentPieceId);if(!i)throw new Error("Error. Active piece should has id of parent group in puzzle pile of pieces");this._piecesPile.cutItemFromItemIdsInOrder(i),this._piecesPile.addGroupInTheMiddleByGroupSize(i);return}this._connectSuitablePieces(r)}movePiecesToManualInitialPositions(n=[]){this._isManualMovingPieces=!0;for(let r=0;r<n.length;r++){const i=n[r],o=i.id,s=this.pieces.find(({id:l})=>l===o);if(!s)continue;this.selectActivePiece(s);const a={dx:i.position.x-s.position.x,dy:i.position.y-s.position.y};this.moveActivePiece(a),this.unselectActivePiece()}this._isManualMovingPieces=!1,this._calculateCompletenessProgress()}_unselectPiece(){this._markPuzzleWasTouched(),this._activePiece=void 0}moveActivePiece(n){this._markPuzzleWasTouched();const r=this._activePiece;if(!r){console.error("Warning. Puzzle core has no activePiece. Are you trying move piece that is not active any more");return}if(!(r!=null&&r.position))throw new Error("Error. Active piece of puzzle should has initial position");if(!r.parentPieceId){r.moveOnPositionDelta(n);return}const i=this.pieces.getItemById(r.parentPieceId);if(!i)throw new Error("Error. Parent piece not found in the root pile, but parameter piece has parentPieceId");i.moveOnPositionDelta(n)}_connectTwoGroups(n,r){if(!n.parentPieceId)throw new Error("Error. Parameter pieceA should be a group");if(!r.parentPieceId)throw new Error("Error. Parameter pieceB should be a group");const i=this._piecesPile,o=i.getItemById(n.parentPieceId);if(!o)throw new Error("Error. Parameter pieceA.parentPieceId should has id of parent group in pile");const s=o.nestedPile;if(!(s!=null&&s.length))throw new Error("Error. Pile of parent piece for pieceA can not be empty");const a=i.getItemById(r.parentPieceId);if(!a)throw new Error("Error. Parameter pieceB.parentPieceId should has id of parent group in pile");const l=a.nestedPile;if(!(l!=null&&l.length))throw new Error("Error. Pile of parent piece for pieceB can not be empty");return i.cutItemFromItemIdsInOrder(o),i.cutItemFromItemIdsInOrder(a),l.forEach(c=>{s.addPieceOnTheTop(c),c.setParentPieceId(o.id);const u=G.create({x:c.position.x+a.position.x-o.position.x,y:c.position.y+a.position.y-o.position.y});c.setPosition(u)}),l.forEach(c=>{c.markNeighborAsConnected(s)}),i.removeItem(a),i.addGroupInTheMiddleByGroupSize(o),o.recomputePositionAndSize(),n}_connectGroupWithPiece(n,r){if(!n.parentPieceId)throw new Error("Error. Parameter pieceA should be a part of a group");if(r.parentPieceId)throw new Error("Error. Parameter pieceB should not be a part of a group");const i=this._piecesPile,o=i.getItemById(n.parentPieceId);if(!o)throw new Error("Error. Parameter pieceA.parentPieceId should has id of parent group in pile");const s=o.nestedPile;if(!(s!=null&&s.length))throw new Error("Error. Pile of parent piece for pieceA can not be empty");i.cutItemFromItemIdsInOrder(o),i.cutItemFromItemIdsInOrder(r);const a=G.create({x:r.position.x-o.position.x,y:r.position.y-o.position.y});return r.setPosition(a),s.addPieceOnTheTop(r),r.setParentPieceId(o.id),n.markNeighborAsConnected(s),r.markNeighborAsConnected(s),i.addGroupInTheMiddleByGroupSize(o),o.recomputePositionAndSize(),n}_connectPieceWithPiece(n,r){if(n.parentPieceId)throw new Error("Error. Parameter pieceA should not be a part of a group");if(r.parentPieceId)throw new Error("Error. Parameter pieceB should not be a part of a group");const i=this._piecesPile;i.cutItemFromItemIdsInOrder(n),i.cutItemFromItemIdsInOrder(r);const o=0,s=0,a=0,l=0,c=cx(n,r),u=this._createPieceInstance({id:c,x:o,y:s,width:a,height:l}),d=lx(),f=new Ad({id:d}),p=n.position.x,w=n.position.y,S=r.position.x,P=r.position.y,g=G.create({x:p<S?p:S,y:w<P?w:P}),m=G.create({x:p-g.x,y:w-g.y});n.setPosition(m);const v=G.create({x:S-g.x,y:P-g.y});return r.setPosition(v),u.setPosition(g),f.addPieceOnTheTop(n),n.setParentPieceId(u.id),f.addPieceOnTheTop(r),r.setParentPieceId(u.id),u.setNestedPile(f),n.markNeighborAsConnected(f),r.markNeighborAsConnected(f),i.addGroupInTheMiddleByGroupSize(u),u.recomputePositionAndSize(),n}_groupItems(n,r){this._markPuzzleWasTouched();let i;n.parentPieceId&&r.parentPieceId?n.parentPieceId!==r.parentPieceId&&n.getAvailableToConnectNeighbors().find(({neighborPiece:a})=>a.id===r.id)&&(i=this._connectTwoGroups(n,r)):n.parentPieceId?i=this._connectGroupWithPiece(n,r):r.parentPieceId?i=this._connectGroupWithPiece(r,n):i=this._connectPieceWithPiece(n,r),i&&this._markNeighborsAsConnectedForPiecesInTheSamePile(i)}_markNeighborsAsConnectedForPiecesInTheSamePile(n){if(!n.parentPieceId)throw new Error("Error. Parameter piece should be a part of a group");const i=this._piecesPile.getItemById(n.parentPieceId);if(!i)throw new Error("Error. Parameter pieceInGroup.parentPieceId should has id of parent group in pile");const o=i.nestedPile;if(!(o!=null&&o.length))throw new Error("Error. Pile of parent piece for pieceInGroup can not be empty");o.forEach(s=>{s.markNeighborAsConnected(o)})}}const wi=new Map;let Vp=!1;const Oa="cacheHitCounterPieceMaskPath",dx=()=>{const{useHitCounterForPieceMaskPath:e,exposeHitCounterForPieceMaskPathToWindowObject:t}=Dt();y.useEffect(()=>(t&&window?window[Oa]=wi:window==null||delete window[Oa],()=>{window==null||delete window[Oa]}),[t]),y.useEffect(()=>{Vp=!!e},[e])},Fd=(e,t=!1)=>{if(!Vp)return;const n=wi.get(e);n===void 0?wi.set(e,1):wi.set(e,n+1),t&&console.log(n)},fx=()=>{wi.clear()},xi=new Map;let qp=!1;const Aa="cacheHitCounterPieceShapePath",hx=()=>{const{useHitCounterForPieceShapePath:e,exposeHitCounterForPieceShapePathToWindowObject:t}=Dt();y.useEffect(()=>(t&&window?window[Aa]=xi:window==null||delete window[Aa],()=>{window==null||delete window[Aa]}),[t]),y.useEffect(()=>{qp=!!e},[e])},px=(e,t=!1)=>{if(!qp)return;const n=xi.get(e);n===void 0?xi.set(e,1):xi.set(e,n+1),t&&console.log(n)},mx=()=>{xi.clear()};class Wo{constructor(t,n,r,i){this.x=t,this.y=n,this.width=r,this.height=i}static getIntersectionBoundaryOfTwoBoundaries(t,n){const r=t.x>n.x?t.x:n.x,i=t.y>n.y?t.y:n.y,o=t.x+t.width,s=t.y+t.height,a=n.x+n.width,l=n.y+n.height,c=o<a?o:a,u=s<l?s:l,d=c-r,f=u-i;if(!(d<=0||f<=0))return{x:r,y:i,width:d,height:f}}}const Fe=(e,t,n,r="pink",i=15,o=!0,s=1,a=!1,l=[5,5])=>{e&&(e.save(),e.beginPath(),a&&e.setLineDash(l),e.arc(t,n,i,0,2*Math.PI),o?(e.lineWidth=s,e.strokeStyle=r,e.stroke()):(e.fillStyle=r,e.fill()),e.restore())},Si=(e,t,n,r,i,o="gray",s=!0,a=1,l=!1,c=[5,5])=>{e&&(e.save(),l&&e.setLineDash(c),s?(e.lineWidth=a,e.strokeStyle=o,e.strokeRect(t,n,r,i)):(e.fillStyle=o,e.fillRect(t,n,r,i)),e.restore())};function Rd(...e){console.log(...e)}const Xr=(e,...t)=>{const n=window==null?void 0:window.logFilterString,r=new RegExp(n,"gi"),i=o=>n?r.test(String(o)):!1;if(typeof e=="function"){const o=e();if(!i(e))return;Rd(o,...t);return}i(e)&&Rd(e,...t)},Xp=e=>parseInt(e.toFixed(0),10),wr=new Map,Yp="start",Zp="end",Jc=(e,t,n=!0)=>{const r=`${e}-${Yp}`,i=`${e}-${Zp}`,o=wr.get(r);if(typeof o>"u"){Xr(`Warning. Start timemark is undefined. Can not print passed time for tag ${e}.`);return}const s=wr.get(i);if(typeof s>"u"){Xr(`Warning. End timemark is undefined. Can not print passed time for tag ${e}. `);return}if(o>s){Xr(`Warning. Start timemark older than end timemark. Can not print passed time for tag ${e}. `);return}const a=Xp(s-o);wr.delete(r),wr.delete(i);let c=`${a} ms passed`;if(typeof t=="function"&&(c=t(a)),n){setTimeout(()=>{Xr(c)},0);return}Xr(c)},Qp=e=>{const t=performance.now();return wr.set(`${e}-${Yp}`,t),t},Kp=(e,t=!1)=>{const n=performance.now();return wr.set(`${e}-${Zp}`,n),t&&Jc(e,void 0,!1),n},Eo=15,gx=(e,t)=>{const[n,r]=y.useState(Eo),[i,o]=y.useState(Eo),s=y.useCallback((l=Eo,c=Eo)=>{r(l),o(c)},[r,o]),a=y.useCallback(()=>{const l=e==null?void 0:e.current;if(!l)return;const c=l.clientWidth,u=l.clientHeight;l.width===c&&l.height===u||(l.width=c,l.height=u,t(),s(c,u))},[e,s,t]);return y.useEffect(()=>{const l=e==null?void 0:e.current;if(!l)return;const c=new ResizeObserver(a);return c.observe(l),()=>{c.unobserve(l),c.disconnect()}},[e,a]),y.useEffect(()=>(document.addEventListener("load",a),()=>{document.removeEventListener("load",a)}),[a]),{canvasWidth:n,canvasHeight:i}},yx=({elementRef:e})=>{const[t,n]=y.useState(!1),[r,i]=y.useState(),o=y.useCallback((s,a)=>{if(!a)return;const l=qi(s,a);i(l)},[i]);return y.useEffect(()=>{const s=e==null?void 0:e.current;if(!s)return;let a=!1;const l=p=>{o(p,s),p.button===Rr&&(n(!0),a=!0)},c=p=>{o(p,s),p.button===Rr&&(n(!1),a=!1)},u=p=>{a&&(o(p,s),n(!1),a=!1)},d=p=>{const w=e==null?void 0:e.current;w&&a&&o(p,w)},f={passive:!0};return s.addEventListener("mousedown",l,f),s.addEventListener("mouseup",c,f),s.addEventListener("mouseleave",u,f),s.addEventListener("mousemove",d,f),()=>{s.removeEventListener("mousedown",l,f),s.removeEventListener("mouseup",c,f),s.removeEventListener("mouseleave",u,f),s.removeEventListener("mousemove",d,f)}},[e,o]),{isPrimaryMouseButtonPressed:t,mousePosition:r}},eu=(e,t)=>{const n=e.targetTouches[0];if(!t)return new O((n==null?void 0:n.clientX)||0,(n==null?void 0:n.clientY)||0);if(t instanceof SVGSVGElement){const{x:i,y:o}=t.getBoundingClientRect();return new O((n==null?void 0:n.clientX)||0-i||0,(n==null?void 0:n.clientY)||0-o||0)}return new O((n==null?void 0:n.clientX)||0-(t==null?void 0:t.offsetLeft)||0,(n==null?void 0:n.clientY)||0-(t==null?void 0:t.offsetTop)||0)},vx=({elementRef:e})=>{const[t,n]=y.useState(!1),[r,i]=y.useState(),o=y.useCallback((s,a)=>{if(!a)return;const l=eu(s,a);i(l)},[i]);return y.useEffect(()=>{const s=e==null?void 0:e.current;if(!s)return;let a=!1;const l=p=>{p.preventDefault(),o(p,s),n(!0),a=!0},c=p=>{p.preventDefault(),o(p,s),n(!1),a=!1},u=p=>{p.preventDefault(),a&&(o(p,s),n(!1),a=!1)},d=p=>{p.preventDefault();const w=e==null?void 0:e.current;w&&a&&o(p,w)},f={passive:!1};return s.addEventListener("touchstart",l,f),s.addEventListener("touchend",c,f),s.addEventListener("touchcancel",u,f),s.addEventListener("touchmove",d,f),()=>{s.removeEventListener("touchstart",l,f),s.removeEventListener("touchend",c,f),s.removeEventListener("touchcancel",u,f),s.removeEventListener("touchmove",d,f)}},[e,n,o]),{hasTouch:t,touchPosition:r}},wx=({elementRef:e})=>{const{hasTouch:t,touchPosition:n}=vx({elementRef:e}),{isPrimaryMouseButtonPressed:r,mousePosition:i}=yx({elementRef:e});return t?{isPressed:!0,position:n}:r?{isPressed:!0,position:i}:{isPressed:!1,position:void 0}},bd=1048576,Ss=1e3,Jp=(window==null?void 0:window.performance)&&(window==null?void 0:window.performance.memory);class xx{constructor(){I(this,"REVISION",16);I(this,"mode",0);I(this,"container");I(this,"containerElementId","#canvas-perfomance-monitor");I(this,"dom");I(this,"prevTime",0);I(this,"beginTime",0);I(this,"frames",0);I(this,"panels",[]);const t=document.querySelectorAll(this.containerElementId);t.length&&t.forEach(n=>n.remove()),this.container=document.createElement("div"),this.container.id=this.containerElementId,this.container.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:90000",this.addHandlers(),this.dom=this.container,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.frames=0,this.addPanel(new _x("FPS","#0ff","#022")),this.addPanel(new Px("MS","#0f0","#020")),Jp&&this.addPanel(new Cx("MB","#f08","#201")),this.showPanel(0)}addHandlers(){this.container.addEventListener("click",t=>this.handleClick(t),!1)}removehandlers(){this.container.removeEventListener("click",t=>this.handleClick(t),!1)}destroy(){this.removehandlers()}handleClick(t){t.preventDefault(),this.showPanel(++this.mode%this.container.children.length)}addPanel(t){return this.panels.push(t),this.container.appendChild(t.dom),t}showPanel(t){if(typeof t=="number")this.mode=t;else if(typeof t=="string"){const n=this.panels.findIndex(r=>r.name===t);if(n===-1)return;this.mode=n}for(let n=0;n<this.container.children.length;n++)this.container.children[n].style.display=n===this.mode?"block":"none"}begin(){this.beginTime=(performance||Date).now()}end(){this.frames++;const t=(performance||Date).now();return this.panels.forEach(n=>{this.updatePanel(n,t)}),t>=this.prevTime+Ss&&(this.prevTime=t,this.frames=0),t}updatePanel(t,n){switch(t.name){case kn.MS:{t.updateValue(n,this.beginTime);return}case kn.FPS:{t.updateValue(n,this.prevTime,this.frames);return}case kn.MB:{t.updateValue(n,this.prevTime);return}}}update(){this.beginTime=this.end()}}class Sx{}class tu extends Sx{constructor(n,r,i){super();I(this,"canvas");I(this,"context");I(this,"dom");I(this,"PR");I(this,"WIDTH");I(this,"HEIGHT");I(this,"TEXT_X");I(this,"TEXT_Y");I(this,"GRAPH_X");I(this,"GRAPH_Y");I(this,"GRAPH_WIDTH");I(this,"GRAPH_HEIGHT");I(this,"round",Math.round);this.name=n,this.fg=r,this.bg=i,this.PR=this.round((window==null?void 0:window.devicePixelRatio)||1),this.WIDTH=80*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=74*this.PR,this.GRAPH_HEIGHT=30*this.PR;const o=document.createElement("canvas");this.canvas=o,this.dom=o,o.width=this.WIDTH,o.height=this.HEIGHT,o.style.cssText="width:80px;height:48px";const s=o.getContext("2d");if(!s)throw new Error("Error. Impossible get 2d context of just created new canvas");this.context=s,this.drawPanelBase()}drawPanelGraph(n,r){const i=this.context;if(!i)throw new Error("Error. Impossible get 2d context of just created new canvas");let o=1/0,s=0;const a=this.round;o=Math.min(o,n),s=Math.max(s,n),i.fillStyle=this.bg,i.globalAlpha=1,i.fillRect(0,0,this.WIDTH,this.GRAPH_Y),i.fillStyle=this.fg,i.fillText(`${a(n)} ${this.name} (${a(o)}-${a(s)})`,this.TEXT_X,this.TEXT_Y),i.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),i.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),i.fillStyle=this.bg,i.globalAlpha=.9,i.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,a((1-n/r)*this.GRAPH_HEIGHT))}drawPanelBase(){const n=this.context;if(!n)throw new Error("Error. Impossible get 2d context of just created new canvas");n.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",n.textBaseline="top",n.fillStyle=this.bg,n.fillRect(0,0,this.WIDTH,this.HEIGHT),n.fillStyle=this.fg,n.fillText(String(this.name),this.TEXT_X,this.TEXT_Y),n.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),n.fillStyle=this.bg,n.globalAlpha=.9,n.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT)}}const kn={FPS:"FPS",MS:"MS",MB:"MB"};class Px extends tu{constructor(){super(...arguments);I(this,"name",kn.MS);I(this,"durationLimitMs",200)}updateValue(n,r){const i=n-r;this.drawPanelGraph(i,this.durationLimitMs)}}class _x extends tu{constructor(){super(...arguments);I(this,"name",kn.FPS);I(this,"fpsLimit",200);I(this,"updateOncePerSecond",!0)}updateValue(n,r,i){if(this.updateOncePerSecond&&n<r+Ss)return;const o=n-r,s=i*Ss/o;this.drawPanelGraph(s,this.fpsLimit)}}class Cx extends tu{constructor(){super(...arguments);I(this,"name",kn.MB);I(this,"memoryLimitMB",128)}updateValue(n,r){if(n>=r+Ss&&Jp){const i=window==null?void 0:window.performance.memory;this.drawPanelGraph(i.usedJSHeapSize/bd,this.memoryLimitMB||i.jsHeapSizeLimit/bd)}}}const Ex=(e=kn.MS)=>{const{showCanvasPerfomanceMonitor:t}=Dt(),[n,r]=y.useState();return y.useEffect(()=>{if(!t)return;const i=new xx;return i.showPanel(e),document.body.appendChild(i.dom),r(i),()=>{r(void 0),i.dom.remove(),i.destroy()}},[e,t]),n},Ix=({puzzleRef:e,activePiece:t,mousePosition:n,cameraScale:r,cameraPosition:i})=>{const[o,s]=y.useState(),[a,l]=y.useState();return y.useEffect(()=>{const c=e==null?void 0:e.current;if(!c)return;if(!t){s(void 0),l(void 0);return}const u=n;if(s(u),!u||!o||r<=0)return;const d=u.x-o.x,f=u.y-o.y;if(d===0&&f===0)return;const w=new Us(d,f).divide(r),S=new Cn(w.dx,w.dy);c.moveActivePiece(S);let P=O.create({x:t.position.x,y:t.position.y});if(t.parentPieceId){const g=c.pieces.getItemById(t.parentPieceId);g&&(P=O.create({x:g.position.x,y:g.position.y}))}P=mp(P,r,i),l(P)},[e,t,o,n,r,i]),a},Tx=({elementRef:e,puzzleRef:t,cameraScale:n,cameraPosition:r})=>{const[i,o]=y.useState(),s=y.useCallback(c=>{if((c==null?void 0:c.button)!==Rr)return;const u=e==null?void 0:e.current;if(!u)return;const d=t==null?void 0:t.current;if(!d)return;const f=qi(c,u),p=ys(f,n,r),w=new G(p.x,p.y),S=d.findPieceByPointingInsidePieceBoundaries(w);S&&d.selectActivePiece(S),o(S)},[o,e,n,r,t]),a=y.useCallback(c=>{if((c==null?void 0:c.button)!==Rr)return;o(void 0);const u=t==null?void 0:t.current;u&&u.unselectActivePiece()},[o,t]),l=y.useCallback(c=>{o(void 0);const u=t==null?void 0:t.current;u&&u.unselectActivePiece()},[t,o]);return y.useEffect(()=>{const c=e==null?void 0:e.current;if(!c)return;const u={passive:!0};return c.addEventListener("mousedown",s,u),c.addEventListener("mouseup",a,u),c.addEventListener("mouseleave",l,u),()=>{c.removeEventListener("mousedown",s,u),c.removeEventListener("mouseup",a,u),c.removeEventListener("mouseleave",l,u)}},[e,s,a,l]),i},kx=({elementRef:e,puzzleRef:t,cameraScale:n,cameraPosition:r})=>{const[i,o]=y.useState(),s=y.useCallback(c=>{c.preventDefault();const u=e==null?void 0:e.current;if(!u)return;const d=t==null?void 0:t.current;if(!d)return;const f=eu(c,u),p=ys(f,n,r),w=new G(p.x,p.y),S=d.findPieceByPointingInsidePieceBoundaries(w);S&&d.selectActivePiece(S),o(S)},[o,e,n,r,t]),a=y.useCallback(c=>{c.preventDefault(),o(void 0);const u=t==null?void 0:t.current;u&&u.unselectActivePiece()},[o,t]),l=y.useCallback(c=>{c.preventDefault(),o(void 0);const u=t==null?void 0:t.current;u&&u.unselectActivePiece()},[t,o]);return y.useEffect(()=>{const c=e==null?void 0:e.current;if(!c)return;const u={passive:!1};return c.addEventListener("touchstart",s,u),c.addEventListener("touchend",a,u),c.addEventListener("touchcancel",l,u),()=>{c.removeEventListener("touchstart",s,u),c.removeEventListener("touchend",a,u),c.removeEventListener("touchcancel",l,u)}},[e,s,a,l]),i},Nx=({elementRef:e,puzzleRef:t,cameraScale:n,cameraPosition:r})=>{const i=kx({elementRef:e,puzzleRef:t,cameraScale:n,cameraPosition:r}),o=Tx({elementRef:e,puzzleRef:t,cameraScale:n,cameraPosition:r});return i||o},jl="canvas-render",Ox=({context:e,puzzle:t,cameraPosition:n,cameraScale:r,isFirstRenderOfPuzzle:i,setIsFirstRenderOfPuzzle:o,debugSettingsShouldPrintPuzzleRenderTime:s,debugSettingsShouldDrawCenterOfWorld:a,debugSettingsShouldDrawPuzzleBoundaryPoints:l,debugSettingsShouldDrawPuzzlePiecesBoundaries:c,debugSettingsShouldDrawCachedTexturesBoundaries:u,debugSettingsShouldDrawCameraPosition:d})=>{e.save(),e.translate(te(n.x,r),te(n.y,r));const f=Math.floor(vs(e.canvas.width,r)),p=Math.floor(vs(e.canvas.height,r)),w=d?2:0,S=new Wo(-(n.x-w),-(n.y-w),f-w*2,p-w*2);if(t.renderByTilesTextures(e,r,S,{debugSettingsShouldDrawCachedTexturesBoundaries:u}),(i||s)&&(Kp(jl),Jc(jl,P=>`render ${P} ms`),i&&o(!1)),a&&Fe(e,te(0,r),te(0,r),"yellow"),l){const{p0:P,p2:g}=t.getBoundaryCornerPointsOfPiecesSpreadArea();Fe(e,te(P.x,r),te(P.y,r),"white",10),Fe(e,te(g.x,r),te(g.y,r),"white",10)}if(c&&t.pieces.forEach(P=>{const g=P.getWorldPosition();Si(e,te(g.x,r),te(g.y,r),te(P.width,r),te(P.height,r),"white",!0,1);const m=P.getPieceImageTargetSizeAndPosition();Si(e,te(m.x,r),te(m.y,r),te(m.width,r),te(m.height,r),"white",!0,1,!0,[2,2,5,5])}),d){const P=te(S.x,r),g=te(S.y,r);Fe(e,P,g,"aqua",18);const m=0,v=te(S.width,r),x=te(S.height,r);Si(e,P+m,g+m,v-m*2,x-m*2,"aqua")}e.restore()},Ax=({context:e,puzzle:t,canvasWidth:n,canvasHeight:r,cameraScale:i,cameraPosition:o,mousePosition:s,piecePositionInScreenCoordinates:a,showMarksForDirectionToPositionOutsideCameraViewport:l,debugSettingsShouldDrawCameraPosition:c,debugSettingsShouldDrawCameraViewportCenterPosition:u,debugSettingsShouldDrawDebugInfoForMarksForDirectionToPositionOutsideCameraViewport:d,debugSettingsShouldDrawMousePosition:f,debugSettingsShouldDrawActivePiecePosition:p,debugSettingsShouldDrawCachedTexturesBoundaries:w})=>{c&&Fe(e,0,0,"MediumSeaGreen"),u&&n>0&&r>0&&Fe(e,n/2,r/2,"MediumSeaGreen",30),l&&n>0&&r>0&&t.drawMarksForDirectionToPositionOutsideCameraViewport({context:e,puzzle:t,cameraPosition:o,cameraScale:i,cameraWidth:n,cameraHeight:r,isHighContrastVersion:!1,shoulShowDebugInfo:d,debugSettingsShouldDrawCachedTexturesBoundaries:w}),f&&s&&Fe(e,s==null?void 0:s.x,s==null?void 0:s.y,"pink",25),p&&a&&Fe(e,a==null?void 0:a.x,a==null?void 0:a.y,"black",15)},Lx=({canvasRef:e,puzzleRef:t,showMarksForDirectionToPositionOutsideCameraViewport:n=!0})=>{const r=Ex(),i=Dt(),{debugSettingsShouldDrawCenterOfWorld:o,debugSettingsShouldDrawPuzzleBoundaryPoints:s,debugSettingsShouldDrawPuzzlePiecesBoundaries:a,debugSettingsShouldDrawCachedTexturesBoundaries:l,debugSettingsShouldDrawCameraPosition:c,debugSettingsShouldDrawMousePosition:u,debugSettingsShouldDrawActivePiecePosition:d,debugSettingsShouldDrawCameraViewportCenterPosition:f,debugSettingsShouldDrawDebugInfoForMarksForDirectionToPositionOutsideCameraViewport:p,debugSettingsShouldPrintPuzzleRenderTime:w,debugSettingsShouldPrintPuzzleRenderTimeForFirstRender:S,experimentalUseNativeSmoothingQualityMethod:P}=i,[g,m]=y.useState(S),{position:v,scale:x}=vp(),_=Nx({elementRef:e,puzzleRef:t,cameraScale:x,cameraPosition:v}),{isPressed:T,position:C}=wx({elementRef:e}),E=y.useMemo(()=>T&&!_,[T,_]),k=Xi(),N=y.useCallback(()=>{k({type:"set-puzzle-was-touched"})},[k]);y.useEffect(()=>{E&&N()},[E,N]),nv({elementRef:e}),tv({isCameraMoving:E,mousePosition:C});const R=Ix({puzzleRef:t,activePiece:_,mousePosition:C,cameraScale:x,cameraPosition:v});y.useEffect(()=>{k(_?{type:"set-active-piece-id",pieceId:_.id}:{type:"set-active-piece-id",pieceId:void 0})},[_,k]);let j=0,B=0;const H=y.useCallback(()=>{r&&r.begin();const L=e==null?void 0:e.current;if(!L)return;const z=L.getContext("2d",{willReadFrequently:!0});if(!z)return;P&&(z.imageSmoothingEnabled=!0,z.imageSmoothingQuality="medium");const F=t.current;F&&((g||w)&&Qp(jl),z.clearRect(0,0,L.width,L.height),Ox({context:z,puzzle:F,cameraPosition:v,cameraScale:x,isFirstRenderOfPuzzle:g,setIsFirstRenderOfPuzzle:m,debugSettingsShouldPrintPuzzleRenderTime:w,debugSettingsShouldDrawCenterOfWorld:o,debugSettingsShouldDrawPuzzleBoundaryPoints:s,debugSettingsShouldDrawPuzzlePiecesBoundaries:a,debugSettingsShouldDrawCachedTexturesBoundaries:l,debugSettingsShouldDrawCameraPosition:c}),Ax({context:z,puzzle:F,canvasWidth:j,canvasHeight:B,cameraScale:x,cameraPosition:v,mousePosition:C,piecePositionInScreenCoordinates:R,showMarksForDirectionToPositionOutsideCameraViewport:n,debugSettingsShouldDrawCameraPosition:c,debugSettingsShouldDrawCameraViewportCenterPosition:f,debugSettingsShouldDrawDebugInfoForMarksForDirectionToPositionOutsideCameraViewport:p,debugSettingsShouldDrawMousePosition:u,debugSettingsShouldDrawActivePiecePosition:d,debugSettingsShouldDrawCachedTexturesBoundaries:l}),r&&r.end())},[r,e,P,t,g,w,v,C,R,x,o,s,a,l,c,f,n,j,B,p,u,d]);y.useEffect(()=>{t.current||S&&m(!0)},[S,t]);const[V]=y.useState(!1);y.useEffect(()=>{window==null||window.requestAnimationFrame(H)},[H,V]);const{canvasWidth:W,canvasHeight:Q}=gx(e,H);return[j,B]=[W,Q],{canvasWidth:j,canvasHeight:B,activePiece:_}},Fx="_CanvasContainer_lwehm_1",Rx="_Canvas_lwehm_1",bx="_InfoPanelContainer_lwehm_15",Dx="_InfoPanel_lwehm_15",zx="_SwitchingButtons_lwehm_32",Mx="_SwitchingButton_lwehm_32",Ht={CanvasContainer:Fx,Canvas:Rx,InfoPanelContainer:bx,InfoPanel:Dx,SwitchingButtons:zx,SwitchingButton:Mx},em="texture-cache",Bx=y.memo(function(){const t=y.useRef(null),[n,r]=y.useState("piece_100:100"),i=y.useCallback(({goToNext:a=!0})=>{const l=t.current;if(!l)return;const c=l.dataset.textureCacheIds;if(!c)return;const u=c.split(";").filter(w=>w).reverse(),d=u.findIndex(w=>w===n),f=u.length-1;let p=0;d===-1?p=0:(a?p=d+1:p=d-1,p<0&&(p=f),p>f&&(p=0)),r(u[p])},[n]);y.useLayoutEffect(()=>{const a=t.current;if(!a)return;const l=a.getContext("2d");l&&(l.clearRect(0,0,a.width,a.height),a.click())},[n]);const o=y.useCallback(()=>i({goToNext:!1}),[i]),s=y.useCallback(()=>i({goToNext:!0}),[i]);return h.jsxs("div",{className:Ht.CanvasContainer,children:[h.jsx("canvas",{ref:t,id:em,className:Ht.Canvas,width:264*10,height:350*10,"data-texture-cache-ids":"","data-texture-cache-id-active":n,onDoubleClick:s}),h.jsx("div",{className:Ht.InfoPanelContainer,children:h.jsxs("div",{className:Ht.InfoPanel,children:[h.jsx("div",{id:"texture-cache-active-id",className:Ht.ActiveTextureName,children:n}),h.jsxs("div",{className:Ht.SwitchingButtons,children:[h.jsx("button",{title:"previous",className:Ht.SwitchingButton,onClick:o,children:"<"}),h.jsx("button",{title:"next",className:Ht.SwitchingButton,onClick:s,children:">"})]})]})})]})}),Io=(e,t)=>{if(!e||!t)throw new Error("Error. Parameters width and height should be defined");const n=document.createElement("canvas");if(!n)throw new Error("Error. Impossible create HTMLCanvasElement");e>0&&(n.width=e),t>0&&(n.height=t);const r=n.getContext("2d");if(!r)throw new Error("Error. Imposible get 2d context of canvas");return{canvas:n,context:r}},jx=(e=50,t=50)=>{const r=e>t?t:e,i=Xp(r/50/2),o=1,s=50,a=.5;let l=i;l<o?l=o:l>s&&(l=s);const c=l*a/2,u={x:c,y:c},d={x:-c,y:-c};return{blurWidth:l,highlightOffsetPoint:u,shadowOffsetPoint:d,highlightOpacity:.5,shadowOpacity:.5}};let Yr;const Dd=(e=50,t=50)=>{const n=`${e}x${t}`;return Yr&&Yr[n]||(Yr={[n]:jx(e,t)}),Yr[n]};class Ps{constructor(){}static getCookedConnectedSideShapesPath2dFromCache(t){return this._instances.get(t)}static setCookedConnectedSideShapesPath2dToCache(t,n){this._instances.set(t,n)}static clear(){this._instances.clear()}}I(Ps,"_instances",new Map);class _s{constructor(){}static getCookedConnectedSideShapesFromCache(t){return this._instances.get(t)}static setCookedConnectedSideShapesToCache(t,n){this._instances.set(t,n)}static clear(){this._instances.clear()}}I(_s,"_instances",new Map);class Cs{constructor(){}static get(t){return this._instances.get(t)}static set(t,n){this._instances.set(t,n)}static clear(){this._instances.clear()}}I(Cs,"_instances",new Map);const Zr="highlight",Qr="shadow";class xt{constructor(){}static getCanvasAndContext(t){const n=this._getCanvasOrCreateNewOne(t),{alpha:r=!1,willReadFrequently:i=!1}=t,o=n.getContext("2d",{alpha:r,willReadFrequently:i})||void 0;if(!o)throw new Error("Error. Impossible to get CanvasRenderingContext2D");return{canvas:n,context:o}}static _getCanvasOrCreateNewOne(t){const n=this._instances.get(t);if(n)return n;const r=this._createCanvasInstance(t);return this._instances.set(t,r),r}static _createCanvasInstance(t){const{width:n,height:r}=t,i=document.createElement("canvas");if(!i)throw new Error("Error. Impossible create HTMLCanvasElement");return i.width=n,i.height=r,i}static clear(){this._instances.clear()}}I(xt,"_instances",new Map);const zd="L",Md="R";class Es{constructor(){}static get(t,n=!1){const r=n?zd:Md,i=this._instances.get(t);return i==null?void 0:i[r]}static set(t,n,r){const i=r?zd:Md;let o=this._instances.get(t);o===void 0?o={[i]:n}:o[i]=n,this._instances.set(t,o)}static clear(){this._instances.clear()}}I(Es,"_instances",new Map);class Is{constructor(){}static get(t){return this._instances.get(t)}static set(t,n){this._instances.set(t,n)}static clear(){this._instances.clear()}}I(Is,"_instances",new Map);const Gx=e=>e.map(t=>t.mirror(ye)),Hx=e=>{let t=Is.get(e);return t||(t=Gx(e),Is.set(e,t),t)},Ux=(e=0,t)=>{const n=Hx(t);if(!Ap(e))throw new Error("Error. Unsupported angle for side shape");return n.map(r=>r.rotate(e))},Wx=(e=0,t)=>{const n=t;if(!Ap(e))throw new Error("Error. Unsupported angle for side shape");return n.map(r=>r.rotate(e))},$x=(e=0)=>{let t=Yv();return Vv(e),t=t.map(n=>n.rotate(e)),t},Vx=(e,t=0,n)=>{switch(e){case Qc:return $x(t);case ji:return Ux(t,n);case Gi:return Wx(t,n)}},qx=(e,t,n=new Map,r=!1,i)=>{const o=360/t,s=rx(e,t,r),a=n.get(s)||Qc;let l=e*o;return r&&(l=-l),Vx(a,l,i)},Xx=(e,t,n,r,i=!1)=>{const o=Es.get(n,i);if(o)return px(n),o;let s=[];for(let a=0;a<e;a++){const l=qx(a,e,t,i,r);a>0&&l.shift(),s=s.concat(l)}return Es.set(n,s,i),s},Yx=(e,t,n,r)=>Xx(e,t,n,r,!1),Zx=(e,t=0,n=0)=>{const i=t/1,o=n/1;return e.map(a=>a.scale(i,o))};class Qx extends Kc{constructor({image:n,textureArea:r,sideShapeAsSocket:i,...o}){super(o);I(this,"_image");I(this,"_textureArea");I(this,"_sideShapeAsSocket");this._image=n,this._textureArea=r,this._sideShapeAsSocket=i}render(n){var r;if(!n)throw new Error("Error. Render parameter context not defined");if(!((r=this.nestedPile)!=null&&r.length)){this._renderTexture({context:n});return}this._renderNestedPilePieces(n)}_renderNestedPilePieces(n){var r;if(!n)throw new Error("Error. Render parameter context not defined");if(!((r=this.nestedPile)!=null&&r.length))throw new Error("Error. Impossible to render empty piece nested pile");this.nestedPile.forEach(i=>i.render(n))}_getMaskPathParts(n=0,r=0,i=1,o=1){const s=this._sideShapeAsSocket;let l=Yx(nx,this.sidesConnectionTypes,this.sidesConnectionTypesAsString,s);return l=Zx(l,i,o),l[0]=l[0].moveOnDelta(n,r),l}_getMaskPath2D(n,r=0,i=0,o=1,s=1,a=!1){if(!(n!=null&&n.length))throw new Error("Error. Parameter maskPath not defined or empty");const l=qv(n);return a&&console.log(l),new Path2D(l)}_drawMask(n,r,i=!1){i&&(n.fillStyle="#ee448899",n.fill(r)),n.clip(r),i&&(n.lineWidth=5*10,n.strokeStyle="black",n.stroke(r))}_drawBorder(n,r,i="black",o=1){if(!n)throw new Error("Error. Render parameter context not defined");n.save(),n.strokeStyle=i,n.lineWidth=o,n.stroke(r),n.restore()}_getPieceTargetTextureExpansionSize(){const n=this.sidesConnectionTypes.has(Zi)?this.height:0,r=this.sidesConnectionTypes.has(Qi)?this.width:0,i=this.sidesConnectionTypes.has(Ki)?this.height:0,o=this.sidesConnectionTypes.has(Ji)?this.width:0;return{expandToTop:n,expandToRight:r,expandToBottom:i,expandToLeft:o}}_getPieceImageSourceSizeAndPosition(){const{expandToTop:n,expandToRight:r,expandToBottom:i,expandToLeft:o}=this._getPieceTargetTextureExpansionSize(),s=this._textureArea.width/this.width,a=this._textureArea.height/this.height,l=this._textureArea.x-o*s,c=this._textureArea.y-n*a,u=o*s+this._textureArea.width+r*s,d=n*a+this._textureArea.height+i*a;return{x:l,y:c,width:u,height:d}}getSizeAndPosition(){const{x:n,y:r}=this.getWorldPosition(),i=this.width,o=this.height;return{x:n,y:r,width:i,height:o}}getBoundaryRectangleForGroupOfPieces(n,r,i=void 0){let o=0,s=0,a=0,l=0,c=0;n.forEach(P=>{var C;if(typeof i=="function"&&!i(P))return;let g=0,m=0,v=0,x=0;if((C=P.nestedPile)!=null&&C.length){const E=this.getBoundaryRectangleForGroupOfPieces(P.nestedPile,r,i);g=E.x,m=E.y,v=E.width,x=E.height}else{const E=P.getPieceImageTargetSizeAndPosition(r);g=E.x,m=E.y,v=E.width,x=E.height}const _=g+v,T=m+x;if(c===0){o=g,s=m,a=_,l=T,c++;return}g<o&&(o=g),m<s&&(s=m),_>a&&(a=_),T>l&&(l=T),c++});const u=a-o,d=l-s;return{x:o,y:s,width:u,height:d}}getPieceImageTargetSizeAndPosition(n){var g;if((g=this.nestedPile)!=null&&g.length)return this.getBoundaryRectangleForGroupOfPieces(this.nestedPile,n);const{x:r,y:i}=this.getWorldPosition(),o=this.width,s=this.height,{expandToTop:a,expandToRight:l,expandToBottom:c,expandToLeft:u}=this._getPieceTargetTextureExpansionSize(),d=typeof(n==null?void 0:n.x)=="number"?n==null?void 0:n.x:0,f=typeof(n==null?void 0:n.y)=="number"?n==null?void 0:n.y:0,p=r-u+d,w=i-a+f,S=u+o+l,P=a+s+c;return{x:p,y:w,width:S,height:P}}_getPieceMaskSizeAndPosition(){const n=this.getWorldPosition(),r=n.x,i=n.y,o=this.width,s=this.height;return{x:r,y:i,width:o,height:s}}_renderTexture({context:n,imageSourceOptions:r,imageTargetOptions:i,imageTargetMaskOptions:o,debugDrawning:s=!1}){if(!n)throw new Error("Error. Render parameter context not defined");if(!this._image)throw new Error("Error. Image of the piece not defined");n.save();const{x:a,y:l,width:c,height:u}=o||this._getPieceMaskSizeAndPosition(),d=this._getMaskPathParts(a,l,c,u),f=this._getMaskPath2D(d,a,l,c,u);this._drawMask(n,f,s);const{x:p,y:w,width:S,height:P}=r||this._getPieceImageSourceSizeAndPosition(),{x:g,y:m,width:v,height:x}=i||this.getPieceImageTargetSizeAndPosition();n.drawImage(this._image,p,w,S,P,g,m,v,x),n.restore()}}class Kx extends Qx{constructor({pieceClassDebugOptions:n,...r}){super(r);I(this,"_canvasWithTextureCache");I(this,"_cacheCanvasParams");I(this,"_cacheCanvasParamsForBevelEffect");I(this,"_pieceClassDebugOptions",{});I(this,"_renderToDebugTextureCacheCanvas");I(this,"_cacheIdByPieceConnectionTypesAndPositionAndSize");this._pieceClassDebugOptions={...this._pieceClassDebugOptions,...n}}get canvasWithTextureCache(){return this._canvasWithTextureCache}_renderTexture({context:n,debugDrawning:r=!1}){if(!n)throw new Error("Error. Render parameter context not defined");if(this._canvasWithTextureCache){this._renderCachedTexture(n,this._canvasWithTextureCache);return}this._prepareCachedTexture(r),this._renderCachedTexture(n,this._canvasWithTextureCache)}_prepareCachedTexture(n=!1){return this._canvasWithTextureCache=this._getRenderedTextureForCache({debugDrawning:n}),this._canvasWithTextureCache}_renderCachedTexture(n,r){if(!n)throw new Error("Error. Render parameter context not defined");if(!r)throw new Error("Error. Cached texture of the piece not defined");const i=0,o=0,{width:s,height:a}=this._getPieceImageSourceSizeAndPosition();n.save();const{x:l,y:c,width:u,height:d}=this.getPieceImageTargetSizeAndPosition();n.drawImage(r,i,o,s,a,l,c,u,d),n.restore()}_getPieceMaskSizeAndPositionForRenderToTexture(){const n=this._textureArea.width,r=this._textureArea.height,i=this._textureArea.width/this.width,o=this._textureArea.height/this.height,{expandToTop:s,expandToLeft:a}=this._getPieceTargetTextureExpansionSize(),l=a*i,c=s*o;return{x:l,y:c,width:n,height:r}}_getPieceImageTargetSizeAndPositionForRenderToTexture(){const{width:n,height:r}=this._getPieceImageSourceSizeAndPosition();return{x:0,y:0,width:n,height:r}}_getCacheCanvasParams(n,r){if(this._cacheCanvasParams)return this._cacheCanvasParams;const i=this._getPieceImageSourceSizeAndPosition(),{width:o,height:s}=i;return this._cacheCanvasParams={pieceId:this.id,width:n??o,height:r??s,alpha:!0,willReadFrequently:!0},this._cacheCanvasParams}_getCacheCanvasParamsForBevelEffect(){if(this._cacheCanvasParamsForBevelEffect)return this._cacheCanvasParamsForBevelEffect;const n=this._getPieceImageSourceSizeAndPosition(),{width:r,height:i}=n;return this._cacheCanvasParamsForBevelEffect={width:r,height:i,alpha:!0,willReadFrequently:!0},this._cacheCanvasParamsForBevelEffect}_getTextureCacheCanvasAndContext(n,r){const i=this._getCacheCanvasParams(n,r);return xt.getCanvasAndContext(i)}_getRenderedTextureForCache({debugDrawning:n=!1}){const r=this._getPieceImageSourceSizeAndPosition(),{x:i,y:o,width:s,height:a}=r,{canvas:l,context:c}=this._getTextureCacheCanvasAndContext(s,a);if(!c)throw new Error("Error. Texture cache canvas context not defined");if(!l)throw new Error("Error. Texture cache canvas not defined");c.save();const u=this._getPieceImageTargetSizeAndPositionForRenderToTexture(),d=this._getPieceMaskSizeAndPositionForRenderToTexture();if(this._pieceClassDebugOptions.showDebugTextureCacheCanvas){const T=document.querySelector(`#${em}`);if(T){T.dataset.textureCacheIds=T.dataset.textureCacheIds+`;${this.id}`;const C=()=>{if(T.dataset.textureCacheIdActive!==this.id)return;const E=T.getContext("2d")||void 0;super._renderTexture({context:E,imageSourceOptions:r,imageTargetOptions:u,imageTargetMaskOptions:d,debugDrawning:this._pieceClassDebugOptions.showDebugInfoForTextureCacheCanvas})};this._addRenderToDebugTextureCacheCanvasOnClick(T,C)}}const{x:f,y:p,width:w,height:S}=d;this._initAndGetCacheIdByPieceConnectionTypesAndPositionAndSize(f,p,w,S);const P=this._getMaskPathParts(f,p,w,S),g=this._getMaskPath2D(P,f,p,w,S);this._drawMask(c,g,n);const{x:m,y:v,width:x,height:_}=u;return c.drawImage(this._image,i,o,s,a,m,v,x,_),this._pieceClassDebugOptions.drawEdgeBevelHighlightAndShadow&&this._drawBevelLightsAndShadows(c,l,u,g),c.restore(),l}_addRenderToDebugTextureCacheCanvasOnClick(n,r){n&&(typeof this._renderToDebugTextureCacheCanvas=="function"&&n.removeEventListener("click",this._renderToDebugTextureCacheCanvas),this._renderToDebugTextureCacheCanvas=r,typeof this._renderToDebugTextureCacheCanvas=="function"&&(n.addEventListener("click",this._renderToDebugTextureCacheCanvas),n.click()))}_drawBevelEdgeEffectBySideConnectionTypeByShapePath2d(n,r=1,i=0,o=0,s=5,a){const l=n.width+(Math.abs(i)+s)*2,c=n.height+(Math.abs(o)+s)*2,{canvas:u,context:d}=Io(l,c);d.fillRect(0,0,l,c),d.globalCompositeOperation="destination-out",d.drawImage(n,Math.abs(i)+s,Math.abs(o)+s);const{canvas:f,context:p}=Io(n.width,n.height);return p.save(),a===Qr?(p.shadowColor="black",p.globalCompositeOperation="multiply"):a===Zr?(p.shadowColor="white",p.globalCompositeOperation="lighter"):p.shadowColor=a,p.globalAlpha=r,p.shadowOffsetX=i,p.shadowOffsetY=o,p.shadowBlur=s,p.drawImage(u,-(Math.abs(i)+s),-(Math.abs(o)+s)),p.restore(),p.globalCompositeOperation="destination-out",p.drawImage(u,-(Math.abs(i)+s),-(Math.abs(o)+s)),p.globalCompositeOperation="source-over",f}_drawBevelEdgeEffectBySideConnectionTypeForUnknownShape(n,r=1,i=0,o=0,s=5,a){const l=n.width+(Math.abs(i)+s)*2,c=n.height+(Math.abs(o)+s)*2,{canvas:u,context:d}=Io(l,c);d.fillRect(0,0,l,c),d.globalCompositeOperation="destination-out",d.drawImage(n,Math.abs(i)+s,Math.abs(o)+s);const{canvas:f,context:p}=Io(n.width,n.height);return p.save(),a===Qr?(p.shadowColor="black",p.globalCompositeOperation="multiply"):a===Zr?(p.shadowColor="white",p.globalCompositeOperation="lighter"):p.shadowColor=a,p.globalAlpha=r,p.shadowOffsetX=i,p.shadowOffsetY=o,p.shadowBlur=s,p.drawImage(u,-(Math.abs(i)+s),-(Math.abs(o)+s)),p.restore(),p.globalCompositeOperation="destination-out",p.drawImage(u,-(Math.abs(i)+s),-(Math.abs(o)+s)),p.globalCompositeOperation="source-over",f}_drawBevelEdgeEffectBySideConnectionTypeByShape(n,r,i,o=1,s=0,a=0,l=5,c=50,u=50){if(!r)throw new Error("Context not defined");if(n===Zr)r.shadowColor="white";else if(n===Qr)r.shadowColor="black";else throw new Error("Error. Unknown bevel effect type");r.globalAlpha=o,r.strokeStyle="black",r.lineWidth=l,r.shadowBlur=l,r.shadowOffsetX=s,r.shadowOffsetY=a,r.stroke(i)}_drawBevelLightsAndShadows(n,r,i,o){if(!r)throw new Error("Error. Render parameter canvas not defined");if(!n)throw new Error("Error. Render parameter context not defined");const{x:s,y:a,width:l,height:c}=i,u=this._initAndGetCacheIdByPieceConnectionTypesAndPositionAndSize(s,a,l,c);let d=Cs.get(u);d||(d=this._createBevelImageWithLightsAndShadowsByShape(i,o),Cs.set(u,d)),n.drawImage(d,s,a)}_createPieceShapeBevelEffectImage(n){const r=this._getCacheCanvasParamsForBevelEffect(),{canvas:i,context:o}=xt.getCanvasAndContext(r);if(!i)throw new Error("Error. Canvas not defined");if(!o)throw new Error("Error. Canvas context not defined");return{canvas:i,context:o}}_createBevelImageWithLightsAndShadowsByShape(n,r){const{canvas:i,context:o}=this._createPieceShapeBevelEffectImage(r),{blurWidth:s,highlightOpacity:a,highlightOffsetPoint:l,shadowOpacity:c,shadowOffsetPoint:u}=Dd(n.width,n.height),d=n.width,f=n.height,p=o;p.save(),(d||f)&&p.translate(-d,-f);const w=()=>{this._drawBevelEdgeEffectBySideConnectionTypeByShape(Zr,p,r,a,l.x+d,l.y+f,s,n.width,n.height)},S=()=>{this._drawBevelEdgeEffectBySideConnectionTypeByShape(Qr,p,r,c,u.x+d,u.y+f,s,n.width,n.height)},P=2;for(let g=0;g<P;g++)w(),S();return p.restore(),i}_createBevelImageWithLightsAndShadowsForUnknownShape(n,r,i){if(!n)throw new Error("Error. Render parameter canvas not defined");if(!r)throw new Error("Error. Render parameter context not defined");const o=n,{blurWidth:s,highlightOpacity:a,highlightOffsetPoint:l,shadowOpacity:c,shadowOffsetPoint:u}=Dd(i.width,i.height),d=this._drawBevelEdgeEffectBySideConnectionTypeForUnknownShape(o,a,l.x,l.y,s,Zr),f=this._drawBevelEdgeEffectBySideConnectionTypeForUnknownShape(d,c,u.x,u.y,s,Qr);return typeof r<"u"&&(r.drawImage(o,10,10),r.drawImage(d,10+this.width+10,10),r.drawImage(f,10+(this.width+10)*2,10)),f}_initAndGetCacheIdByPieceConnectionTypesAndPositionAndSize(n,r,i,o){if(this._cacheIdByPieceConnectionTypesAndPositionAndSize)return this._cacheIdByPieceConnectionTypesAndPositionAndSize;const s=[this.sidesConnectionTypesAsString,[n,r,i,o].join(",")].join("_");return this._cacheIdByPieceConnectionTypesAndPositionAndSize=s,this._cacheIdByPieceConnectionTypesAndPositionAndSize}_getMaskPathParts(n=0,r=0,i=1,o=1){const s=this._initAndGetCacheIdByPieceConnectionTypesAndPositionAndSize(n,r,i,o),a=_s.getCookedConnectedSideShapesFromCache(s);if(a)return Fd(s),a;const l=super._getMaskPathParts(n,r,i,o);return _s.setCookedConnectedSideShapesToCache(s,l),l}_getMaskPath2D(n,r=0,i=0,o=1,s=1,a=!1){const l=this._initAndGetCacheIdByPieceConnectionTypesAndPositionAndSize(r,i,o,s),c=Ps.getCookedConnectedSideShapesPath2dFromCache(l);if(c)return Fd(l),c;const u=super._getMaskPath2D(n,r,i,o,s,a);return Ps.setCookedConnectedSideShapesPath2dToCache(l,u),u}}class Jx extends Kx{constructor(){super(...arguments);I(this,"_cacheCanvasParamsForTextureCachedByCameraScale");I(this,"_textureCachedByCameraScale");I(this,"_textureCachedByCameraScaleSize",{width:0,height:0});I(this,"_scaleOfTextureCachedByCameraScale",1)}getTextureCachedByCameraScaleSize(){return this._textureCachedByCameraScaleSize}renderCachedByCameraScale(n,r,i){var o;if(!n)throw new Error("Error. Render parameter context not defined");if(!((o=this.nestedPile)!=null&&o.length)){this._renderTextureCachedByCameraScale(n,r,i);return}this._renderNestedPilePiecesCachedByCameraScale(n,r,i)}_renderNestedPilePiecesCachedByCameraScale(n,r,i){var o;if(!n)throw new Error("Error. Render parameter context not defined");if(!((o=this.nestedPile)!=null&&o.length))throw new Error("Error. Impossible to render empty piece nested pile");this.nestedPile.forEach(s=>s.renderCachedByCameraScale(n,r,i))}_renderTextureCachedByCameraScale(n,r,i,o=!1){if(!n)throw new Error("Error. Render parameter context not defined");if(isNaN(r))throw new Error("Error. Render parameter cameraScale not defined");if(!i)throw new Error("Error. Render parameter camera position not defined");if(this._textureCachedByCameraScale&&this._textureCachedByCameraScaleSize.width>0&&this._textureCachedByCameraScaleSize.height>0&&this._scaleOfTextureCachedByCameraScale===r){this._renderCachedTextureCachedByCameraScale(n,this._textureCachedByCameraScale,this._textureCachedByCameraScaleSize,r,i);return}this._scaleOfTextureCachedByCameraScale=r,this._textureCachedByCameraScale=this._getRenderedTextureForCacheCachedByCameraScale({cameraScale:r,debugDrawning:o}),this._textureCachedByCameraScaleSize={width:this._textureCachedByCameraScale.width,height:this._textureCachedByCameraScale.height},this._renderCachedTextureCachedByCameraScale(n,this._textureCachedByCameraScale,this._textureCachedByCameraScaleSize,r,i)}_renderCachedTextureCachedByCameraScale(n,r,i,o,s){if(!n)throw new Error("Error. Render parameter context not defined");if(!r)throw new Error("Error. Cached texture not defined");if(!i||i.width<1||i.height<1)throw new Error("Error. Cached texture size not defined");const a=0,l=0,{width:c,height:u}=i,d=c,f=u,{x:p,y:w}=this.getPieceImageTargetSizeAndPosition(s);n.drawImage(r,a,l,c,u,p*o,w*o,d,f)}_getRenderedTextureForCacheCachedByCameraScale({cameraScale:n,debugDrawning:r=!1}){const i=this.canvasWithTextureCache||this._prepareCachedTexture(r),o=0,s=0,a=i.width,l=i.height,{width:c,height:u}=this.getPieceImageTargetSizeAndPosition(),d=0,f=0,p=c*n,w=u*n,{canvas:S,context:P}=this._getTextureCacheCanvasAndContextCachedByCameraScale(p,w);if(!P)throw new Error("Error. Texture cache canvas context not defined");if(!S)throw new Error("Error. Texture cache canvas not defined");return(S.width!==p||S.height!==w)&&(S.width=p,S.height=w),P.clearRect(0,0,p,w),P.save(),P.drawImage(i,o,s,a,l,d,f,p,w),P.restore(),S}_getTextureCacheCanvasAndContextCachedByCameraScale(n,r){const i=this._getCacheCanvasParamsCachedByCameraScale(n,r);return xt.getCanvasAndContext(i)}_getCacheCanvasParamsCachedByCameraScale(n,r){return this._cacheCanvasParamsForTextureCachedByCameraScale?this._cacheCanvasParamsForTextureCachedByCameraScale:(this._cacheCanvasParamsForTextureCachedByCameraScale={type:"dynamic-texture-scaled-from-original-by-camera-scale",pieceId:this.id,width:n,height:r,alpha:!0,willReadFrequently:!0},this._cacheCanvasParamsForTextureCachedByCameraScale)}}const eS=(e,t,n,r,i,o="gray",s=1,a=1,l=1)=>{e&&(e.save(),e.beginPath(),e.setLineDash([a,l]),e.moveTo(t,n),e.lineTo(r,i),e.lineWidth=s,e.strokeStyle=o,e.stroke(),e.restore())},tS=(e,t,n,r,i,o,s,a)=>{if(e===n&&t===r||i===s&&o===a)return;const l=(a-o)*(n-e)-(s-i)*(r-t);if(l===0)return;const c=((s-i)*(t-o)-(a-o)*(e-i))/l,u=((n-e)*(t-o)-(r-t)*(e-i))/l;if(c<0||c>1||u<0||u>1)return;const d=e+c*(n-e),f=t+c*(r-t);return{x:d,y:f}},nS=(e,t,n,r)=>{const i=tS(e.x,e.y,t.x,t.y,n.x,n.y,r.x,r.y);if(i)return O.create(i)},Bd=(e,t)=>{const n=nS(e[0],e[1],t[0],t[1]);if(n)return O.create(n)};function rS(e,t){return e.filter(n=>!t.includes(n)).concat(t.filter(n=>!e.includes(n)))}class Nn{constructor(t,n,r,i){this.p0=t,this.p1=n,this.p2=r,this.p3=i}static create({p0:t=O.getZeroPoint(),p1:n=O.getZeroPoint(),p2:r=O.getZeroPoint(),p3:i=O.getZeroPoint()}){return new Nn(t,n,r,i)}static isPointWithinArea(t,n){const{p0:r,p2:i}=n,{x:o,y:s}=t;return!(o<r.x||o>i.x||s<r.y||s>i.y)}static isPointWithinAreaByCornerPoints(t,n,r){const i=t.x,o=t.y,s=n,a=r;return!(i<s.x||i>a.x||o<s.y||o>a.y)}static doTwoAreasIntersect(t,n){const r=t.p0,i=t.p2,o=n.p0,s=n.p2;return Nn.doTwoAreasIntersectByCornerPoints(r,i,o,s)}static doTwoAreasIntersectByCornerPoints(t,n,r,i){const o=t,s=n,a=r,l=i;let c=!0,u=!0;return(s.x<a.x||o.x>l.x)&&(c=!1),(s.y<a.y||o.y>l.y)&&(u=!1),c&&u}static getDefaultArea(){return new Nn(new O(0,0),new O(1,0),new O(1,1),new O(0,1))}toString(){return`Area {p0: ${this.p0}, p1: ${this.p1}, p2: ${this.p2}, p3: ${this.p3}}`}}class iS extends ux{constructor(n){const{image:r}=n;super(n);I(this,"image");I(this,"textureArea");I(this,"imageScaleHorizontal",1);I(this,"imageScaleVertical",1);this.image=r}render(n){if(!n)throw new Error("Error. Render parameter context not defined");this.pieces.forEach(r=>r.render(n))}getAdditionalPieceOptions(n,r){const{textureArea:i}=this._additionalPieceOptions;if(n!==void 0&&r!==void 0){const o=i.x,s=i.y,a=i.width,l=i.height,c=this._numberOfPiecesPerWidth,u=this._numberOfPiecesPerHeight,d=a/c,f=l/u,p=o+n*d,w=s+r*f,S=new vi(p,w,d,f);return{...this._additionalPieceOptions,textureArea:S}}return super.getAdditionalPieceOptions()}}class oS extends iS{}class sS{constructor(t,n,r,i=[]){I(this,"piecesIds",[]);this.id=t,this.position=n,this.size=r,this.piecesIds=i}addPieceId(t){this.piecesIds.push(t)}getPiecesIds(){return this.piecesIds}}class jd{constructor(t,n){I(this,"tileSize");I(this,"tiles",new Map);this.tileSize={width:t,height:n}}forEach(t){this.tiles.forEach(t)}getById(t){return this.tiles.get(t)}addTile(t,n,r){let i=this.tiles.get(t);i?i.addPieceId(r):(i=new sS(t,n,this.tileSize,[r]),this.tiles.set(t,i))}addTilesWithinBoundary(t,n){const r=Math.floor(t.x/this.tileSize.width),i=Math.floor(t.y/this.tileSize.height),o=Math.floor((t.x+t.width)/this.tileSize.width),s=Math.floor((t.y+t.height)/this.tileSize.height);if(!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(o)||!Number.isFinite(s)){console.log(`Error. Boundary area allocated by the piece ${n} has incorrect size`);return}for(let a=i;a<=s;a++)for(let l=r;l<=o;l++){const c=`tile_${l}_${a}`,u=new O(l*this.tileSize.width,a*this.tileSize.height);this.addTile(c,u,n)}}}const Gd=300;class aS extends oS{constructor(){super(...arguments);I(this,"allInOneLayerTexture");I(this,"allInOneLayerTextureParams");I(this,"allInOneLayerTextureCameraScale",1);I(this,"baseLayerTexture");I(this,"baseLayerTextureParams");I(this,"baseLayerTextureCameraScale",1);I(this,"activePieceLayerTexture");I(this,"activePieceLayerTextureParams");I(this,"activePieceLayerTextureCameraScale",1);I(this,"tilesTextures",new Map);I(this,"tilesTexturesParams",new Map);I(this,"theLatestCameraScale");I(this,"theLatestTiles");I(this,"cacheParamsForTextureOfDirectionMarkDefaultContrast");I(this,"cacheParamsForTextureOfDirectionMarkHighContrast");I(this,"directionMarkDefaultContrastTexture");I(this,"directionMarkHighContrastTexture")}renderByTilesTextures(n,r,i,o){if(!n)throw new Error("Error. Render parameter context not defined");const s={width:Gd,height:Gd},a={width:vs(s.width,r),height:vs(s.height,r)};let l;this.theLatestCameraScale!==r||this.activePieceLayerTexture&&!this.activePiece?l=this.renderEveryPieceIntoTileTextures(r,i,a,s):l=this.renderEveryPieceIntoTileTexturesExceptActivePiece(r,i,a,s),l&&l.forEach(c=>{this.renderCachedTextureOfTile(n,c,o)}),this.activePiece?this.renderActivePieceLayerTexture(n,r,i,o):this.activePieceLayerTexture=void 0}renderEveryPieceIntoTileTexturesExceptActivePiece(n,r,i,o){let s;const a=u=>!this.isSelectedPiece(u,!1);s=this.getTilesWithContentWithinCameraViewport(r,i,a);const l=this.theLatestTiles;this.theLatestTiles=s;let c=[];return l?c=this.getTilesWithChangedContentWithinCameraViewport(l,s):c=s,c&&c.forEach(u=>{const d={id:u.id,x:te(u.position.x,n),y:te(u.position.y,n),width:o.width,height:o.height},f=this.getRenderedTileTexture({tile:u,cameraScale:n,tileTextureParamsInScreenCoordinates:d});this.tilesTextures.set(u.id,f),this.tilesTexturesParams.set(u.id,d)}),s}renderEveryPieceIntoTileTextures(n,r,i,o){let s;this.theLatestCameraScale=n,this.tilesTextures.clear();const a=l=>!0;return s=this.getTilesWithContentWithinCameraViewport(r,i,a),this.theLatestTiles=s,s.forEach(l=>{const c={id:l.id,x:te(l.position.x,n),y:te(l.position.y,n),width:o.width,height:o.height},u=this.getRenderedTileTexture({tile:l,cameraScale:n,tileTextureParamsInScreenCoordinates:c});this.tilesTextures.set(l.id,u),this.tilesTexturesParams.set(l.id,c)}),s}renderCachedTextureOfTile(n,r,i){if(!n)throw new Error("Error. Render context not defined");const o=this.tilesTextures.get(r.id),s=this.tilesTexturesParams.get(r.id);if(!o)throw new Error("Error. Cached texture of the tile does not defined");if(!s)throw new Error("Error. Cached texture params of the tile does not defined");const a=0,l=0,{width:c,height:u}=s,{x:d,y:f,width:p,height:w}=s;n.save(),(o.width>0||o.height>0)&&n.drawImage(o,a,l,c,u,d,f,p,w),i!=null&&i.debugSettingsShouldDrawCachedTexturesBoundaries&&this.drawTextureBoundaries(n,d,f,p,w),n.restore()}getTilesWithChangedContentWithinCameraViewport(n,r){const i=[];return r.forEach(o=>{const s=n.getById(o.id);if(!s)i.push(o);else{const a=s.getPiecesIds(),l=o.getPiecesIds();rS(a,l).length&&i.push(o)}}),i}getTilesWithActivePieceWithinCameraViewport(n,r){const i=new jd(r.width,r.height),o=this.activePiece;if(!o)return i;if(o.parentPieceId){const l=this.pieces.getItemById(o.parentPieceId);return!l||!l.nestedPile||this.gatherTilesWithContent(i,l.nestedPile,n),i}const s=o.getPieceImageTargetSizeAndPosition(),a=Wo.getIntersectionBoundaryOfTwoBoundaries(s,n);return a&&i.addTilesWithinBoundary(a,o.id),i}getTilesWithContentWithinCameraViewport(n,r,i){const o=new jd(r.width,r.height);return this.gatherTilesWithContent(o,this.pieces,n,i),o}gatherTilesWithContent(n,r,i,o=void 0){r.forEach(s=>{var c;if(typeof o=="function"&&!o(s))return;if((c=s.nestedPile)!=null&&c.length){this.gatherTilesWithContent(n,s.nestedPile,i,o);return}const a=s.getPieceImageTargetSizeAndPosition(),l=Wo.getIntersectionBoundaryOfTwoBoundaries(a,i);l&&n.addTilesWithinBoundary(l,s.id)})}renderByTexturesCachedByCameraScale_DEPRECATED(n,r,i,o,s){if(!n)throw new Error("Error. Render parameter context not defined");const a=new Wo(i.x,i.y,o.x,o.y);this.activePiece?(this.allInOneLayerTexture=void 0,this.renderBaseLayerTexture(n,r,a,s),this.renderActivePieceLayerTexture(n,r,a,s)):(this.baseLayerTexture=void 0,this.activePieceLayerTexture=void 0,this.renderAllInOneLayerTexture(n,r,a,s))}getRenderedTileTexture({tile:n,cameraScale:r,tileTextureParamsInScreenCoordinates:i}){const o={id:i.id,width:i.width,height:i.height,alpha:!0,willReadFrequently:!0},{canvas:s,context:a}=xt.getCanvasAndContext(o);if(!a)throw new Error("Error. Texture canvas context not defined");if(!s)throw new Error("Error. Texture canvas not defined");a.clearRect(0,0,a.canvas.width,a.canvas.height),(s.width!==i.width||s.height!==i.height)&&(s.width=i.width,s.height=i.height),a.save();const l=new O(-n.position.x,-n.position.y);return n.getPiecesIds().forEach(u=>{const d=this.pieces.getItemById(u);if(!d)throw new Error("Error. Piece id noted for the tile texture does not exists in the pieces pile");d.renderCachedByCameraScale(a,r,l)}),a.restore(),s}renderAllInOneLayerTexture(n,r,i,o){if(!n)throw new Error("Error. Render parameter context not defined");if(this.allInOneLayerTexture&&r==this.allInOneLayerTextureCameraScale){this.renderCachedTextureForAllInOneLayer(n,this.allInOneLayerTexture,r,i,o);return}this.allInOneLayerTextureCameraScale=r,this.allInOneLayerTexture=this.getRenderedTextureForAllInOneLayer({cameraScale:r,cameraBoundary:i}),this.renderCachedTextureForAllInOneLayer(n,this.allInOneLayerTexture,r,i,o)}getTextureCanvasAndContextForAllInOneLayer(n,r,i,o){const s=this.getTextureParamsForAllInOneLayer(n,r,i,o);return xt.getCanvasAndContext(s)}getTextureParamsForAllInOneLayer(n,r,i,o){if(this.allInOneLayerTextureParams)return this.allInOneLayerTextureParams;const{width:s,height:a}=this.getTextureSizeAndPositionForAllInOneLayer(i,o);return this.allInOneLayerTextureParams={id:"all-in-one-layer",width:n??s,height:r??a,alpha:!0,willReadFrequently:!0},this.allInOneLayerTextureParams}renderCachedTextureOfLayer(n,r,i,o,s,a){if(!n)throw new Error("Error. Render context not defined");if(!r)throw new Error("Error. Cached texture of the layer does not defined");const l=0,c=0,{width:u,height:d}=s,{x:f,y:p,width:w,height:S}=s;n.save(),(r.width>0||r.height>0)&&n.drawImage(r,l,c,u,d,f,p,w,S),a!=null&&a.debugSettingsShouldDrawCachedTexturesBoundaries&&this.drawTextureBoundaries(n,f,p,w,S),n.restore()}drawTextureBoundaries(n,r,i,o,s){Si(n,r+2,i+2,o-2*2,s-2*2,"black",!0,1,!0,[5,5])}renderCachedTextureForAllInOneLayer(n,r,i,o,s){const a=this.getTextureSizeAndPositionForAllInOneLayer(i,o);this.renderCachedTextureOfLayer(n,r,i,o,a,s)}getRenderedTextureForAllInOneLayer({cameraScale:n,cameraBoundary:r}){const i=this.getTextureSizeAndPositionForAllInOneLayer(n,r),{canvas:o,context:s}=this.getTextureCanvasAndContextForAllInOneLayer(1,1,1,r);if(!s)throw new Error("Error. Texture canvas context not defined");if(!o)throw new Error("Error. Texture canvas not defined");return s.clearRect(0,0,s.canvas.width,s.canvas.height),o.width=i.width,o.height=i.height,s.save(),this.pieces.forEach(a=>{if(!this.isPieceVisibleInCameraViewport_OLD_INCORRECT(r,a))return;const l=new O(-i.x/n,-i.y/n);a.renderCachedByCameraScale(s,n,l)}),s.restore(),o}isPieceVisibleInTileArea(n,r,i){const o={x:n.x,y:n.y},s={x:n.x+r.width,y:n.y+r.height},{x:a,y:l,width:c,height:u}=i.getPieceImageTargetSizeAndPosition(),d=a+c,f=l+u,p={x:a,y:l},w={x:d,y:f};return Nn.doTwoAreasIntersectByCornerPoints(p,w,o,s)}isPieceVisibleInCameraViewport_OLD_INCORRECT(n,r){const i={x:-n.x,y:-n.y},o={x:-n.x+n.width,y:-n.y+n.height},{x:s,y:a,width:l,height:c}=r.getPieceImageTargetSizeAndPosition(),u=s+l,d=a+c,f={x:s,y:a},p={x:u,y:d};return Nn.doTwoAreasIntersectByCornerPoints(f,p,i,o)}isPieceVisibleInCameraViewport(n,r){const i={x:n.x,y:n.y},o={x:n.x+n.width,y:n.y+n.height},{x:s,y:a,width:l,height:c}=r.getPieceImageTargetSizeAndPosition(),u=s+l,d=a+c,f={x:s,y:a},p={x:u,y:d};return Nn.doTwoAreasIntersectByCornerPoints(f,p,i,o)}getBoundaryRectangleForGroupOfPiecesInWorldCoordinates(n,r,i=void 0,o=!0){let s=0,a=0,l=0,c=0,u=!1;n.forEach(g=>{if(typeof i=="function"&&!i(g))return;const{x:m,y:v,width:x,height:_}=g.getPieceImageTargetSizeAndPosition(),T=m+x,C=v+_;if(!(o&&!this.isPieceVisibleInCameraViewport(r,g))){if(!u){s=m,a=v,l=T,c=C,u=!0;return}m<s&&(s=m),v<a&&(a=v),T>l&&(l=T),C>c&&(c=C)}});const d=l-s,f=c-a;return{x:s,y:a,width:d,height:f}}getBoundaryRectangleForGroupOfPieces(n,r,i,o=void 0,s=!0){const{x:a,y:l,width:c,height:u}=this.getBoundaryRectangleForGroupOfPiecesInWorldCoordinates(n,i,o,s),d=Math.floor(a*r),f=Math.floor(l*r),p=Math.floor(c*r),w=Math.floor(u*r);return{x:d,y:f,width:p,height:w}}getTextureSizeAndPositionForLayer(n,r,i=void 0,o=!0){return this.getBoundaryRectangleForGroupOfPieces(this.pieces,n,r,i,o)}getTextureSizeAndPositionForAllInOneLayer(n,r){return this.getTextureSizeAndPositionForLayer(n,r)}isEmptyBaseLayerTexture(){return!!(this.baseLayerTexture&&(this.baseLayerTexture.width===0||this.baseLayerTexture.height===0))}renderBaseLayerTexture(n,r,i,o){if(!n)throw new Error("Error. Render parameter context not defined");this.isEmptyBaseLayerTexture()||(this.baseLayerTextureCameraScale=r,this.baseLayerTexture=this._getRenderedTextureForBaseLayer({cameraScale:r,cameraBoundary:i}),!this.isEmptyBaseLayerTexture()&&this.renderCachedTextureForBaseLayer(n,this.baseLayerTexture,r,i,o))}renderActivePieceLayerTexture(n,r,i,o){if(!n)throw new Error("Error. Render parameter context not defined");if(this.activePieceLayerTexture&&r==this.activePieceLayerTextureCameraScale){this.renderCachedTextureForActivePieceLayer(n,this.activePieceLayerTexture,r,i,o);return}this.activePieceLayerTextureCameraScale=r,this.activePieceLayerTexture=this.getRenderedTextureForActivePieceLayer({cameraScale:r,cameraBoundary:i}),this.renderCachedTextureForActivePieceLayer(n,this.activePieceLayerTexture,r,i,o)}renderCachedTextureForBaseLayer(n,r,i,o,s){const a=this.getTextureSizeAndPositionForBaseLayer(i,o);this.renderCachedTextureOfLayer(n,r,i,o,a,s)}renderCachedTextureForActivePieceLayer(n,r,i,o,s){const a=this.getTextureSizeAndPositionForActivePieceLayer(i,o);this.renderCachedTextureOfLayer(n,r,i,o,a,s)}isSelectedPiece(n,r=!1){var i;if(!n)return!1;if(this.activePiece&&n.id===this.activePiece.id)return!0;if(r){if(n.parentPieceId!==void 0)return this.isSelectedPiece(this.pieces.getItemById(n.parentPieceId))}else if((i=n.nestedPile)!=null&&i.length)return n.nestedPile.find(s=>this.isSelectedPiece(s))!==void 0;return!1}getTextureSizeAndPositionForBaseLayer(n,r){return this.getTextureSizeAndPositionForLayer(n,r,i=>!this.isSelectedPiece(i),!1)}getTextureSizeAndPositionForActivePieceLayer(n,r){return this.getTextureSizeAndPositionForLayer(n,r,i=>this.isSelectedPiece(i,!1),!1)}_getRenderedTextureForBaseLayer({cameraScale:n,cameraBoundary:r}){const i=this.getTextureSizeAndPositionForBaseLayer(n,r),{canvas:o,context:s}=this.getTextureCanvasAndContextForBaseLayer(1,1,1,r);if(!s)throw new Error("Error. Texture canvas context not defined");if(!o)throw new Error("Error. Texture canvas not defined");return s.clearRect(0,0,s.canvas.width,s.canvas.height),o.width=i.width,o.height=i.height,s.save(),this.pieces.forEach(a=>{if(this.isSelectedPiece(a)||!this.isPieceVisibleInCameraViewport_OLD_INCORRECT(r,a))return;const l=new O(-i.x/n,-i.y/n);a.renderCachedByCameraScale(s,n,l)}),s.restore(),o}getRenderedTextureForActivePieceLayer({cameraScale:n,cameraBoundary:r}){const i=this.getTextureSizeAndPositionForActivePieceLayer(n,r),{canvas:o,context:s}=this.getTextureCanvasAndContextForActivePieceLayer(1,1,1,r);if(!s)throw new Error("Error. Texture canvas context not defined");if(!o)throw new Error("Error. Texture canvas not defined");return s.clearRect(0,0,s.canvas.width,s.canvas.height),o.width=i.width,o.height=i.height,s.save(),this.pieces.forEach(a=>{if(!this.isSelectedPiece(a,!1))return;const l=new O(-i.x/n,-i.y/n);a.renderCachedByCameraScale(s,n,l)}),s.restore(),o}getTextureParamsForBaseLayer(n,r,i,o){if(this.baseLayerTextureParams)return this.baseLayerTextureParams;const{width:s,height:a}=this.getTextureSizeAndPositionForBaseLayer(i,o);return this.baseLayerTextureParams={id:"base-layer",width:n??s,height:r??a,alpha:!0,willReadFrequently:!0},this.baseLayerTextureParams}getTextureParamsForActivePieceLayer(n,r,i,o){if(this.activePieceLayerTextureParams)return this.activePieceLayerTextureParams;const{width:s,height:a}=this.getTextureSizeAndPositionForActivePieceLayer(i,o);return this.activePieceLayerTextureParams={id:"active-piece-layer",width:n??s,height:r??a,alpha:!0,willReadFrequently:!0},this.activePieceLayerTextureParams}getTextureCanvasAndContextForBaseLayer(n,r,i,o){const s=this.getTextureParamsForBaseLayer(n,r,i,o);return xt.getCanvasAndContext(s)}getTextureCanvasAndContextForActivePieceLayer(n,r,i,o){const s=this.getTextureParamsForActivePieceLayer(n,r,i,o);return xt.getCanvasAndContext(s)}getRectangeLineSegments(n,r,i,o){const s=O.create({x:n,y:r}),a=O.create({x:n+i,y:r}),l=O.create({x:n+i,y:r+o}),c=O.create({x:n,y:r+o});return[[s,a],[a,l],[l,c],[c,s]]}drawMarksForDirectionToPositionOutsideCameraViewport({context:n,puzzle:r,cameraPosition:i,cameraScale:o,cameraWidth:s,cameraHeight:a,isHighContrastVersion:l=!1,shoulShowDebugInfo:c=!1,debugSettingsShouldDrawCachedTexturesBoundaries:u=!1}){if(!n||!r)return;const d=O.getZeroPoint();c&&Fe(n,d.x,d.y,"Tomato",32);const f=te(r.pieceSideSize/2*1.2,o),p=O.create({x:d.x-f,y:d.y-f}),w=s+f*2,S=a+f*2,P=this.getRectangeLineSegments(p.x,p.y,w,S),g=this.getRectangeLineSegments(d.x,d.y,s,a),m=O.create({x:d.x+s/2,y:d.y+a/2});c&&Fe(n,m.x,m.y,"DodgerBlue",10);const v={width:20,height:20},x=new O(-v.width/2,-v.height/2);r.pieces.forEach(_=>{const{x:T,y:C}=_.getCenterPointPosition(),E=mp(O.create({x:T,y:C}),o,i);for(let k=0;k<P.length;k++){c&&eS(n,m.x,m.y,E.x,E.y,"white",2,2,2);const N=Bd([E,m],P[k]);if(N){const R=Bd([E,m],g[k]);if(!R)return;c&&(Fe(n,N.x,N.y,"#e5e8",150,!0,3),Fe(n,R.x,R.y,"#e568",120,!0,3)),this.renderDirectionMark(n,v,R,x,l,u);return}}}),c&&Si(n,d.x,d.y,s,a,"yellow",!0,2,!1)}renderDirectionMark(n,r,i,o,s=!1,a=!1){s?this.directionMarkHighContrastTexture||(this.directionMarkHighContrastTexture=this.getRenderedTextureForDirectionMark(!0,r.width,r.height)):this.directionMarkDefaultContrastTexture||(this.directionMarkDefaultContrastTexture=this.getRenderedTextureForDirectionMark(!1,r.width,r.height)),s?this.renderCachedTextureForDirectionMark(n,this.directionMarkHighContrastTexture,i,o,a):this.renderCachedTextureForDirectionMark(n,this.directionMarkDefaultContrastTexture,i,o,a)}renderCachedTextureForDirectionMark(n,r,i,o,s=!1){if(!r)throw new Error("Error. Cached texture of the layer does not defined");n.drawImage(r,0,0,r.width,r.height,i.x+o.x,i.y+o.y,r.width,r.height),s&&this.drawTextureBoundaries(n,i.x+o.x,i.y+o.y,r.width,r.height)}getRenderedTextureForDirectionMark(n=!1,r=20,i=20){const{canvas:o,context:s}=this.getTextureCanvasAndContextForDirectionMark(r,i,n);if(!s)throw new Error("Error. Texture canvas context not defined");if(!o)throw new Error("Error. Texture canvas not defined");s.clearRect(0,0,s.canvas.width,s.canvas.height),o.width=r,o.height=i;const a=r/2,l=a/10,c=a-l;return s.save(),n?(Fe(s,a,a,"#eee",c,!1,l),Fe(s,a,a,"#444",c*.8,!1,l)):Fe(s,a,a,"#fff6",c,!1,l),s.restore(),o}getTextureCanvasAndContextForDirectionMark(n,r,i=!1){this.cacheParamsForTextureOfDirectionMarkDefaultContrast||(this.cacheParamsForTextureOfDirectionMarkDefaultContrast={id:"direction-mark-default",width:n,height:r,alpha:!0,willReadFrequently:!0}),this.cacheParamsForTextureOfDirectionMarkHighContrast||(this.cacheParamsForTextureOfDirectionMarkHighContrast={id:"direction-mark-high-contrast",width:n,height:r,alpha:!0,willReadFrequently:!0});const o=i?this.cacheParamsForTextureOfDirectionMarkHighContrast:this.cacheParamsForTextureOfDirectionMarkDefaultContrast;return xt.getCanvasAndContext(o)}}const lS=1,cS=-1,La="puzzle-creation",Fa=50,Ra=50,uS=({canvasWidth:e,canvasHeight:t,puzzle:n})=>{const r=e-Fa*2,i=t-Ra*2,{p0:o,p2:s}=n.getBoundaryCornerPointsOfPiecesSpreadArea(),a=new O(o.x,o.y),l=new O(s.x,s.y),c=l.x-a.x,u=l.y-a.y;let d=r/c;u*d>i&&(d=i/u);let p=d;p=Bc(p,zc,Mc);const w=(e-Fa*2)/p,S=(t-Ra*2)/p,P=Fa/p,g=Ra/p,m=P+(w-c)/2-a.x,v=g+(S-u)/2-a.y,x=new O(m,v);return{scale:p,position:x}},Ys=async(e,t=!1)=>new Promise((n,r)=>{if(!e){r(void 0);return}const i=new Image;i.onload=()=>{n(i)},i.onabort=()=>{r(void 0)},i.onerror=o=>{console.error("Error to load the image from url error",o),r(void 0)},t&&(i.crossOrigin="anonymous"),i.referrerPolicy="no-referrer",i.src=e}),dS=y.forwardRef(function({isFullscreenModeActive:t=!1,toggleFullscreenMode:n,children:r},i){const{challengeId:o,imageSrc:s,boundaryPoints:a,piecesPositions:l,numberOfPiecesPerWidth:c,numberOfPiecesPerHeight:u,pieceWidth:d,connectionActivationAreaSideSizeFractionFromPieceSideSize:f,pieceSideShapeName:p,isSidebarOpen:w}=Ke(),S=Dt(),{debugSettingsShouldPrintPuzzleCreationTime:P,debugSettingsUseSolvedPuzzlePiecesPositionsMultipliedBy2AsInitialPiecesPositions:g}=S,m=Xi(),v=Gc(),x=y.useRef(),_=y.useCallback((D,Y,ue)=>{const{scale:Se,position:he}=uS({canvasWidth:Y,canvasHeight:ue,puzzle:D});v({type:"set-scale-and-set-position",scale:Se,position:he})},[v]),T=y.useCallback(()=>{m({type:"set-puzzle-was-touched"})},[m]),C=y.useCallback(D=>{m({type:"set-puzzle-piece-was-released",piecePositionData:D})},[m]),E=y.useCallback(D=>{m({type:"set-puzzle-group-of-pieces-were-released",groupOfPiecesPositionData:D})},[m]),k=y.useCallback(D=>{m({type:"set-challenge-completeness-progress",completenessProgress:D})},[m]),[N,R]=y.useState(l);y.useEffect(()=>{N.length&&!l.length&&R([])},[l,N]);const j=y.useCallback(async()=>{if(typeof i=="function")return;const D=i==null?void 0:i.current;if(!D||!s)return;const Y=await Ys(s);if(!Y||!Y.width||!Y.height)return;if(!a||!a.tl||!a.br||a.br.x<=1||a.br.y<=1){m({type:"init-new-challenge-id",params:{boundaryPoints:{tl:new O(0,0),br:new O(Y.width,Y.height)}}});return}Es.clear(),Ps.clear(),_s.clear(),Cs.clear(),Is.clear(),xt.clear(),fx(),mx();const ue=d,Se=a.tl.x,he=a.tl.y,We=a.br.x-a.tl.x,Mt=a.br.y-a.tl.y,Bn=new vi(Se,he,We,Mt),jn=s0(p);P&&Qp(La);let Bt;g&&(Bt=ax);const _t=new aS({id:o,numberOfPiecesPerWidth:c,numberOfPiecesPerHeight:u,pieceSideSize:ue,connectionActivationAreaSideSizeFractionFromPieceSideSize:f,pieceClass:Jx,pieceClassDebugOptions:S,image:Y,textureArea:Bn,sideShapeAsSocket:jn,getCustomInitialPiecePosition:Bt,onDirty:T,onPieceRelease:C,onGroupOfPiecesRelease:E,onChangeProgress:k});N.length&&_t.movePiecesToManualInitialPositions(N),P&&(Kp(La),Jc(La,re=>`puzzle created in ${re} ms`)),x.current=_t;const pn=D.width,jt=D.height;setTimeout(()=>{_(_t,pn,jt)},0)},[i,s,a,d,p,P,g,o,c,u,f,S,T,C,E,k,N,_,m]),B=y.useCallback(()=>{m({type:"toggle-sidebar-visibility-state"})},[m]),H=y.useMemo(()=>typeof i=="function"?null:i,[i]),{canvasWidth:V,canvasHeight:W}=Lx({canvasRef:H,puzzleRef:x}),Q=y.useCallback(D=>{const ue=O.create({x:V/2,y:W/2}),Se=new Ws(0,-1*D);v({type:"add-mouse-wheel-delta-in-screen-coordinates-to-scale",centerOfScale:ue,mouseWheelDelta:Se})},[W,V,v]),L=y.useCallback(()=>{const Y=O.create({x:V/2,y:W/2});v({type:"reset-scale-with-center-of-scale",centerOfScale:Y})},[V,W,v]),z=y.useCallback(()=>{const D=x.current;D&&_(D,V,W)},[_,V,W,x]),F=y.useCallback(()=>Q(lS),[Q]),M=y.useCallback(()=>Q(cS),[Q]);return y.useEffect(()=>{j()},[j]),y.useEffect(()=>{const D=x.current;D&&setTimeout(()=>{_(D,V,W)},0)},[V,W,_]),h.jsxs(h.Fragment,{children:[h.jsx(Pw,{ref:i}),h.jsx(Ew,{isVisibleSidePanel:w,isFullscreenModeActive:t,onToggleFullscreenMode:n,onToggleSidePanel:B,onZoomIn:F,onZoomOut:M,onResetZoom:L,onShowAllPieces:z}),r]})}),fS="_CanvasBackgroundColor_1c1we_1",hS="_CanvasBackgroundColorTitle_1c1we_7",pS="_ColorList_1c1we_16",mS="_ColorListItem_1c1we_24",gS="_ColorListAsRow_1c1we_28",Kr={CanvasBackgroundColor:fS,CanvasBackgroundColorTitle:hS,ColorList:pS,ColorListItem:mS,ColorListAsRow:gS},yS="_ColoredRadioButton_m384j_1",vS="_ColoredRadioButtonInput_m384j_6",wS="_ColoredRadioButtonLabel_m384j_22",ba={ColoredRadioButton:yS,ColoredRadioButtonInput:vS,ColoredRadioButtonLabel:wS},xS=y.memo(function({name:t,value:n,cssColorName:r,title:i,checked:o=!1,onChange:s}){const a=`${n}`,l={checked:o},c=y.useCallback(()=>s&&s(n),[s,n]);return h.jsxs("div",{className:ba.ColoredRadioButton,children:[h.jsx("input",{className:ae([ba.ColoredRadioButtonInput]),type:"radio",id:a,name:t,value:n,"aria-label":i,onChange:c,...l}),h.jsx("label",{className:ba.ColoredRadioButtonLabel,htmlFor:a,title:i,style:{backgroundColor:r}})]})}),SS=y.memo(function({canvasBackgroundColor:t=$s,asRowOfSquares:n=!0,onChangeCanvasBackgroundColor:r}){return h.jsxs("div",{className:Kr.CanvasBackgroundColor,children:[h.jsx("div",{className:Kr.CanvasBackgroundColorTitle,id:"background-color-label",children:"Background color"}),h.jsx("ul",{className:ae([Kr.ColorList,n&&Kr.ColorListAsRow]),"aria-labelledby":"background-color-label",children:dv.map(i=>{const o=i===t,s=Cp(i),a=_p[i];return h.jsx("li",{className:Kr.ColorListItem,children:h.jsx(xS,{name:"canvas-background-color",value:i,cssColorName:s,title:a,checked:o,onChange:r})},i)})})]})}),PS="_SeedLabel_2t5t4_1",_S={SeedLabel:PS},CS="_Separator_v1p1y_1",ES={Separator:CS},tm=y.memo(function(){return h.jsx("hr",{className:ES.Separator})}),IS=()=>{const{challengeId:e}=Ke();return h.jsxs(h.Fragment,{children:[h.jsx(tm,{}),h.jsxs("div",{className:_S.SeedLabel,children:[h.jsx("div",{id:"challenge-seed-label",children:"challenge seed: "}),h.jsx("div",{role:"note","aria-labelledby":"challenge-seed-label",children:e})]})]})},TS="_Container_495nq_1",kS="_Information_495nq_12",NS="_Label_495nq_18",OS="_Value_495nq_22",AS="_ZeroValue_495nq_26",LS="_ActionButtons_495nq_30",Hn={Container:TS,Information:kS,Label:NS,Value:OS,ZeroValue:AS,ActionButtons:LS},FS=1e3,RS=y.memo(function({onRestartPuzzleChallenge:t}){const{completenessProgress:n,puzzleWasTouched:r,timeSpent:i}=Ke(),o=`${n}%`,s=n===0&&!r&&i<FS,a=ae([Hn.Value,n===0?Hn.ZeroValue:""]);return h.jsxs("div",{className:Hn.Container,children:[h.jsxs("div",{className:Hn.Information,role:"note","aria-label":"challenge progress",children:[h.jsx("div",{className:Hn.Label,children:"Progress:"}),h.jsx("div",{className:a,children:o})]}),h.jsx("div",{className:Hn.ActionButtons,children:h.jsx(we,{iconName:"arrow-rotate-left",onlyIcon:!0,text:"restart puzzle",disabled:s,onClick:t})})]})}),bS="_ChallengeStats_77gxj_1",DS={ChallengeStats:bS},Hd=()=>({milliseconds:!1,seconds:!0,minutes:!0,hours:!0,days:!0}),zS=(e,t=Hd())=>{let n=e;if(!n||n<0||isNaN(n))return"0:00";const r={...Hd(),...t};let i="";const o=n%1e3;n-=o,n/=1e3;const s=n%60;n-=s,n/=60;const a=n%60;n-=a,n/=60;const l=n%24;n-=l,n/=24;const c=n;return i=[r.days&&c>0?`${c} day${c>1?"s":""}`:"",c>0?" ":"",r.hours&&l>0?c>0?`${l.toString().padStart(2,"0")}`:`${l}`:"",l>0||c>0?":":"",r.minutes?l>0||c>0?`${a.toString().padStart(2,"0")}`:`${a}`:"",r.seconds?":":"",r.seconds?`${s.toString().padStart(2,"0")}`:"",r.milliseconds?".":"",r.milliseconds?`${o.toString().padStart(3,"0")}`:""].join(""),i},MS=(e,t)=>{let n=e;if(!n||n<0||isNaN(n))return"PT0S";const r=n%1e3;n-=r,n/=1e3;const i=n%60;n-=i,n/=60;const o=n%60;n-=o,n/=60;const s=n%24;n-=s,n/=24;const a=n%7;n-=a,n/=7;const l=n,{accuracyDownToSeconds:c=!1}=t||{};return["PT",l>0?`${l}W `:"",a>0?`${a}D `:"",s>0?`${s}H `:"",o>0?`${o}M`:"",c?i>0?`${i}S`:"0S":i>0?`${i}${r>0?`.${r}`:""}S`:r>0?`.${r}S`:""].join("")},BS="_ChallengeTimer_sitep_1",jS="_Label_sitep_10",GS="_PassedTime_sitep_14",HS="_TimerIsPaused_sitep_22",To={ChallengeTimer:BS,Label:jS,PassedTime:GS,TimerIsPaused:HS},US=y.memo(function(){const{puzzleCompleted:t,puzzleWasTouched:n,timeSpent:r,isTimerPaused:i}=Ke(),o=r,s=zS(o),a=MS(o,{accuracyDownToSeconds:!0}),l=!i&&n||t;return h.jsxs("div",{className:To.ChallengeTimer,role:"note","aria-label":"elapsed time",children:[h.jsx("div",{className:To.Label,children:"Time:"}),h.jsx("time",{className:ae([To.PassedTime,!l&&To.TimerIsPaused]),title:"elapsed time",dateTime:a,children:s})]})}),WS=({onRestartPuzzleChallenge:e})=>h.jsxs("div",{className:DS.ChallengeStats,children:[h.jsx(US,{}),h.jsx(RS,{onRestartPuzzleChallenge:e})]}),nu=e=>{const[t,n]=y.useState(0),[r,i]=y.useState(0),o=y.useCallback((a,l)=>{n(a),i(l)},[n,i]),s=y.useCallback(a=>{const l=e==null?void 0:e.current;if(!l||!(a!=null&&a.length))return;const c=l.clientWidth,u=l.clientHeight;!Number.isFinite(c)||!Number.isFinite(u)||c<1||u<1||o(c,u)},[e,o]);return y.useEffect(()=>{const a=e==null?void 0:e.current;if(!a)return;const l=new ResizeObserver(s);return l.observe(a),()=>{l.unobserve(a),l.disconnect()}},[e,s]),{elementWidth:t,elementHeight:r}},$S="_PuzzleInformation_12ygj_1",VS="_PiecesInformation_12ygj_15",qS="_ImageContainer_12ygj_19",XS="_Preview_12ygj_27",YS="_AdditionalInformation_12ygj_37",Jr={PuzzleInformation:$S,PiecesInformation:VS,ImageContainer:qS,Preview:XS,AdditionalInformation:YS},ZS=y.memo(function(){const t=y.useRef(null),n=y.useRef(null),{numberOfPiecesPerWidth:r,numberOfPiecesPerHeight:i,imageSrc:o,boundaryPoints:s}=Ke(),a=y.useMemo(()=>r*i,[r,i]),{elementWidth:l}=nu(t),c=y.useCallback(async()=>{if(!o)return;const u=n==null?void 0:n.current;if(!u)return;const d=u.getContext("2d");if(!d)return;const f=await Ys(o);if(!f||!f.width||!f.height)return;const p=s.tl.x,w=s.tl.y,S=s.br.x,P=s.br.y,g=S-p,m=P-w,v=g/l,x=l,_=m/v;x<1||x<1||(u.width=x,u.height=_,d.drawImage(f,p,w,S-p,P-w,0,0,x,_))},[o,s.tl.x,s.tl.y,s.br.x,s.br.y,l]);return y.useEffect(()=>{c()},[c]),h.jsxs("div",{className:Jr.PuzzleInformation,children:[h.jsx("div",{ref:t,className:Jr.ImageContainer,children:h.jsx("canvas",{ref:n,className:Jr.Preview,title:"puzzle preview"})}),h.jsx("div",{className:Jr.AdditionalInformation,children:h.jsxs("div",{className:Jr.PiecesInformation,role:"note","aria-label":"pieces info",children:[a," pieces (",r,"x",i,")"]})})]})}),QS=y.memo(function({onClick:t}){const n=y.useCallback(()=>t&&t(),[t]),{showDebugTextureCacheCanvas:r}=Dt();return h.jsxs(h.Fragment,{children:[h.jsx(tm,{}),h.jsx(we,{onClick:n,isSidebarButton:!0,children:"Debug Settings"}),r&&h.jsx(Bx,{})]})}),KS="_Spacer_wxo3o_1",JS={Spacer:KS},nm=y.memo(function(){return h.jsx("div",{className:JS.Spacer})}),eP="_SidePanel_88ni8_1",tP="_Visible_88ni8_16",nP="_PreHide_88ni8_20",Da={SidePanel:eP,Visible:tP,PreHide:nP},rP=y.memo(function({canvasBackgroundColor:t=$s,isVisible:n=!0,onChangeCanvasBackgroundColor:r,onShowHelpDialog:i,onShowChangeNumberOfPiecesDialog:o,onShowChooseMethodToCreatePuzzleDialog:s,onShowDebugSettingsDialog:a,onShowChangePieceShapeDialog:l,onRestartPuzzleChallenge:c}){const[u,d]=y.useState(!0);if(y.useLayoutEffect(()=>{window==null||window.requestAnimationFrame(()=>{window==null||window.requestAnimationFrame(()=>{d(n)})})},[n]),!!u)return h.jsxs("aside",{className:ae([Da.SidePanel,n?"":Da.PreHide,u?Da.Visible:""]),"aria-label":"sidebar",children:[h.jsx(ZS,{}),h.jsx(WS,{onRestartPuzzleChallenge:c}),h.jsx(SS,{canvasBackgroundColor:t,onChangeCanvasBackgroundColor:r}),h.jsx(nm,{}),h.jsx(we,{onClick:c,isSidebarButton:!0,children:"Solve puzzle again"}),h.jsx(we,{onClick:o,isSidebarButton:!0,children:"Change number of pieces"}),h.jsx(we,{onClick:s,isSidebarButton:!0,children:"Change image"}),h.jsx(we,{onClick:l,isSidebarButton:!0,children:"Change piece shape"}),h.jsx(we,{onClick:i,isSidebarButton:!0,children:"Help"}),h.jsx(QS,{onClick:a}),h.jsx(IS,{})]})});var $e={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},Ud=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],Wd=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],$d=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],Me=typeof window<"u"&&typeof window.document<"u"?window.document:{},tt="fullscreenEnabled"in Me&&Object.keys($e)||Ud[0]in Me&&Ud||Wd[0]in Me&&Wd||$d[0]in Me&&$d||[],Ct={requestFullscreen:function(e){return e[tt[$e.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[tt[$e.requestFullscreen]]},get exitFullscreen(){return Me[tt[$e.exitFullscreen]].bind(Me)},get fullscreenPseudoClass(){return":"+tt[$e.fullscreen]},addEventListener:function(e,t,n){return Me.addEventListener(tt[$e[e]],t,n)},removeEventListener:function(e,t,n){return Me.removeEventListener(tt[$e[e]],t,n)},get fullscreenEnabled(){return!!Me[tt[$e.fullscreenEnabled]]},set fullscreenEnabled(e){},get fullscreenElement(){return Me[tt[$e.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return Me[("on"+tt[$e.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return Me[("on"+tt[$e.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return Me[("on"+tt[$e.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return Me[("on"+tt[$e.fullscreenerror]).toLowerCase()]=e}};function iP(){var e=y.useState(!1),t=e[0],n=e[1],r=y.useRef(null);y.useEffect(function(){var s=function(){n(Ct.fullscreenElement===r.current)};return Ct.addEventListener("fullscreenchange",s),function(){return Ct.removeEventListener("fullscreenchange",s)}},[]);var i=y.useCallback(function(){if(Ct.fullscreenElement)return Ct.exitFullscreen().then(function(){return Ct.requestFullscreen(r.current)});if(r.current)return Ct.requestFullscreen(r.current)},[]),o=y.useCallback(function(){return Ct.fullscreenElement===r.current?Ct.exitFullscreen():Promise.resolve()},[]);return y.useMemo(function(){return{active:t,enter:i,exit:o,node:r}},[t,i,o])}var oP=function(t){var n=t.handle,r=t.onChange,i=t.children,o=t.className,s=[];return o&&s.push(o),s.push("fullscreen"),n.active&&s.push("fullscreen-enabled"),y.useEffect(function(){r&&r(n.active,n)},[n.active]),zm.createElement("div",{className:s.join(" "),ref:n.node,style:n.active?{height:"100%",width:"100%"}:void 0},i)};function sP(){const e=iP(),t=e.active,n=y.useCallback(async()=>{try{await e.enter()}catch(o){console.error("failure of entering into fullscreen mode",o)}},[e]),r=y.useCallback(async()=>{try{await e.exit()}catch(o){console.error("failure of exiting from fullscreen mode",o)}},[e]);return{toggleFullscreenMode:t?r:n,FullScreen:oP,fullScreenModeHandle:e,isFullscreenModeActive:t}}const aP="_Title_1hz5x_1",lP="_Content_1hz5x_10",cP="_MainContent_1hz5x_22",uP="_ActionButtonList_1hz5x_35",dP="_AlignByCenter_1hz5x_43",ei={Title:aP,Content:lP,MainContent:cP,ActionButtonList:uP,AlignByCenter:dP},rm="root",fP={Escape:"Escape"};y.memo(function({children:t}){let[n,r]=y.useState(),[i,o]=y.useState();const s=y.useRef(null),a=y.useRef(null),l=y.useRef(null),c=y.useRef(null),u=y.useCallback(()=>{l.current&&l.current.focus()},[l]),d=y.useCallback(()=>{c.current&&c.current.focus()},[c]),f=y.useCallback(()=>{s.current&&s.current.focus()},[s]),p=y.useCallback(()=>{a!=null&&a.current&&a.current.focus()},[a]);return y.useLayoutEffect(()=>{l!=null&&l.current&&l.current.focus()},[l]),y.useLayoutEffect(()=>{const w=document.createElement("div");w.id="first-focusable-element-in-page-body",w.style=`
        display: flex;
        position: fixed;
        width: 1px;
        height: 1px;
        background-color: transparent;
        top:0;
        left:0;
      `;const S=document.createElement("div");S.id="latest-focusable-element-in-page-body",S.style=`
        display: flex;
        position: fixed;
        width: 1px;
        height: 1px;
        background-color: transparent;
        bottom: 0;
        left: 0;
        z-index: 2;
      `;try{document.body.insertAdjacentElement("afterbegin",w),document.body.insertAdjacentElement("beforeend",S)}catch(P){console.error("Error. Impossible init dialog tabbing brigde",P)}return r(w),o(S),()=>{r(void 0),o(void 0),w.remove(),S.remove()}},[]),y.useEffect(()=>{const w=l==null?void 0:l.current;!w||typeof w.focus!="function"||setTimeout(()=>{w.focus()},0)},[l]),h.jsxs(h.Fragment,{children:[n&&gs.createPortal(h.jsxs(h.Fragment,{children:[h.jsx("span",{id:"fb",ref:s,tabIndex:-1,"aria-hidden":"true"}),h.jsx("span",{tabIndex:0,"aria-hidden":"true",onFocus:u})]}),n),h.jsx("span",{tabIndex:0,"aria-hidden":"true",onFocus:f}),h.jsx("span",{id:"-fd-",ref:l,tabIndex:-1,"aria-hidden":"true"}),t,h.jsx("span",{id:"-ld-",ref:c,tabIndex:-1,"aria-hidden":"true"}),h.jsx("span",{tabIndex:0,"aria-hidden":"true",onFocus:p}),i&&gs.createPortal(h.jsxs(h.Fragment,{children:[h.jsx("span",{tabIndex:0,"aria-hidden":"true",onFocus:d}),h.jsx("span",{id:"lb",ref:a,tabIndex:-1,"aria-hidden":"true"})]}),i)]})});const hP="_Dialog_1m439_1",pP="_DialogAsDiv_1m439_15",mP="_DialogBodyContainer_1m439_26",gP="_Backdrop_1m439_39",yP="_DialogBody_1m439_26",vP="_FullHeight_1m439_63",wP="_WithCardForContent_1m439_75",xP="_DialogContent_1m439_89",Xt={Dialog:hP,DialogAsDiv:pP,DialogBodyContainer:mP,Backdrop:gP,DialogBody:yP,FullHeight:vP,WithCardForContent:wP,DialogContent:xP},SP=!1,PP=()=>{const e=y.useMemo(()=>document.getElementById(rm),[]);y.useEffect(()=>{if(!e){console.error("Error! App root element does not exist");return}return e.setAttribute("inert",""),()=>{e.removeAttribute("inert")}},[e])},_P=y.memo(function({ariaLabel:t,isPreventCloseByEscapeKeyPress:n=!1,onHide:r,children:i}){PP();const o=y.useMemo(()=>document.createElement("div"),[]);y.useEffect(()=>(document.body.appendChild(o),()=>{o.remove()}),[o]),y.useEffect(()=>{if(typeof r!="function")return;const a=l=>{n||l.key===fP.Escape&&r()};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[r,n]);const s=SP;return gs.createPortal(h.jsxs("div",{className:ae([Xt.Dialog,Xt.DialogAsDiv]),role:"dialog","aria-modal":"true","aria-label":t,children:[s,i]}),o)}),CP=y.memo(function({dialogTitleForAriaLabel:t="",withCardForContent:n=!0,fullHeight:r=!1,isCloseButtonHidden:i=!1,isPreventCloseByEscapeKeyPress:o=!1,onHide:s,onClickOnBackground:a,children:l}){const c=h.jsxs("div",{className:Xt.DialogBodyContainer,children:[h.jsx("div",{className:Xt.Backdrop,onClick:a,"aria-label":"modal-backdrop","aria-hidden":"true"}),!i&&!n&&h.jsx(Bl,{onClick:s,isCloseButtonOutsideOfModalBody:!n}),h.jsxs("div",{className:ae([Xt.DialogBody,r&&Xt.FullHeight,n&&Xt.WithCardForContent]),children:[!i&&n&&h.jsx(Bl,{onClick:s}),h.jsx("div",{className:Xt.DialogContent,children:l})]})]});return h.jsx(_P,{ariaLabel:t,onHide:s,isPreventCloseByEscapeKeyPress:o,children:c})}),Zs=({dialogTitle:e,actionButtons:t,isActionButtonsAlignByCenter:n=!1,children:r,...i})=>h.jsx(CP,{dialogTitleForAriaLabel:e,...i,children:h.jsxs("div",{className:ei.Content,children:[e&&h.jsx("h3",{className:ei.Title,children:e}),h.jsx("div",{className:ei.MainContent,children:r}),t&&h.jsx("div",{className:ae([ei.ActionButtonList,n&&ei.AlignByCenter]),children:t})]})}),ke={choosing:void 0,uploadFromFile:"upload-image-from-file",enterImageUrl:"enter-image-url",selectingFromDemoImages:"selectingFromDemoImages",previewingImage:"previewing-image"},Vd=y.memo(function({isPrimary:t=!1,disabled:n=!1,onClick:r,children:i}){const o={padding:"0.6em 2em",minWidth:"11.5em",minHeight:"11.5em",display:"flex",flexDirection:"column"};return h.jsx(we,{isPrimary:t,disabled:n,onClick:r,isFluidOnMobile:!0,style:o,children:i})}),EP="_ChoicesContainer_1ibri_1",IP="_ChoiceButtonGroup_1ibri_7",TP="_ChoiceButtonContainer_1ibri_12",ko={ChoicesContainer:EP,ChoiceButtonGroup:IP,ChoiceButtonContainer:TP},kP="_Note_a5qvh_1",NP="_AsText_a5qvh_8",OP="_NoHorizontalGap_a5qvh_13",za={Note:kP,AsText:NP,NoHorizontalGap:OP},eo=({asText:e=!1,noGapInRow:t=!1,children:n,...r})=>{const i=ae([za.Note,e&&za.AsText,t&&za.NoHorizontalGap]);return h.jsx("div",{role:"note",className:i,...r,children:n})},AP="_NoteLink_2zw6f_1",LP={NoteLink:AP},br=({children:e,onClick:t})=>h.jsx("a",{href:"#",className:LP.NoteLink,onClick:t,children:e}),FP="_HotKeyLabel_18oh5_1",RP={HotKeyLabel:FP},ru=({children:e})=>h.jsx("span",{className:RP.HotKeyLabel,children:e}),bP=({onSwitchToModeUploadImageFromFile:e,onSwitchToModeEnterImageUrl:t,onShowChoiceSelectDemoImageDialog:n})=>h.jsxs("div",{className:ko.ChoicesContainer,children:[h.jsxs("ul",{className:ko.ChoiceButtonGroup,children:[h.jsx("li",{className:ko.ChoiceButtonContainer,children:h.jsxs(Vd,{isPrimary:!0,onClick:e,children:[h.jsx("div",{children:"Upload an image from device"}),h.jsx("div",{children:"or"}),h.jsx("div",{children:"drag and drop an image here"}),h.jsx("div",{children:"or"}),h.jsxs(ru,{children:["use ",h.jsx("kbd",{children:"ctrl"})," + ",h.jsx("kbd",{children:"v"})]})," ",h.jsx("em",{children:"(to paste an image from clipboard)"})]})}),h.jsx("li",{className:ko.ChoiceButtonContainer,children:h.jsx(Vd,{onClick:t,children:"Load an image from a link"})})]}),h.jsxs(eo,{"aria-label":"alternative way to create a puzzle",children:["also you can use ",h.jsx(br,{onClick:n,children:"demo images"})]})]}),Gl=["image/*"],im=e=>!!(e in Gl||Gl.find(n=>new RegExp(`^${n}`).test(e))),DP=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r),r.onerror=i=>n(i),r.readAsDataURL(e)}),zP="_ImageFromFileForm_wf3ar_1",MP="_UploadFileField_wf3ar_7",BP="_UploadButton_wf3ar_15",Ma={ImageFromFileForm:zP,UploadFileField:MP,UploadButton:BP},om=({onShowChoiceSelectDemoImageDialog:e})=>h.jsxs(h.Fragment,{children:["or use one of ",h.jsx(br,{onClick:e,children:"demo images"})]}),jP=({setImageSrc:e,onShowChoiceSelectDemoImageDialog:t,onSwitchToModeEnterImageUrl:n})=>{const r=y.useRef(null),i=y.useCallback(l=>{l.preventDefault()},[]),o=y.useCallback(async()=>{const l=r.current;if(!l)return;const c=new FormData(l);try{const u=c.get("image");if(!u){console.error("Error. File is not selected");return}if(!im(u.type)){console.error("Error. File type does not supported. File should be an image");return}const d=(await DP(u)).result;if(typeof d!="string"){console.error("Error reading the image as data url");return}e(d)}catch(u){console.error("Error while read the image file",u)}},[e]),s=y.useRef(null),a=y.useCallback(()=>{const l=s.current;l&&l.click()},[s]);return h.jsxs("form",{ref:r,className:Ma.ImageFromFileForm,onSubmit:i,children:[h.jsxs("div",{className:Ma.UploadFileField,children:[h.jsx("label",{htmlFor:"selected-image-to-upload",children:"Selected image:"}),h.jsx("input",{type:"file",name:"image",id:"selected-image-to-upload",ref:s,onChange:o,accept:Gl.join(", ")})]}),h.jsxs("button",{className:Ma.UploadButton,onClick:a,children:[h.jsx("div",{children:"Click to select an image"}),h.jsx("div",{children:"or"}),h.jsx("div",{children:"Drag and drop an image here"}),h.jsx("div",{children:"or"}),h.jsxs("div",{children:["use ","",h.jsxs(ru,{children:[h.jsx("kbd",{children:"ctrl"})," + ",h.jsx("kbd",{children:"v"})]})," "]}),h.jsx("em",{children:"(to paste an image from clipboard)"})]}),h.jsxs(eo,{"aria-label":"alternative way to load an image",children:["also you can ",h.jsx(br,{onClick:n,children:"load an image from a link"})," ",h.jsx("br",{}),h.jsx(om,{onShowChoiceSelectDemoImageDialog:t})]})]})},GP="_ImageUrlForm_cq9r0_1",HP="_FormField_cq9r0_7",UP="_Input_cq9r0_12",Ba={ImageUrlForm:GP,FormField:HP,Input:UP},Xe=y.memo(function({children:t,...n}){return h.jsx(we,{...n,isModalButton:!0,children:t})}),WP=({setImageSrc:e,onShowChoiceSelectDemoImageDialog:t,onSwitchToModeUploadImageFromFile:n})=>{const r=y.useRef(null),i=y.useCallback(async o=>{o.preventDefault();const s=r.current;if(!s)return;const l=new FormData(s).get("image-link");if(l)try{let c;if(c=await Ys(l,!1),!c){console.error("Error to load an image from the link");return}e(c.src)}catch(c){console.error("failure to load an image by link on the same domain",c)}},[e]);return h.jsxs("form",{ref:r,onSubmit:i,className:Ba.ImageUrlForm,children:[h.jsxs("div",{className:Ba.FormField,children:[h.jsx("input",{type:"text",name:"image-link","aria-label":"image-link",required:!0,placeholder:"https://example.com/image.png",className:Ba.Input}),h.jsx(Xe,{type:"submit",children:"Load image"})]}),h.jsxs(eo,{"aria-label":"alternative way to load an image",children:["also you can ",h.jsx(br,{onClick:n,children:"upload an image from device"})," ",h.jsx("br",{}),h.jsx(om,{onShowChoiceSelectDemoImageDialog:t})]})]})},$P=y.memo(function({size:t,isActive:n,onSizeChange:r}){const i=y.useMemo(()=>(t[0]*t[1]).toString(),[t]),o=y.useCallback(()=>{r(t)},[t,r]),s={minWidth:"3em"},a=`${i} pieces`;return h.jsx(we,{text:i,title:a,isActive:n,onClick:o,style:s})}),VP="_ShapeIcon_jmymp_1",qP={ShapeIcon:VP},ze=U,qd={[ze.DIKE]:"dike",[ze.DITCH_DOUBLE]:"ditch_double",[ze.DITCH_WITH_ROUNDED_ANGLES]:"ditch_with-rounded-angles",[ze.DITCH]:"ditch",[ze.STRAIGHT_LINE]:"straight-line",[ze.TWO_PINS_BIGGER]:"two-pins_bigger",[ze.TWO_PINS]:"two-pins",[ze.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_ERODED_HILL]:"underground-river_circle-bottom_in-eroded-hill",[ze.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_HILL]:"underground-river_circle-bottom_in-hill",[ze.UNDERGROUND_RIVER_CIRCLE_BOTTOM_IN_VULCAN]:"underground-river_circle-bottom_in-vulcan",[ze.UNDERGROUND_RIVER_CIRCLE_BOTTOM]:"underground-river_circle-bottom",[ze.UNDERGROUND_RIVER_WITH_ERODED_SHORES]:"underground-river_with-eroded-shores",[ze.UNDERGROUND_RIVER]:"underground-river",[ze.SAW]:"saw"},XP=y.memo(function({shapeName:t=Vs,...n}){const i=`./assets/shape-icons/icon-shape-${qd[t]??qd.STRAIGHT_LINE}.svg`;return h.jsx(qs,{className:qP.ShapeIcon,src:i,...n})}),YP="_Field_1lknb_1",ZP="_FieldActive_1lknb_20",QP="_RadioOption_1lknb_25",KP="_RadioOptionIcon_1lknb_36",JP="_Container_1lknb_47",ti={Field:YP,FieldActive:ZP,RadioOption:QP,RadioOptionIcon:KP,Container:JP},e_=e=>e.replace(/_/g," "),t_=y.memo(function({value:t,checked:n=!1,onChange:r}){const i=y.useCallback(()=>{r(t)},[r,t]),o=`${t.toLowerCase()}`,s=e_(o),a=ae([ti.Field,n&&ti.FieldActive]);return h.jsx("li",{className:ti.Container,children:h.jsxs("label",{htmlFor:o,className:a,title:s,children:[h.jsx("i",{className:ti.RadioOptionIcon,role:"img","aria-label":s,children:h.jsx(XP,{shapeName:t})}),h.jsx("input",{id:o,type:"radio",className:ti.RadioOption,checked:n,value:t.toLowerCase(),onChange:i})]})})}),n_=[[2,1],[3,1],[3,2],[4,3],[6,4],[6,5],[8,6],[10,8],[12,10],[17,15],[25,20],[25,40]],r_=({imageSrc:e=void 0,isImageDisplayed:t=!1,dispatchZoneControlPointsChange:n,imageScale:r})=>{const{imageSrc:i,boundaryPoints:o}=Ke();y.useEffect(()=>{t&&e===i&&n({type:"set",tl:new O(o.tl.x/r,o.tl.y/r),br:new O(o.br.x/r,o.br.y/r)})},[t,n,r,o,i,e])},i_=({imageSrc:e})=>{const[t,n]=y.useState(),[r,i]=y.useState(0),[o,s]=y.useState(0);return y.useEffect(()=>{if(!e){n(void 0),i(0),s(0);return}(async()=>{const l=await Ys(e);if(!l){console.error("Error to load image from imageSrc"),n(void 0),i(0),s(0);return}n(l),i(l.width),s(l.height)})()},[e,n,i,s]),{image:t,imageWidth:r,imageHeight:o}},o_=e=>{const[t,n]=y.useState(0),[r,i]=y.useState(0),[o,s]=y.useState(0),[a,l]=y.useState(0),c=y.useCallback(d=>{if(!d)return;const{scrollTop:f,scrollHeight:p,scrollLeft:w,scrollWidth:S,clientHeight:P,clientWidth:g}=d;if([f,p,w,S,P,g].filter(x=>!Number.isFinite(x)).length>0)return;n(f);const m=p-P-f;i(m),s(w);const v=S-g-w;l(v)},[n,i,s,l]),u=y.useCallback(d=>{const f=d.currentTarget;c(f)},[c]);return y.useEffect(()=>{const d=e==null?void 0:e.current;if(d)return d.addEventListener("scroll",u),c(d),()=>{d.removeEventListener("scroll",u)}},[e,c,u]),{showTopBorder:t>1,showRightBorder:a>1,showBottomBorder:r>1,showLeftBorder:o>1}},sm=()=>({tl:new O(0,0),br:new O(0,0)}),s_=()=>sm(),a_=(e,t)=>{switch(t.type){case"reset":return sm();case"set":return{tl:t.tl,br:t.br};case"set-tl":{const{x:n,y:r}=t;return{...e,tl:new O(n,r)}}case"set-br":{const{x:n,y:r}=t;return{...e,br:new O(n,r)}}case"set-tr":return{...e,tl:new O(e.tl.x,t.y),br:new O(t.x,e.br.y)};case"set-bl":return{...e,tl:new O(t.x,e.tl.y),br:new O(e.br.x,t.y)};case"set-t":return{...e,tl:new O(e.tl.x,t.y)};case"set-b":return{...e,br:new O(e.br.x,t.y)};case"set-l":return{...e,tl:new O(t.x,e.tl.y)};case"set-r":return{...e,br:new O(t.x,e.br.y)};default:return console.error("Unknown action type"),e}},l_=({imageContainerRef:e})=>{const[t,n]=y.useReducer(a_,null,s_),{elementWidth:r,elementHeight:i}=nu(e);return y.useEffect(()=>{r<1||i<1||n({type:"set",tl:new O(0,0),br:new O(r,i)})},[r,i]),{controlPoints:t,dispatchZoneControlPointsChange:n}},c_=e=>y.useCallback(n=>{const r=document.querySelector("body");if(!r)return;const i=e==null?void 0:e.current;if(i){if(!n){r.style.userSelect="auto",i.style.userSelect="auto";return}r.style.userSelect="none",i.style.userSelect="all"}},[e]),u_="_AdditionalInfo_vyhnn_1",d_="_SideSizeNote_vyhnn_15",ja={AdditionalInfo:u_,SideSizeNote:d_},Xd=y.memo(function({imageWidth:t,imageHeight:n,pieceSideSize:r=0,pieceMinimalSideSizeInImageScale:i}){return h.jsxs("div",{className:ja.AdditionalInfo,children:[h.jsxs("div",{className:ja.SideSizeNote,children:["Side size of single piece: ",r>0?r.toFixed():0,"px (min"," ",i,"px)"]}),h.jsxs("div",{className:ja.SideSizeNote,children:["Image size: ",t>0?t.toFixed():0,"x",n>0?n.toFixed():0,"px"]}),h.jsxs(eo,{asText:!0,noGapInRow:!0,"aria-label":"quick way to change the image",children:[h.jsx("div",{children:"To quick change the image: "}),h.jsx("div",{children:"drag and drop an image here "}),h.jsxs("div",{children:["or use ","",h.jsxs(ru,{children:[h.jsx("kbd",{children:"ctrl"})," + ",h.jsx("kbd",{children:"v"})]})," ","(to paste an image from clipboard)"]})]})]})}),f_="_PreviewContainer_1tv6m_1",h_="_FormActionButtons_1tv6m_13",p_="_WithButtonGroups_1tv6m_20",m_="_FormFooter_1tv6m_24",g_="_PreviewContent_1tv6m_31",y_="_VisibleTopBorder_1tv6m_43",v_="_VisibleBottomBorder_1tv6m_47",w_="_SelectedZoneContainer_1tv6m_60",x_="_ImageContainer_1tv6m_79",S_="_FitContent_1tv6m_92",P_="_ImagePreview_1tv6m_96",__="_TotalNumberOfPieces_1tv6m_113",C_="_TotalNumberOfPiecesLabel_1tv6m_121",E_="_AttributesPanel_1tv6m_125",I_="_Shapes_1tv6m_154",T_="_SizeList_1tv6m_185",k_="_SizeListItem_1tv6m_191",N_="_FormFieldList_1tv6m_199",O_="_FormField_1tv6m_199",A_="_FormFieldName_1tv6m_223",L_="_FormFieldInline_1tv6m_236",F_="_FormFieldinlineGroup_1tv6m_243",R_="_FormSubField_1tv6m_256",b_="_FormSubFieldName_1tv6m_262",D_="_FormFieldInput_1tv6m_267",q={PreviewContainer:f_,FormActionButtons:h_,WithButtonGroups:p_,FormFooter:m_,PreviewContent:g_,VisibleTopBorder:y_,VisibleBottomBorder:v_,SelectedZoneContainer:w_,ImageContainer:x_,FitContent:S_,ImagePreview:P_,TotalNumberOfPieces:__,TotalNumberOfPiecesLabel:C_,AttributesPanel:E_,Shapes:I_,SizeList:T_,SizeListItem:k_,FormFieldList:N_,FormField:O_,FormFieldName:A_,FormFieldInline:L_,FormFieldinlineGroup:F_,FormSubField:R_,FormSubFieldName:b_,FormFieldInput:D_},Ut=(e,t)=>!(t.x-e.x<En||t.y-e.y<En),Wt=({topLeftPointIsModificationRootPoint:e,secondaryDiagonal:t=!1,bottomLeftIsModificationRootPoint:n=!1,tl:r,br:i,imageWidth:o,imageHeight:s})=>{let a=r.x,l=r.y,c=i.x,u=i.y;const d=En+1,f=Math.ceil(c-a),p=Math.ceil(u-l);return t?(n?(f<d&&(a=c-d),p<d&&(u=l+d)):(f<d&&(c=a+d),p<d&&(l=u-d)),n?(a<0&&(a=0,c=d),u>s&&(u=s,l=u-d)):(c>o&&(c=o,a=c-d),l<0&&(l=0,u=d))):(e?(f<d&&(a=c-d),p<d&&(l=u-d)):(f<d&&(c=a+d),p<d&&(u=l+d)),e?(a<0&&(a=0,c=d),l<0&&(l=0,u=d)):(c>o&&(c=o,a=c-d),u>s&&(u=s,l=u-d))),{tl:new O(a,l),br:new O(c,u)}};function z_(){const e=document==null?void 0:document.getSelection();e&&e.empty()}function M_({selectingZoneRef:e,imageWidth:t,imageHeight:n,selectedControlPointName:r,setSelectedControlPointName:i,tl:o,br:s,onDispatchZoneControlPointsChange:a}){y.useEffect(function(){const c=e.current;if(!c)return;const{x:u,y:d,width:f,height:p}=c.getBoundingClientRect(),w=t/f,S=n/p,P=x=>{if(x.preventDefault(),!r)return;let _,T;if(x instanceof TouchEvent){const k=eu(x,c);_=k.x,T=k.y}else{const k=qi(x,c);_=k.x,T=k.y}let C=(_-u)*w,E=(T-d)*S;if(C<0&&(C=0),E<0&&(E=0),C>t&&(C=t),E>n&&(E=n),r==="tl"){const k=new O(C,E);if(!Ut(k,s)){const{tl:N,br:R}=Wt({topLeftPointIsModificationRootPoint:!0,tl:k,br:s,imageWidth:t,imageHeight:n});a({type:"set",tl:N,br:R});return}a({type:"set-tl",x:C,y:E});return}if(r==="br"){const k=new O(C,E);if(!Ut(o,k)){const{tl:N,br:R}=Wt({topLeftPointIsModificationRootPoint:!1,tl:o,br:k,imageWidth:t,imageHeight:n});a({type:"set",tl:N,br:R});return}a({type:"set-br",x:C,y:E});return}if(r==="t"){const k=new O(o.x,E);if(!Ut(k,s)){const{tl:N,br:R}=Wt({topLeftPointIsModificationRootPoint:!0,tl:k,br:s,imageWidth:t,imageHeight:n});a({type:"set",tl:N,br:R});return}a({type:"set-t",y:E});return}if(r==="b"){const k=new O(s.x,E);if(!Ut(o,k)){const{tl:N,br:R}=Wt({topLeftPointIsModificationRootPoint:!1,tl:o,br:k,imageWidth:t,imageHeight:n});a({type:"set",tl:N,br:R});return}a({type:"set-b",y:E});return}if(r==="l"){const k=new O(C,o.y);if(!Ut(k,s)){const{tl:N,br:R}=Wt({topLeftPointIsModificationRootPoint:!0,tl:k,br:s,imageWidth:t,imageHeight:n});a({type:"set",tl:N,br:R});return}a({type:"set-l",x:C});return}if(r==="r"){const k=new O(C,s.y);if(!Ut(o,k)){const{tl:N,br:R}=Wt({topLeftPointIsModificationRootPoint:!1,tl:o,br:k,imageWidth:t,imageHeight:n});a({type:"set",tl:N,br:R});return}a({type:"set-r",x:C});return}if(r==="tr"){const k=new O(o.x,E),N=new O(C,s.y);if(!Ut(k,N)){const{tl:R,br:j}=Wt({topLeftPointIsModificationRootPoint:!1,secondaryDiagonal:!0,bottomLeftIsModificationRootPoint:!1,tl:k,br:N,imageWidth:t,imageHeight:n});a({type:"set",tl:R,br:j});return}a({type:"set-tr",x:C,y:E});return}if(r==="bl"){const k=new O(C,o.y),N=new O(s.x,E);if(!Ut(k,N)){const{tl:R,br:j}=Wt({topLeftPointIsModificationRootPoint:!1,secondaryDiagonal:!0,bottomLeftIsModificationRootPoint:!0,tl:k,br:N,imageWidth:t,imageHeight:n});a({type:"set",tl:R,br:j});return}a({type:"set-bl",x:C,y:E});return}if(r==="c"){const k=s.x-o.x,N=s.y-o.y,R=k/2,j=N/2,B=new O(C-R,E-j),H=new O(C+R,E+j);B.x<0&&(B.x=0,H.x=k),B.y<0&&(B.y=0,H.y=N),H.x>t&&(B.x=t-k,H.x=t),H.y>n&&(B.y=n-N,H.y=n),a({type:"set",tl:B,br:H});return}console.error("unknown control point")},g=x=>{x.preventDefault(),i(void 0)},m=x=>{x.preventDefault(),i(void 0),r&&z_()},v={passive:!1};return c.addEventListener("touchmove",P,v),c.addEventListener("mousemove",P,v),c.addEventListener("touchend",g,v),c.addEventListener("mouseup",g,v),c.addEventListener("touchcancel",m,v),c.addEventListener("mouseleave",m,v),()=>{c.removeEventListener("touchmove",P,v),c.removeEventListener("mousemove",P,v),c.removeEventListener("touchend",g,v),c.removeEventListener("mouseup",g,v),c.removeEventListener("touchcancel",m,v),c.removeEventListener("mouseleave",m,v)}},[e,r,i,t,n,a,o,s,o.x,o.y,s.x,s.y])}const B_="_CentralControlHandle_17r9q_1",j_="_CentralControlVisualMarker_17r9q_8",G_="_CentralControlContainer_17r9q_17",H_="_Active_17r9q_18",U_="_Central_17r9q_1",ni={CentralControlHandle:B_,CentralControlVisualMarker:j_,CentralControlContainer:G_,Active:H_,Central:U_},W_=({id:e,point:t,active:n=!1,onMouseDown:r,onTouchStart:i})=>{const o="center control point";return h.jsxs("g",{className:ae([ni.CentralControlContainer,ni.Central,n&&ni.Active]),children:[h.jsx("rect",{id:e,x:t.x,y:t.y,width:1,height:1,className:ni.CentralControlVisualMarker,style:{filter:"url(#shadow)"}}),h.jsx("rect",{id:e,x:t.x,y:t.y,width:1,height:1,onMouseDown:r,onTouchStart:i,className:ni.CentralControlHandle,role:"button","aria-label":o,children:h.jsx("title",{children:o})})]})},$_="_CornerControlHandle_i60n4_1",V_="_CornerControlVisualMarker_i60n4_6",q_="_CornerControlContainer_i60n4_13",X_="_Active_i60n4_14",Y_="_TL_i60n4_19",Z_="_TR_i60n4_23",Q_="_BL_i60n4_27",K_="_BR_i60n4_31",$t={CornerControlHandle:$_,CornerControlVisualMarker:V_,CornerControlContainer:q_,Active:X_,TL:Y_,TR:Z_,BL:Q_,BR:K_},No=({id:e,point:t,active:n=!1,onMouseDown:r,onTouchStart:i})=>{const o=/^(tl)|(tr)|(bl)|(br)$/i.test(e)?`${e}`.toUpperCase():void 0,s=o==="TL"?$t.TL:o==="TR"?$t.TR:o==="BL"?$t.BL:o==="BR"?$t.BR:void 0,l=`${o==="TL"?"top left":o==="TR"?"top right":o==="BL"?"bottom left":o==="BR"?"bottom right":""} corner control point`;return h.jsxs("g",{className:ae([$t.CornerControlContainer,s,n&&$t.Active]),children:[h.jsx("circle",{id:e,cx:t.x,cy:t.y,r:1,className:$t.CornerControlVisualMarker,style:{filter:"url(#shadow)"}}),h.jsx("circle",{id:e,cx:t.x,cy:t.y,r:1,onMouseDown:r,onTouchStart:i,className:$t.CornerControlHandle,role:"button","aria-label":l,children:h.jsx("title",{children:l})})]})},J_="_PieceBorder_11xav_1",e1={PieceBorder:J_},Yd=({x1:e,y1:t,x2:n,y2:r,style:i})=>h.jsx("line",{x1:e,y1:t,x2:n,y2:r,className:e1.PieceBorder,style:i}),t1="_SelectedZone_1qaq6_1",n1="_SelectedZoneBorder_1qaq6_11",Zd={SelectedZone:t1,SelectedZoneBorder:n1},r1="_SideControlHandle_1sx70_1",i1="_SideControlVisualMarker_1sx70_8",o1="_Vertical_1sx70_16",s1="_SideControlContainer_1sx70_22",a1="_Active_1sx70_23",l1="_T_1sx70_36",c1="_B_1sx70_40",u1="_L_1sx70_44",d1="_R_1sx70_48",Et={SideControlHandle:r1,SideControlVisualMarker:i1,Vertical:o1,SideControlContainer:s1,Active:a1,T:l1,B:c1,L:u1,R:d1},Oo=({id:e,point:t,vertical:n=!1,active:r=!1,onMouseDown:i,onTouchStart:o})=>{const s=/^[trbl]{1}$/i.test(e)?`${e}`.toUpperCase():void 0,a=s==="T"?Et.T:s==="R"?Et.R:s==="B"?Et.B:s==="L"?Et.L:void 0,c=`${s==="T"?"top":s==="R"?"right":s==="B"?"bottom":s==="L"?"left":""} side control point`;return h.jsxs("g",{className:ae([Et.SideControlContainer,a,r&&Et.Active]),children:[h.jsx("rect",{x:t.x,y:t.y,width:1,height:1,className:ae([Et.SideControlVisualMarker,n&&Et.Vertical]),style:{filter:"url(#shadow)"}}),h.jsx("rect",{id:e,x:t.x,y:t.y,onMouseDown:i,onTouchStart:o,width:1,height:1,className:Et.SideControlHandle,role:"button","aria-label":c,children:h.jsx("title",{children:c})})]})},am="tl",lm="t",cm="tr",um="l",dm="c",fm="r",hm="bl",pm="b",mm="br",f1=[am,lm,cm,um,dm,fm,hm,pm,mm];function h1(e){return typeof e=="string"&&f1.includes(e)}const p1=y.memo(function({title:t,numberPiecesPerWidth:n=1,numberPiecesPerHeight:r=1,imageWidth:i=1,imageHeight:o=1,controlPoints:s,pieceMinimalSideSizeInSelectionZoneScale:a=1,onDispatchZoneControlPointsChange:l,onChangeNumberOfPieces:c,onControlPointSelected:u}){const[d,f]=y.useState();y.useEffect(()=>{u(d)},[u,d]);const p=y.useCallback(function(M){if(!h1(M)){console.error("trying to select a control point with unsupported name");return}f(M)},[f]),w=y.useCallback(F=>{var M;p((M=F.target)==null?void 0:M.id)},[p]),S=y.useCallback(F=>{var M;p((M=F.target)==null?void 0:M.id)},[p]),{tl:P,br:g}=s,m=Math.floor(g.x-P.x),v=Math.floor(g.y-P.y),x=m/2,_=v/2,T=new O(P.x+x,P.y),C=new O(g.x,P.y),E=new O(g.x,P.y+_),k=new O(P.x+x,g.y),N=new O(P.x,g.y),R=new O(P.x,P.y+_),j=new O(P.x+x,P.y+_),B=y.useRef(null);M_({selectingZoneRef:B,imageWidth:i,imageHeight:o,selectedControlPointName:d,setSelectedControlPointName:f,tl:P,br:g,onDispatchZoneControlPointsChange:l});const{possibleNumberPerWidth:H,possibleNumberPerHeight:V,sideSize:W}=y.useMemo(()=>{let F=a;F=Math.floor(m/n),F<a&&(F=a);let M=Math.floor(m/F),D=Math.floor(v/F);return D<=r&&(F=Math.floor(v/r),M=Math.floor(m/F),D=Math.floor(v/F),F<a&&(F=a,M=Math.floor(m/a),D=Math.floor(v/a))),{possibleNumberPerWidth:M,possibleNumberPerHeight:D,sideSize:F}},[a,n,r,m,v]),Q=y.useMemo(()=>({x:P.x,y:P.y,width:H*W,height:V*W}),[P.x,P.y,H,V,W]);y.useEffect(()=>{c(H,V,W)},[c,H,V,W]);const L=y.useMemo(()=>{const F=[],M=P.y+V*W;for(let D=0;D<=H;D++){const Y=P.x+D*W;F.push({id:`v-${D}`,x1:Y,y1:P.y,x2:Y,y2:M})}return F},[V,H,W,P.x,P.y]),z=y.useMemo(()=>{const F=[],M=P.x+H*W;for(let D=0;D<=V;D++){const Y=P.y+D*W;F.push({id:`h-${D}`,x1:P.x,y1:Y,x2:M,y2:Y})}return F},[V,H,W,P.x,P.y]);if(!(!Number.isFinite(i)||!Number.isFinite(o))&&!(!Number.isFinite(Q.width)||!Number.isFinite(Q.height)))return h.jsxs("svg",{ref:B,className:Zd.SelectedZone,viewBox:`0 0 ${i} ${o}`,xmlns:"http://www.w3.org/2000/svg",role:"application","aria-label":t,children:[h.jsx("filter",{id:"shadow",children:h.jsx("feDropShadow",{dx:"1",dy:"1",stdDeviation:"1"})}),h.jsxs("g",{role:"img","aria-label":"pieces borders",children:[L.map(({id:F,x1:M,y1:D,x2:Y,y2:ue})=>h.jsx(Yd,{x1:M,y1:D,x2:Y,y2:ue},F)),z.map(({id:F,x1:M,y1:D,x2:Y,y2:ue})=>h.jsx(Yd,{x1:M,y1:D,x2:Y,y2:ue},F))]}),h.jsx("rect",{x:"0",y:"0",width:i,height:o,mask:"url(#selected-zone)","aria-label":"available to select area of image",children:h.jsx("title",{children:"available to select area of image"})}),h.jsx("path",{d:`M${P.x} ${P.y}L${C.x} ${C.y}L${g.x} ${g.y}L${N.x} ${N.y}Z`,className:Zd.SelectedZoneBorder,style:{filter:"url(#shadow)"},role:"img","aria-label":"selected area border"}),h.jsxs("mask",{id:"selected-zone",children:[h.jsx("rect",{x:0,y:0,width:i,height:o,fill:"white"}),h.jsx("rect",{x:Q.x,y:Q.y,width:Q.width,height:Q.height,fill:"black",children:h.jsx("title",{children:"selected area"})})]}),h.jsx(W_,{id:"c",point:j,onMouseDown:S,onTouchStart:w,active:d==dm}),h.jsx(Oo,{id:"t",point:T,onMouseDown:S,onTouchStart:w,active:d==lm}),h.jsx(Oo,{id:"r",point:E,vertical:!0,onMouseDown:S,onTouchStart:w,active:d==fm}),h.jsx(Oo,{id:"b",point:k,onMouseDown:S,onTouchStart:w,active:d==pm}),h.jsx(Oo,{id:"l",point:R,vertical:!0,onMouseDown:S,onTouchStart:w,active:d==um}),h.jsx(No,{id:"tl",point:P,onMouseDown:S,onTouchStart:w,active:d==am}),h.jsx(No,{id:"tr",point:C,onMouseDown:S,onTouchStart:w,active:d==cm}),h.jsx(No,{id:"br",point:g,onMouseDown:S,onTouchStart:w,active:d==mm}),h.jsx(No,{id:"bl",point:N,onMouseDown:S,onTouchStart:w,active:d==hm})]})}),m1=2,En=50,g1=.9,Qd="preview of the puzzle cut into pieces",y1=({imageSrc:e,onHideModal:t,onSwitchToModeChooseMethod:n})=>{const{pieceSideShapeName:r,numberOfPiecesPerWidth:i,numberOfPiecesPerHeight:o}=Ke(),[s,a]=y.useState(r||Vs),[l,c]=y.useState([i,o]),[u=1,d=1]=y.useMemo(()=>l,[l]),f=y.useCallback(re=>{a(re)},[]),p=y.useCallback(re=>{const Ee=Number.parseInt(re.target.value,10);if(Number.isFinite(Ee)&&Ee>=1){c([Ee,d]);return}c([1,d])},[d,c]),w=y.useCallback(re=>{const Ee=Number.parseInt(re.target.value,10);if(Number.isFinite(Ee)&&Ee>=1){c([u,Ee]);return}c([u,1])},[u,c]),S=y.useRef(null),P=y.useRef(null),{elementWidth:g,elementHeight:m}=nu(S),{controlPoints:v,dispatchZoneControlPointsChange:x}=l_({imageContainerRef:S}),_=y.useMemo(()=>g>1?g:0,[g]),T=y.useMemo(()=>m>1?m:0,[m]),{image:C,imageWidth:E,imageHeight:k}=i_({imageSrc:e}),N=y.useMemo(()=>{if(E<1||_<1)return En;const re=E/_;return En/re},[E,_]),[R,j]=y.useState(u),[B,H]=y.useState(d),[V,W]=y.useState(1),Q=_>0?E/_:1,L=V*Q,z=y.useCallback((re,Ee,Qs)=>{j(re),H(Ee),W(Qs)},[j,H,W]),F=c_(S),M=E>1&&k>1&&_>1&&T>1;r_({imageSrc:e,isImageDisplayed:M,dispatchZoneControlPointsChange:x,imageScale:Q});const D=y.useCallback(()=>{x({type:"set",tl:new O(0,0),br:new O(g,m)})},[x,g,m]),ue=E/k<=g1,Se=R*B,he=!(e&&s&&l&&M&&Se>=m1),We=Xi(),Mt=y.useCallback(re=>{if(re.preventDefault(),he)return;const Ee={tl:new O(v.tl.x*Q,v.tl.y*Q),br:new O(v.br.x*Q,v.br.y*Q)},Qs=R*(V*Q),ym=B*(V*Q),vm={tl:Ee.tl,br:new O(Ee.tl.x+Qs,Ee.tl.y+ym)};We({type:"init-new-challenge-id",params:{imageSrc:e,imageOriginalSize:{width:E,height:k},pieceSideShapeName:s,numberOfPiecesPerWidth:R,numberOfPiecesPerHeight:B,boundaryPoints:vm}}),t()},[he,e,s,E,k,Q,R,B,V,v.tl.x,v.tl.y,v.br.x,v.br.y,We,t]),Bn=y.useRef(null),{showTopBorder:jn,showBottomBorder:Bt}=o_(Bn),{isVisible:_t,show:pn,hide:jt}=vr(!1);return h.jsxs("form",{ref:P,className:q.PreviewContainer,onSubmit:Mt,children:[h.jsxs("div",{className:ae([q.PreviewContent,jn&&q.VisibleTopBorder,Bt&&q.VisibleBottomBorder]),ref:Bn,children:[h.jsxs("div",{className:q.SelectedZoneContainer,children:[h.jsx("div",{ref:S,className:ae([q.ImageContainer,_t&&q.FitContent]),children:(C==null?void 0:C.src)&&h.jsxs(h.Fragment,{children:[h.jsx("img",{src:C.src,alt:Qd,className:q.ImagePreview}),M&&h.jsx(p1,{title:Qd,numberPiecesPerWidth:u,numberPiecesPerHeight:d,imageWidth:_,imageHeight:T,controlPoints:v,pieceMinimalSideSizeInSelectionZoneScale:N,onDispatchZoneControlPointsChange:x,onChangeNumberOfPieces:z,onControlPointSelected:F})]})}),!ue&&h.jsx(Xd,{pieceSideSize:L,pieceMinimalSideSizeInImageScale:En,imageWidth:E,imageHeight:k})]}),h.jsxs("div",{className:q.AttributesPanel,children:[h.jsxs("div",{className:q.FormFieldList,children:[h.jsxs("div",{className:q.FormField,children:[h.jsx("h2",{className:q.FormFieldName,children:"Piece shape"}),h.jsx("ul",{className:q.Shapes,"aria-label":"available shapes",children:o0.map(re=>h.jsx(t_,{value:re,checked:re===s,onChange:f},re))})]}),h.jsxs("div",{className:q.FormField,children:[h.jsx("h2",{className:q.FormFieldName,children:"Minimal number of pieces per side"}),h.jsx("div",{className:q.FormFieldInline,children:h.jsxs("div",{className:q.FormFieldinlineGroup,children:[h.jsxs("div",{className:q.FormSubField,children:[h.jsx("input",{type:"number",id:"numberPerWidth",name:"numberPerWidth",className:q.FormFieldInput,value:String(u),onChange:p}),h.jsx("label",{className:q.FormSubFieldName,htmlFor:"numberPerWidth",children:"width"})]}),h.jsxs("div",{className:q.FormSubField,children:[h.jsx("input",{type:"number",id:"numberPerHeight",name:"numberPerHeight",className:q.FormFieldInput,value:String(d),onChange:w}),h.jsx("label",{className:q.FormSubFieldName,htmlFor:"numberPerHeight",children:"height"})]})]})})]}),h.jsxs("div",{className:q.FormField,children:[h.jsx("h2",{className:q.FormFieldName,children:"Recommended number of pieces"}),h.jsx("ul",{className:q.SizeList,"aria-label":"recommended sizes",children:n_.map(re=>h.jsx("li",{className:q.SizeListItem,children:h.jsx($P,{size:re,onSizeChange:c,isActive:re[0]===l[0]&&re[1]===l[1]})},re.join("-")))})]})]}),h.jsx(nm,{}),ue&&h.jsx(Xd,{pieceSideSize:L,pieceMinimalSideSizeInImageScale:En,imageWidth:E,imageHeight:k})]})]}),h.jsxs("div",{className:q.FormFooter,children:[h.jsxs("div",{className:q.TotalNumberOfPieces,role:"note","aria-labelledby":"total-number-of-pieces-label",children:[h.jsxs("div",{className:q.TotalNumberOfPiecesLabel,children:[h.jsx("span",{id:"total-number-of-pieces-label",children:"Total number of pieces: "}),Se]}),h.jsxs("span",{children:["(",R,"x",B,")"]})]}),h.jsxs("div",{className:ae([q.FormActionButtons,q.WithButtonGroups]),children:[h.jsxs("div",{className:q.FormActionButtons,children:[!_t&&h.jsx(Xe,{onClick:pn,children:"Show image in full size"}),_t&&h.jsx(Xe,{onClick:jt,children:"Show image in small size"}),h.jsx(Xe,{onClick:D,children:"Reset selected area"})]}),h.jsxs("div",{className:q.FormActionButtons,children:[h.jsx(Xe,{onClick:n,children:"Use another image"}),h.jsx(Xe,{isPrimary:!0,type:"submit",disabled:he,children:"Create puzzle"})]})]})]})]})},v1="_Form_18qpy_1",w1="_ImageList_18qpy_11",x1="_ImageListItem_18qpy_23",S1="_FormFooter_18qpy_27",P1="_ActionButtonList_18qpy_35",ri={Form:v1,ImageList:w1,ImageListItem:x1,FormFooter:S1,ActionButtonList:P1},_1=e=>{if(!e)return;const t=e.split("/"),r=t[t.length-1].split(".");return r.pop(),r.join(" ").replace(/-/gi," ")},C1="_Thumbnail_1ivpm_1",Ao={Thumbnail:C1},E1=y.memo(function({imageSrc:t,isActive:n,onSelectImage:r}){const i=y.useCallback(()=>{typeof r=="function"&&r(t)},[t,r]),o=y.useMemo(()=>_1(t),[t]);return h.jsxs("div",{className:Ao.ImageThumbnailContainer,children:[h.jsx(we,{isActive:n,onClick:i,style:{padding:"0.5em"},children:h.jsx("img",{src:t,alt:t,className:Ao.Thumbnail})}),h.jsx("div",{className:Ao.ImageHumanizedName,children:o}),h.jsxs("div",{className:Ao.ImageSourceLink,children:[h.jsx("span",{children:"Image link:"})," ",h.jsx("a",{href:t,target:"__blank",children:t})]})]})}),I1=y.memo(function({onChooseMethodToUploadImage:t,onSelectImageSrc:n,onSwitchToModeUploadImageFromFile:r,onSwitchToModeEnterImageUrl:i}){const[o,s]=y.useState(),a=y.useCallback(()=>{typeof t=="function"&&t()},[t]),l=y.useCallback(c=>{c.preventDefault(),o&&n(o)},[n,o]);return h.jsxs("form",{className:ri.Form,onSubmit:l,children:[h.jsx("ul",{className:ri.ImageList,children:Pp.map(({imageSrc:c},u)=>h.jsx("li",{className:ri.ImageListItem,children:h.jsx(E1,{imageSrc:c,onSelectImage:s,isActive:c===o})},u))}),h.jsxs("div",{className:ri.FormFooter,children:[h.jsxs("div",{className:ae([ri.ActionButtonList]),children:[h.jsx(Xe,{onClick:a,children:"Choose another image"}),h.jsx(Xe,{type:"submit",isPrimary:!0,disabled:!o,children:"Use selected image"})]}),h.jsxs(eo,{"aria-label":"alternative way to load an image",children:["also you can ",h.jsx(br,{onClick:r,children:"upload an image from device"})," ",h.jsx("br",{}),"or ",h.jsx(br,{onClick:i,children:"load an image from a link"})," ",h.jsx("br",{})]})]})]})}),gm=e=>new Promise((t,n)=>{if(!(e!=null&&e.length)){n(void 0);return}const r=e[0];if(r instanceof DataTransferItem&&r.kind!=="file"){console.error("Error. Only file transfer supporting"),n(void 0);return}if(!im(r.type)){console.error("Error. File type does not supported. File should be an image"),n(void 0);return}const i=r instanceof DataTransferItem?r.getAsFile():r;if(!i){n(void 0);return}const o=new FileReader;o.onload=function(s){var l;const a=(l=s==null?void 0:s.target)==null?void 0:l.result;if(typeof a=="string"){t(a);return}n(void 0)},o.readAsDataURL(i)}),T1=({setImageSrc:e})=>{y.useEffect(()=>{const t=async o=>{var l;o.preventDefault();const s=(l=o.dataTransfer)==null?void 0:l.items;if(!s)return;const a=await gm(s);a&&e(a)},n=o=>{o.preventDefault()},r=()=>{},i=()=>{};return document.addEventListener("drop",t),document.addEventListener("dragover",n),document.addEventListener("dragenter",r),document.addEventListener("dragleave",i),()=>{document.removeEventListener("drop",t),document.removeEventListener("dragover",n),document.removeEventListener("dragenter",r),document.removeEventListener("dragleave",i)}},[e])},k1=({setImageSrc:e})=>{y.useEffect(()=>{const t=async n=>{var i;const r=(i=n==null?void 0:n.clipboardData)==null?void 0:i.files;if(r)try{const o=await gm(r);if(!o)return;e(o)}catch(o){console.error("Error while loading the image from the clipboard",o)}};return document.addEventListener("paste",t),()=>{document.removeEventListener("paste",t)}},[e])},N1=(e,t)=>{y.useEffect(()=>{t&&e()},[t,e])},O1=y.memo(function({initialImageSrc:t,onHide:n}){const r=y.useCallback(()=>{typeof n=="function"&&n()},[n]),[i,o]=y.useState(t),[s,a]=y.useState(),l=y.useCallback(()=>{a(ke.choosing),o(void 0)},[a]),c=y.useCallback(()=>{a(ke.uploadFromFile),o(void 0)},[a]),u=y.useCallback(()=>{a(ke.enterImageUrl),o(void 0)},[a]),d=y.useCallback(()=>{a(ke.selectingFromDemoImages),o(void 0)},[a]),f=y.useCallback(()=>{a(ke.previewingImage)},[a]);N1(f,i),k1({setImageSrc:o}),T1({setImageSrc:o});const p=s===ke.uploadFromFile?"Upload an image from device":s===ke.enterImageUrl?"Load an image from a link":s===ke.selectingFromDemoImages?"Choose a demo image":s===ke.previewingImage?"Puzzle creation":"Choose method to create a puzzle";if(!(i&&s!==ke.previewingImage))return h.jsxs(Zs,{dialogTitle:p,onHide:r,onClickOnBackground:r,fullHeight:s===ke.previewingImage,children:[s===ke.choosing&&h.jsx(bP,{onShowChoiceSelectDemoImageDialog:d,onSwitchToModeUploadImageFromFile:c,onSwitchToModeEnterImageUrl:u}),s===ke.uploadFromFile&&h.jsx(jP,{setImageSrc:o,onShowChoiceSelectDemoImageDialog:d,onSwitchToModeEnterImageUrl:u}),s===ke.enterImageUrl&&h.jsx(WP,{setImageSrc:o,onShowChoiceSelectDemoImageDialog:d,onSwitchToModeUploadImageFromFile:c}),s===ke.selectingFromDemoImages&&h.jsx(I1,{onChooseMethodToUploadImage:l,onSelectImageSrc:o,onSwitchToModeUploadImageFromFile:c,onSwitchToModeEnterImageUrl:u}),s===ke.previewingImage&&h.jsx(y1,{imageSrc:i,onHideModal:r,onSwitchToModeChooseMethod:l})]})}),A1="_SettingsNames_1eiuq_1",L1="_SettingsName_1eiuq_1",F1="_SettingsNameCheckbox_1eiuq_16",R1="_SettingsNameLabel_1eiuq_20",$o={SettingsNames:A1,SettingsName:L1,SettingsNameCheckbox:F1,SettingsNameLabel:R1},Kd=1e3,b1=y.memo(function({settingsName:t}){const n=Dt(),r=Sp(),i=()=>r({type:"set-setting",name:t,value:!n[t]}),o=y.useMemo(()=>t.replace(/debug/gi,"").replace(/settings/gi,"").replace(/should/gi,"").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/([a-z])([0-9])/g,"$1 $2").replace(/([0-9])(a-zA-Z)/g,"$1 $2").toLocaleLowerCase(),[t]);return h.jsxs("li",{className:$o.SettingsName,children:[h.jsx("input",{id:t,type:"checkbox",checked:n[t],className:$o.SettingsNameCheckbox,onChange:i}),h.jsx("label",{htmlFor:t,className:$o.SettingsNameLabel,children:o})]})}),D1=({onResetDebugSettings:e,onResetDebugSettingsAndReloadPage:t,onClearLocalStorageDataAndReloadPage:n})=>h.jsxs(h.Fragment,{children:[h.jsx(Xe,{onClick:n,children:"Clear localStorage data and reload page"}),h.jsx(Xe,{onClick:e,children:"Reset debug settings to default"}),h.jsx(Xe,{isPrimary:!0,onClick:t,children:"Reset debug settings to default and reload page"})]}),z1=y.memo(function({onHide:t}){const n="Debug settings",r=Dt(),i=y.useMemo(()=>Object.keys(r),[r]),o=Sp(),s=y.useCallback(()=>{o({type:"reset-settings"})},[o]),a=y.useCallback(()=>{s(),setTimeout(()=>{window==null||window.location.reload()},Kd)},[s]),l=y.useCallback(()=>{setTimeout(()=>{try{localStorage.clear()}catch(c){console.error("localStorage error",c)}window==null||window.location.reload()},Kd)},[]);return h.jsx(Zs,{dialogTitle:n,onHide:t,onClickOnBackground:t,actionButtons:h.jsx(D1,{onResetDebugSettings:s,onResetDebugSettingsAndReloadPage:a,onClearLocalStorageDataAndReloadPage:l}),children:i.length&&h.jsx("ul",{className:$o.SettingsNames,children:i.map(c=>h.jsx(b1,{settingsName:c},c))})})}),M1="_InterfaceScreenshotContainer_1uivf_32",B1="_InterfaceScreenshot_1uivf_32",j1="_InterfaceScreenshotLegendLabel_1uivf_41",G1="_AnimatedPuzzleSolvingGifContainer_1uivf_45",H1="_AnimatedPuzzleSolvingGif_1uivf_45",ii={InterfaceScreenshotContainer:M1,InterfaceScreenshot:B1,InterfaceScreenshotLegendLabel:j1,AnimatedPuzzleSolvingGifContainer:G1,AnimatedPuzzleSolvingGif:H1},U1=y.memo(function({onHide:t}){return h.jsxs(Zs,{dialogTitle:"Help",onHide:t,onClickOnBackground:t,children:[h.jsxs("div",{className:ii.InterfaceScreenshotContainer,children:[h.jsx("div",{className:ii.InterfaceScreenshot,children:"interface screenshots"}),h.jsx("div",{className:ii.InterfaceScreenshotLegendLabel,children:"legend label for screenshot"})]}),h.jsx("div",{className:ii.AnimatedPuzzleSolvingGifContainer,children:h.jsx("img",{src:"#animated-puzzle-solving-gif",alt:"animated puzzle solving gif",title:"animated puzzle solving gif",className:ii.AnimatedPuzzleSolvingGif})})]})}),W1=({onReject:e,onConfirm:t})=>h.jsxs(h.Fragment,{children:[h.jsx(Xe,{onClick:e,children:"Cancel"}),h.jsx(Xe,{isPrimary:!0,onClick:t,children:"Solve again"})]}),$1=y.memo(function({onHide:t,onReject:n,onConfirm:r}){return h.jsx(Zs,{dialogTitle:"Want to solve the puzzle again?",isCloseButtonHidden:!0,onHide:t,onClickOnBackground:t,isActionButtonsAlignByCenter:!0,actionButtons:h.jsx(W1,{onReject:n,onConfirm:r})})}),V1="_AppContainer_2diri_1",q1="_App_2diri_1",Jd={AppContainer:V1,App:q1},X1=60*1e3,Y1=500,Z1=["mousedown","mousemove","keydown","touchstart","touchmove","wheel","resize"],Q1=(e,t=0)=>{let n=0;return()=>{const r=Date.now();r-n>=t&&(typeof e=="function"&&e(),n=r)}},K1=(e,t)=>{typeof e>"u"||!(e instanceof Array)||e.forEach(n=>{window==null||window.addEventListener(n,t)})},J1=(e,t)=>{typeof e>"u"||!(e instanceof Array)||e.forEach(n=>{window==null||window.removeEventListener(n,t)})},eC=(e=X1,t=[],n=!0)=>{const[r,i]=y.useState(!1),[o,s]=y.useState(!1),[a,l]=y.useState(Z1);return y.useEffect(()=>{typeof t>"u"||!t||!(t instanceof Array)||!t.length||l(t)},[t]),y.useEffect(()=>{let c;const u=()=>{i(!0)},d=Q1(()=>{i(!1),window==null||window.clearTimeout(c),c=window==null?void 0:window.setTimeout(u,e)},Y1);K1(a,d);const f=()=>{if(document.visibilityState==="hidden"){s(!0),u();return}d(),s(!1)};return n&&document.addEventListener("visibilitychange",f),c=window==null?void 0:window.setTimeout(u,e),()=>{window==null||window.clearTimeout(c),J1(a,d),n&&document.removeEventListener("visibilitychange",f)}},[e,a,n]),{isUserIdle:r,isPageHidden:o}},tC=1e3,nC=60*1e3;function rC(){const{puzzleCompleted:e,puzzleWasTouched:t,isTimerPaused:n}=Ke(),r=Xi(),{isUserIdle:i}=eC(nC);y.useEffect(function(){if(n||!t||e)return;let s=Date.now();const a=()=>{const c=Date.now(),u=c-s;r({type:"set-solving-puzzle-time-spent-by-add-time-delta",timeDelta:u}),s=c},l=window==null?void 0:window.setInterval(a,tC);return a(),function(){a(),window==null||window.clearInterval(l)}},[t,e,n,r]),y.useEffect(function(){if(i||e||!t){r({type:"set-solving-puzzle-timer-state",isTimerPaused:!0});return}r({type:"set-solving-puzzle-timer-state",isTimerPaused:!1})},[i,t,e,r])}const iC=y.memo(function(){const{isVisible:t,show:n,hide:r}=vr(!1),{imageSrc:i}=Ke(),[o,s]=y.useState(!1),{isVisible:a,show:l,hide:c}=vr(!1),u=y.useCallback(()=>{s(!0),l()},[l,s]),d=y.useCallback(()=>{c(),s(!1)},[c,s]),{isVisible:f,show:p,hide:w}=vr(!1),{isVisible:S,show:P,hide:g}=vr(!1),{toggleFullscreenMode:m,FullScreen:v,fullScreenModeHandle:x,isFullscreenModeActive:_}=sP(),T=y.useRef(null),{challengeId:C,isSidebarOpen:E,canvasBackgroundColor:k}=Ke(),N=Xi(),R=y.useCallback(()=>{g(),N({type:"init-new-challenge-id"})},[g,N]),j=y.useCallback(H=>{N({type:"set-canvas-background-color",color:H})},[N]);hx(),dx(),rC();const B=Cp(k);return h.jsx(v,{handle:x,className:Jd.AppContainer,children:h.jsxs("main",{className:Jd.App,style:{backgroundColor:B},children:[h.jsx(dS,{ref:T,toggleFullscreenMode:m,isFullscreenModeActive:_,children:h.jsx(rP,{isVisible:E,canvasBackgroundColor:k,onRestartPuzzleChallenge:P,onShowChangeNumberOfPiecesDialog:u,onShowChooseMethodToCreatePuzzleDialog:l,onShowChangePieceShapeDialog:u,onChangeCanvasBackgroundColor:j,onShowHelpDialog:n,onShowDebugSettingsDialog:p})},C),S&&h.jsx($1,{onHide:g,onReject:g,onConfirm:R}),a&&h.jsx(O1,{initialImageSrc:o?i:void 0,onHide:d}),t&&h.jsx(U1,{onHide:r}),f&&h.jsx(z1,{onHide:w})]})})}),oC=y.memo(function(){return h.jsx(y0,{children:h.jsx(iC,{})})}),sC=document.getElementById(rm),aC=Ga.createRoot(sC);aC.render(h.jsx(y.StrictMode,{children:h.jsx(oC,{})}));
